(this["webpackJsonpb1.0"]=this["webpackJsonpb1.0"]||[]).push([[0],{256:function(e,t,r){},279:function(e,t,r){"use strict";r.r(t);var a=r(22),n=r(19),o=r(39),i={mainPageOrderList:[],sortPageOrderList:[],isLoading:!0};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.a:return Object(n.a)(Object(n.a)({},e),{},{mainPageOrderList:[].concat(Object(a.a)(e.mainPageOrderList),[t.payload]),sortPageOrderList:[].concat(Object(a.a)(e.sortPageOrderList),[t.payload])});case o.b:return t.payload?Object(n.a)(Object(n.a)({},e),{},{mainPageOrderList:t.payload,sortPageOrderList:t.payload,isLoading:!1}):e;default:return e}}},280:function(e,t,r){},281:function(e,t,r){},386:function(e,t,r){},387:function(e,t,r){},389:function(e,t,r){},39:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return d})),r.d(t,"f",(function(){return l}));var a="ADD_ORDER",n="LOAD_ORDERS",o="SET_AUTHENTICATED",i="SET_UNAUTHENTICATED",d="SELECT_CUSTOMER",l="UNSELECT_CUSTOMER"},390:function(e,t,r){},391:function(e,t,r){},392:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r(0),o=r.n(n),i=r(20),d=r.n(i),l=(r(256),r(51)),s=r(28),c=r.n(s),u=r(35),b=r.n(u),m=r(57),j=r(39),p=function(e,t){return{type:j.d,payload:{token:e,employee:t}}},h=function(){var e=Object(m.a)(b.a.mark((function e(t){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/api/auth/signin",t);case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){w.dispatch({type:j.e})},v={isAuthenticated:!1,loggedUser:null};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.d:return localStorage.setItem("token",t.payload.token),localStorage.setItem("loggedUser",JSON.stringify(t.payload.employee)),c.a.defaults.headers.common.Authorization="Bearer ".concat(t.payload.token),c.a.interceptors.response.use((function(e){return e}),(function(e){var t;throw 401===(null===(t=e.response)||void 0===t?void 0:t.status)?g():console.error(e),e})),{isAuthenticated:!0,loggedUser:t.payload.employee};case j.e:return localStorage.removeItem("token"),localStorage.removeItem("loggedUser"),{isAuthenticated:!1,loggedUser:null};default:return e}},O={selectedCustomer:null};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.c:return{selectedCustomer:t.payload};case j.f:return{selectedCustomer:null};default:return e}},y=r(153),w=(0,y.createStore)((0,y.combineReducers)({orders:r(279).default,auth:f,sort:x})),N=r(222),C=r(450),k=r(38),L=r(453),S=r(221),T=r(73),_=r(31),D=(r(280),r(107)),I=r(440),Q=r(441),F=r(108),q=r(132),E=r(442),K=(r(281),Object(D.a)((function(){return{root:{flexGrow:1},logoutButton:{padding:0},logoutHolder:{display:"flex",justifyContent:"flex-end"},tabs:{margin:"0 auto"}}})));function R(){var e=K(),t=Object(_.g)();return Object(a.jsx)(q.a,{elevation:2,children:Object(a.jsx)("div",{className:"header__container",children:Object(a.jsx)(I.a,{position:"static",children:Object(a.jsxs)(Q.a,{children:[Object(a.jsx)(E.a,{color:"inherit",href:"https://psdruk.com.ua/",children:Object(a.jsx)("img",{width:"110",height:"50",src:"/img/logo.svg",alt:"logo"})}),Object(a.jsx)("div",{className:e.logoutHolder,children:Object(a.jsx)(F.a,{color:"inherit",onClick:function(){g(),t.push("/login")},className:e.logoutButton,children:"\u0412\u0438\u0439\u0442\u0438"})})]})})})})}var A=r(210),B=r(19),U=r(52),M=r(229),P=Object(D.a)((function(e){return{arrow:{color:e.palette.primary.main},tooltip:{fontSize:12,backgroundColor:e.palette.primary.main}}}));var W=function(e){var t=e.title,r=(e.value,e.children),n=Object(U.a)(e,["title","value","children"]),o=P();return Object(a.jsx)(M.a,Object(B.a)(Object(B.a)({title:t,placement:"right-start",arrow:!0,classes:o},n),{},{children:Object(a.jsx)("div",{className:"value",style:{lineHeight:"1.43"},children:r})}))},z=r(10),H=r(161),V=r(12),J=["","img/on-agreement.svg","img/in-progress.svg","img/ready.svg","img/completed.svg"],$=Object(D.a)((function(e){return{container:{padding:e.spacing(1),textAlign:"center",backgroundColor:"#fff",boxShadow:"0 0 14px 2px rgba(0, 0, 0, 0.3)",borderRadius:"4px"},acceptanceButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#df16a0",color:"#df16a0","&:hover":{color:"#fff",backgroundColor:"#df16a0"}},inWorkButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:e.palette.primary.main,color:e.palette.primary.main,"&:hover":{color:"#fff",backgroundColor:e.palette.primary.main}},readyButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#28a745",color:"#28a745","&:hover":{color:"#fff",backgroundColor:"#28a745"}},completedButton:{width:"100%",margin:".2rem 0",backgroundColor:"#28a745",border:"1px solid",borderColor:"#28a745",color:"#fff","&:hover":{borderColor:"#218838",backgroundColor:"#218838"}},popper:{zIndex:1,marginLeft:"0.5rem",'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent ".concat(e.palette.background.paper," transparent transparent")}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent ".concat(e.palette.background.paper)}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}}));var G=function(e){var t=e.orderId,r=e.status,n=$(),i=o.a.useRef(null),d=o.a.useState(null),l=Object(z.a)(d,2),s=l[0],u=l[1],b=o.a.useState(!0),m=Object(z.a)(b,1)[0],j=o.a.useState(!1),p=Object(z.a)(j,2),h=p[0],g=p[1],v=h?"scroll-playground":null,f=function(){return g((function(e){return!e}))},O=Object(V.b)((function(e){return c.a.get("/api/orders/status/"+e+"/"+t)}),{onSuccess:function(){V.a.invalidateQueries("orders"),f()}})[0];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:n.img,ref:i,src:J[r],width:"19",alt:"on-agreement","aria-describedby":v,variant:"contained",color:"primary",onClick:f}),Object(a.jsxs)(H.a,{id:v,open:h,anchorEl:i.current,placement:"right",disablePortal:!0,className:n.popper,modifiers:{flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"scrollParent"},arrow:{enabled:!0,element:s}},children:[m?Object(a.jsx)("span",{className:n.arrow,ref:u}):null,Object(a.jsxs)("div",{className:n.container,children:[Object(a.jsx)(F.a,{className:n.acceptanceButton,onClick:function(){return O(1)},children:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456"}),Object(a.jsx)("br",{}),Object(a.jsx)(F.a,{className:n.inWorkButton,onClick:function(){return O(2)},children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),Object(a.jsx)("br",{}),Object(a.jsx)(F.a,{className:n.readyButton,onClick:function(){return O(3)},children:"\u0413\u043e\u0442\u043e\u0432\u0435"}),Object(a.jsx)("br",{}),Object(a.jsx)(F.a,{className:n.completedButton,onClick:function(){return O(4)},children:"\u0412\u0456\u0434\u0434\u0430\u043d\u043e"})]})]})]})},Y=function(e){return e.map((function(e){return e.id=e.orderId,e.date=new Date(e.date),e}))},X=function(){var e=Object(m.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/api/orders/");case 2:if(t=e.sent,!(r=t.data)){e.next=6;break}return e.abrupt("return",Y(r));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Z=r(403),ee=r(444),te=r(400),re=r(159),ae=r(405),ne=r(445),oe=r(15),ie=r(226),de=function(e){var t=e.label,r=e.field,n=e.error,o=e.readonly,i=void 0!==o&&o,d=e.validator,l=e.numeric,s=void 0===l||l,c=Object(U.a)(e,["label","field","error","readonly","validator","numeric"]),u=r.onChange,b=r.name;return Object(a.jsx)(ie.a,Object(B.a)(Object(B.a)(Object(B.a)({},c),r),{},{error:!!n,id:"metrics",size:"small",variant:"outlined",autoComplete:"off",label:t,InputProps:{readOnly:i},onChange:function(e){s||u(e),(e.target.value.match(/^\d*\.?\d*$/)||0===e.target.value.length)&&u(e),d(b)}}))},le=r(6),se=r(454),ce=r(131),ue=Object(le.a)({inputRoot:{'&&[class*="MuiOutlinedInput-root"] $input':{padding:2},'&&[class*="MuiOutlinedInput-root"]':{paddingRight:"40px!important"}},input:{}})(se.a);var be=function(e){var t=e.label,r=e.getName,n=e.sortKey,o=e.error,i=e.validator,d=(e.textFieldProps,Object(U.a)(e,["label","getName","sortKey","error","validator","textFieldProps"])),s=d.form.setFieldValue,u=Object(ce.a)(d),b=Object.assign({},u),m=b.name,p=Object(l.b)(),h=Object(V.b)((function(e){return c.a.post("/api/sort/",e)}),{onSuccess:function(e){V.a.setQueryData(["orders",1],Y(e.data))}})[0];return Object(a.jsx)(ue,Object(B.a)(Object(B.a)({},d),{},{id:"combo-box",size:"small",error:"",value:b.value,autoHighlight:!0,getOptionLabel:r,onChange:function(e,r){if(n){var a={};a[n]=r,h(a)}var o;"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a"===t&&p((o=r,{type:j.c,payload:o})),s(m,r),i(m)},renderInput:function(e){return Object(a.jsx)(ie.a,Object(B.a)(Object(B.a)({},e),{},{error:!!o,label:t,variant:"outlined"}))}}))},me=r(18),je=r(451),pe=Object(D.a)((function(){return{datepicker:{margin:0}}}));var he=function(e){var t=e.label,r=Object(U.a)(e,["label"]),n=pe(),o=r.form.setFieldValue,i=Object(ce.a)(r),d=Object.assign({},i),l=d.name;return Object(a.jsx)(je.a,Object(B.a)(Object(B.a)(Object(B.a)({},r),d),{},{autoOk:!0,autoComplete:"off",helperText:"",className:n.datepicker,inputVariant:"outlined",variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:t,onChange:function(e){return o(l,e)},KeyboardButtonProps:{"aria-label":"change date"}}))};var ge=Object(D.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4),width:"55%"},link:{cursor:"pointer",color:e.palette.primary.main},h2:{top:"-.9rem",position:"relative",marginTop:0,textAlign:"center",fontWeight:"400",gridColumnEnd:4,gridColumnStart:2},buttons:{display:"flex",justifyContent:"flex-end"},clearButton:{backgroundColor:"rgb(210,0,10)",color:"white",marginRight:"1rem","&:hover":{backgroundColor:"rgb(190,0,10)"}},billNo:{gridColumn:4},auxiliaryRow:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",margin:"2rem auto 1rem auto","& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& #date-picker-inline-label":{transform:"translate(14px, 10px) scale(1)"}}}})),ve=me.c({entrepreneur:me.c().required(),customer:me.c().required(),date:me.a().required(),orderType:me.c().required(),orderKind:me.c().required(),billNo:me.b().lessThan(2e9).positive().min(0),width:me.b().lessThan(2e9).positive().min(0).required(),height:me.b().lessThan(2e9).positive().min(0).required(),amount:me.b().lessThan(2e9).positive().min(0).required(),price:me.b().lessThan(2e9).positive().min(0).required(),fees:me.b().lessThan(2e9).positive().min(0).required(),finalSum:me.b().lessThan(2e9).positive().min(0).required(),comment:me.d().trim().max(255).required()});function fe(e){var t=e.order,r=ge(),n=o.a.useState(!1),i=Object(z.a)(n,2),d=i[0],l=i[1],s=function(){var e=null;return Object(V.b)((function(e){return c.a.put("/api/orders/",e.order)}),{onMutate:function(t){V.a.setQueryData(["orders",1],V.a.getQueryData(["orders",1]).map((function(r){return r.orderId===t.order.orderId?(e=r,t.order):r})))},onError:function(t){V.a.setQueryData(["orders",1],V.a.getQueryData(["orders",1]).map((function(t){return t.orderId===e.orderId?e:t})))},onSuccess:function(e,t){V.a.invalidateQueries(["orders"]),t.toggleModal()}})}(),u=Object(z.a)(s,2),b=u[0],m=u[1],j=function(){return l(!d)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(W,{title:t.employee.name,children:Object(a.jsx)(E.a,{className:r.link,onClick:j,children:Object(a.jsx)("b",{children:t.orderId})})}),Object(a.jsx)(Z.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.modal,open:d,onClose:j,closeAfterTransition:!0,BackdropComponent:ee.a,BackdropProps:{timeout:500},children:Object(a.jsx)(te.a,{in:d,children:Object(a.jsx)("div",{className:r.paper,children:Object(a.jsx)(oe.c,{validateOnChange:!0,validateOnMount:!1,validateOnBlur:!1,initialValues:t,onSubmit:function(e){b({order:e,toggleModal:j})},validationSchema:ve,children:function(e){var n,o=e.values,i=e.errors,d=e.validateField;return Object(a.jsxs)(oe.b,{children:[Object(a.jsxs)("div",{className:r.auxiliaryRow,children:[Object(a.jsx)(oe.a,{component:he,label:"\u0414\u0430\u0442\u0430",name:"date",error:null===i||void 0===i?void 0:i.date,validator:d,disabled:m.isLoading}),Object(a.jsxs)(re.a,{className:r.h2,component:"h2",variant:"h5",children:["\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044f \u2116 ",Object(a.jsx)("b",{children:t.orderId})]}),Object(a.jsx)(oe.a,{className:r.billNo,name:"billNo",label:"\u2116 \u0420\u0430\u0445\u0443\u043d\u043a\u0443",error:null===i||void 0===i?void 0:i.billNo,validator:d,component:de,disabled:m.isLoading})]}),Object(a.jsxs)("div",{className:"row__one",children:[Object(a.jsx)(oe.a,{name:"entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===i||void 0===i?void 0:i.entrepreneur,validator:d,component:be,disabled:m.isLoading,getName:function(e){return e.fullName||""},loading:V.a.getQuery("entrepreneurs").state.isLoading,options:V.a.getQuery("entrepreneurs").state.data}),Object(a.jsx)(oe.a,{name:"customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===i||void 0===i?void 0:i.customer,validator:d,component:be,disabled:m.isLoading,getName:function(e){return e.customerName||""},loading:V.a.getQuery("customers").state.isLoading,options:V.a.getQuery("customers").state.data}),Object(a.jsx)(oe.a,{name:"orderType",label:"\u0412\u0438\u0434",error:null===i||void 0===i?void 0:i.orderType,validator:d,component:be,disabled:m.isLoading,getName:function(e){return e.orderType||""},loading:V.a.getQuery("orderTypes").state.isLoading,options:V.a.getQuery("orderTypes").state.data}),Object(a.jsx)(oe.a,{name:"orderKind",label:"\u0422\u0438\u043f",error:null===i||void 0===i?void 0:i.orderKind,validator:d,component:be,disabled:m.isLoading,getName:function(e){return e.orderKind||""},loading:V.a.getQuery("orderTypes").state.isLoading,options:(null===(n=o.orderType)||void 0===n?void 0:n.orderKinds)||[]})]}),Object(a.jsxs)("div",{className:"row__two",children:[Object(a.jsx)(oe.a,{name:"width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===i||void 0===i?void 0:i.width,validator:d,component:de,disabled:m.isLoading}),Object(a.jsx)(oe.a,{name:"height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===i||void 0===i?void 0:i.height,validator:d,component:de,disabled:m.isLoading}),Object(a.jsx)(oe.a,{name:"amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===i||void 0===i?void 0:i.amount,validator:d,component:de,disabled:m.isLoading}),Object(a.jsx)(ae.a,{id:"metrics",size:"small",variant:"outlined",value:(o.width*o.height/1e6*o.amount).toFixed(3)||0,endAdornment:Object(a.jsx)(ne.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(a.jsx)(oe.a,{name:"price",label:"\u0426\u0456\u043d\u0430",error:null===i||void 0===i?void 0:i.price,validator:d,component:de,disabled:m.isLoading}),Object(a.jsx)(oe.a,{name:"fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===i||void 0===i?void 0:i.fees,validator:d,component:de,disabled:m.isLoading}),Object(a.jsx)(oe.a,{name:"finalSum",label:"\u0421\u0443\u043c\u0430",error:null===i||void 0===i?void 0:i.finalSum,validator:d,component:de,disabled:m.isLoading})]}),Object(a.jsx)("div",{className:"row__three",children:Object(a.jsx)(oe.a,{name:"comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===i||void 0===i?void 0:i.comment,validator:d,numeric:!1,component:de,disabled:m.isLoading})}),Object(a.jsx)("div",{className:"row__three",children:Object(a.jsx)(oe.a,{name:"payLog",label:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u043f\u043b\u0430\u0442",error:null===i||void 0===i?void 0:i.payLog,validator:d,numeric:!1,multiline:!0,component:de,readonly:!0,disabled:m.isLoading})}),Object(a.jsxs)("div",{className:r.buttons,children:[Object(a.jsx)(F.a,{className:r.clearButton,disabled:m.isLoading,variant:"contained",type:"button",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),Object(a.jsx)(F.a,{color:"primary",variant:"contained",className:r.button,disabled:m.isLoading,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]})}})})})})]})}r(386);var Oe=function(e){return window.innerWidth*e/100};var xe=[{field:"orderId",type:"number",headerName:"\u2116",width:Oe(4),renderCell:function(e){return Object(a.jsx)(fe,{order:e.row})}},{field:"billNo",type:"number",headerName:"\u0420\u0430\u0445",width:Oe(3.5)},{field:"customer",headerName:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",width:Oe(8),sortComparator:function(e,t){return r=e.customerName,a=t.customerName,r<a?-1:r>a?1:0;var r,a},valueFormatter:function(e){return e.value.customerName},renderCell:function(e){return e.value.info?Object(a.jsx)(W,{title:e.value.info,children:e.value.customerName}):Object(a.jsx)("div",{children:e.value.customerName})}},{field:"date",type:"dateTime",headerName:"\u0414\u0430\u0442\u0430",width:Oe(6)},{field:"width",type:"number",headerName:"\u0428\u0438\u0440\u0438\u043d\u0430",width:Oe(5)},{field:"height",type:"number",headerName:"\u0412\u0438\u0441\u043e\u0442\u0430",width:Oe(5)},{field:"amount",type:"number",headerName:"\u041a-\u0441\u0442\u044c",width:Oe(5)},{field:"m2",type:"number",headerName:"\u041c2",width:Oe(4)},{field:"price",type:"number",headerName:"\u0426\u0456\u043d\u0430",width:Oe(5)},{field:"fees",type:"number",headerName:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",width:Oe(5)},{field:"finalSum",type:"number",headerName:"\u0421\u0443\u043c\u0430",width:Oe(5),renderCell:function(e){return Object(a.jsxs)("b",{children:[" ",e.value," "]})}},{field:"paid",headerName:"\u041e\u043f\u043b\u0430\u0442\u0430",sortable:!1,width:Oe(5),cellClassName:"centered",renderCell:function(e){return e.row.paySum===e.row.finalSum?Object(a.jsx)(W,{title:new Date(e.row.payDate).toLocaleDateString(),arrow:!0,children:Object(a.jsx)("img",{src:"img/completed.svg",width:"19",alt:"paid"})}):e.row.paySum>0?Object(a.jsx)(W,{title:e.row.paySum+" \u0433\u0440\u043d, "+new Date(e.row.payDate).toLocaleDateString(),arrow:!0,children:Object(a.jsx)("img",{src:"img/partly_paid.svg",width:"19",alt:"partly__paid"})}):void 0}},{field:"status.ds",headerName:"\u0421\u0442\u0430\u0442\u0443\u0441",width:Oe(5),cellClassName:"centered",renderCell:function(e){return Object(a.jsx)(G,{orderId:e.row.orderId,status:e.row.status.id})}},{field:"orderType",headerName:"\u0412\u0438\u0434",width:Oe(10),valueFormatter:function(e){return e.value.orderType}},{field:"orderKind",headerName:"\u0422\u0438\u043f",width:Oe(10),valueFormatter:function(e){return e.value.orderKind}},{field:"comment",headerName:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",width:Oe(12.7)}];function ye(e){var t=function(e){return Object(V.c)(["orders",e],X,{initialData:[],initialStale:!0,staleTime:432e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}(e.tableID),r=Object(l.c)((function(e){return e.sort}));return Object(a.jsxs)(q.a,{elevation:4,className:"x-grid",children:[Object(a.jsx)("div",{className:"action__bar__stat",children:Object(a.jsxs)("label",{children:["\u0421\u0443\u043c\u0430 \u0431\u043e\u0440\u0433\u0443 : ",Object(a.jsx)("b",{children:function(){var e=t.data.reduce((function(e,t){return e+(t.finalSum-t.paySum)}),0);return r.selectedCustomer?e-r.selectedCustomer.money:e}()})," \u0433\u0440\u043d"]})}),Object(a.jsx)("div",{className:"frame",children:Object(a.jsx)("div",{className:"grid-holder",children:Object(a.jsx)(A.a,{rows:t.data,columns:xe,sortModel:[{field:"orderId",sort:"desc"}],loading:t.isLoading,rowHeight:35,headerHeight:35,pagination:!0,disableSelectionOnClick:!0})})})]})}var we=r(446);var Ne={orderId:0,billNo:0,date:"",employee:{userID:60},entrepreneur:null,customer:null,orderType:null,orderKind:null,width:"",height:"",amount:"",m2:0,price:"",fees:"",finalSum:"",paid:0,status:{id:1},comment:""},Ce=r(397),ke=r(398),Le=function(e){var t=e.label,r=e.isChecked,n=Object(U.a)(e,["label","isChecked"]),o=Object(oe.e)(n),i=Object(z.a)(o,1)[0];return Object(a.jsx)(Ce.a,{control:Object(a.jsx)(ke.a,Object(B.a)(Object(B.a)(Object(B.a)({},n),i),{},{checked:r,color:"primary"})),label:t})},Se=r(217),Te=r.n(Se),_e=(r(387),Object(D.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"55%"},button:{width:"17rem"},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"}}}))),De=me.c({order:me.c({entrepreneur:me.c().required(),customer:me.c().required(),orderType:me.c().required(),orderKind:me.c().required(),width:me.b().lessThan(2e9).positive().min(0).required(),height:me.b().lessThan(2e9).positive().min(0).required(),amount:me.b().lessThan(2e9).positive().min(0).required(),price:me.b().lessThan(2e9).positive().min(0).required(),fees:me.b().lessThan(2e9).positive().min(0).required(),finalSum:me.b().lessThan(2e9).positive().min(0).required(),comment:me.d().trim().max(255).required()})});function Ie(){var e=_e(),t=Object(V.b)((function(e){return c.a.post("/api/orders/",e.newOrder)}),{onSuccess:function(e,t){V.a.invalidateQueries("orders"),t.resetForm()}}),r=Object(z.a)(t,2),n=r[0],o=r[1];return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(oe.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{order:Ne,onAcceptance:!0,clearFields:!0,isUrgently:!1},onSubmit:function(e,t){return function(e,t){e.isUrgently&&(.15*e.order.finalSum<10?e.order.finalSum=+e.order.finalSum+10:e.order.finalSum=Math.ceil(1.15*e.order.finalSum),e.order.comment="(\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e) "+e.order.comment),e.onAcceptance?e.order.status.id=1:e.order.status.id=2,n({newOrder:e.order,resetForm:t})}(e,t.resetForm)},validationSchema:De,children:function(t){var r,n,i,d,l,s,c,u,b,m,j,p,h=t.values,g=t.errors,v=t.validateField,f=t.handleReset;return Object(a.jsxs)(oe.b,{children:[Object(a.jsxs)("div",{className:"row__one",children:[Object(a.jsx)(oe.a,{name:"order.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===g||void 0===g||null===(r=g.order)||void 0===r?void 0:r.entrepreneur,validator:v,component:be,disabled:o.isLoading,getName:function(e){return e.fullName||""},loading:V.a.getQuery("entrepreneurs").state.isLoading,options:V.a.getQuery("entrepreneurs").state.data||[]}),Object(a.jsx)(oe.a,{name:"order.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===g||void 0===g||null===(n=g.order)||void 0===n?void 0:n.customer,validator:v,component:be,disabled:o.isLoading,sortKey:"selectedCustomer",getName:function(e){return e.customerName||""},loading:V.a.getQuery("customers").state.isLoading,options:V.a.getQuery("customers").state.data||[]}),Object(a.jsx)(oe.a,{name:"order.orderType",label:"\u0412\u0438\u0434",error:null===g||void 0===g||null===(i=g.order)||void 0===i?void 0:i.orderType,validator:v,component:be,disabled:o.isLoading,getName:function(e){return e.orderType||""},loading:V.a.getQuery("orderTypes").state.isLoading,options:V.a.getQuery("orderTypes").state.data||[]}),Object(a.jsx)(oe.a,{name:"order.orderKind",label:"\u0422\u0438\u043f",error:null===g||void 0===g||null===(d=g.order)||void 0===d?void 0:d.orderKind,validator:v,component:be,disabled:o.isLoading,getName:function(e){return e.orderKind||""},loading:V.a.getQuery("orderTypes").state.isLoading,options:(null===(l=h.order.orderType)||void 0===l?void 0:l.orderKinds)||[]})]}),Object(a.jsxs)("div",{className:"row__two",children:[Object(a.jsx)(oe.a,{name:"order.width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===g||void 0===g||null===(s=g.order)||void 0===s?void 0:s.width,validator:v,component:de,disabled:o.isLoading}),Object(a.jsx)(oe.a,{name:"order.height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===g||void 0===g||null===(c=g.order)||void 0===c?void 0:c.height,validator:v,component:de,disabled:o.isLoading}),Object(a.jsx)(oe.a,{name:"order.amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===g||void 0===g||null===(u=g.order)||void 0===u?void 0:u.amount,validator:v,component:de,disabled:o.isLoading}),Object(a.jsx)(ae.a,{id:"metrics",size:"small",variant:"outlined",value:(h.order.width*h.order.height/1e6*h.order.amount).toFixed(3)||0,endAdornment:Object(a.jsx)(ne.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(a.jsx)(oe.a,{name:"order.price",label:"\u0426\u0456\u043d\u0430",error:null===g||void 0===g||null===(b=g.order)||void 0===b?void 0:b.price,validator:v,component:de,disabled:o.isLoading}),Object(a.jsx)(oe.a,{name:"order.fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===g||void 0===g||null===(m=g.order)||void 0===m?void 0:m.fees,validator:v,component:de,disabled:o.isLoading}),Object(a.jsx)(oe.a,{name:"order.finalSum",label:"\u0421\u0443\u043c\u0430",error:null===g||void 0===g||null===(j=g.order)||void 0===j?void 0:j.finalSum,validator:v,component:de,disabled:o.isLoading})]}),Object(a.jsx)("div",{className:"row__three",children:Object(a.jsx)(oe.a,{name:"order.comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===g||void 0===g||null===(p=g.order)||void 0===p?void 0:p.comment,validator:v,numeric:!1,component:de,disabled:o.isLoading})}),Object(a.jsxs)("div",{className:"row__four",children:[Object(a.jsxs)("div",{className:"controls",children:[Object(a.jsx)(Le,{name:"onAcceptance",isChecked:h.onAcceptance,label:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456",disabled:o.isLoading}),Object(a.jsx)(Le,{name:"clearFields",isChecked:h.clearFields,label:"\u041e\u0447\u0438\u0449\u0430\u0442\u0438 \u043f\u043e\u043b\u044f",disabled:o.isLoading}),Object(a.jsx)(Le,{name:"isUrgently",isChecked:h.isUrgently,label:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e",disabled:o.isLoading})]}),Object(a.jsx)(F.a,{color:"primary",variant:"contained",className:e.button,disabled:o.isLoading,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(a.jsx)(F.a,{className:e.clear,onClick:function(e){return function(e,t){V.a.invalidateQueries(["orders",1]),t(e)}(e,f)},disabled:o.isLoading,variant:"contained",type:"button",children:Object(a.jsx)(Te.a,{})})]})]})}})})}var Qe=function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/api/customers/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/api/entrepreneurs/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/api/order-types/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/api/orders/status/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Ke={selectedCustomer:null,selectedStatus:null,selectedDateFrom:null,selectedDateTill:null,selectedKind:null,selectedType:null,selectedEmployee:null,selectedDetails:""};r(389);var Re=Object(D.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"55%"},button:{width:"16rem"},clear:{width:"60%",justifySelf:"flex-end",margin:"4px 0px"}}})),Ae=me.c({sort:me.c({selectedCustomer:me.c().nullable(),selectedStatus:me.c().nullable(),selectedDateFrom:me.a().nullable(),selectedDateTill:me.a().nullable(),selectedKind:me.c().nullable(),selectedType:me.c().nullable(),selectedDetails:me.d().trim().max(255).nullable()})});var Be=function(){var e=Re(),t=Object(l.c)((function(e){return e.auth})),r=Object(V.b)((function(e){return c.a.post("/api/sort/",e)}),{onSuccess:function(e){V.a.setQueryData(["orders",1],Y(e.data))}}),n=Object(z.a)(r,2),o=n[0],i=n[1];return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(oe.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{sort:Ke,showUserOrders:!1},onSubmit:function(e){e.showUserOrders?e.sort.selectedEmployee=t.loggedUser:e.sort.selectedEmployee=null,o(e.sort)},validationSchema:Ae,children:function(t){var r,n=t.values,d=t.errors,l=t.handleReset,s=t.validateField;return Object(a.jsxs)(oe.b,{children:[Object(a.jsxs)("div",{className:"sort__row__one",children:[Object(a.jsx)(oe.a,{name:"sort.selectedCustomer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===d||void 0===d?void 0:d.customer,component:be,validator:s,disabled:i.isLoading,getName:function(e){return e.customerName||""},options:V.a.getQuery("customers").state.data||[],loading:V.a.getQuery("customers").state.isLoading}),Object(a.jsx)(oe.a,{name:"sort.selectedType",label:"\u0412\u0438\u0434",error:null===d||void 0===d?void 0:d.orderType,component:be,validator:s,disabled:i.isLoading,getName:function(e){return e.orderType||""},options:V.a.getQuery("orderTypes").state.data||[],loading:V.a.getQuery("orderTypes").state.isLoading}),Object(a.jsx)(oe.a,{name:"sort.selectedKind",label:"\u0422\u0438\u043f",error:null===d||void 0===d?void 0:d.orderKind,component:be,validator:s,disabled:i.isLoading,getName:function(e){return e.orderKind||""},loading:V.a.getQuery("orderTypes").state.isLoading,options:(null===(r=n.sort.selectedType)||void 0===r?void 0:r.orderKinds)||[]})]}),Object(a.jsxs)("div",{className:"sort__row__two",children:[Object(a.jsxs)("div",{className:"datepickers",children:[Object(a.jsx)(oe.a,{component:he,label:"\u0412\u0456\u0434",name:"sort.selectedDateFrom",disabled:i.isLoading}),Object(a.jsx)(oe.a,{component:he,label:"\u0414\u043e",name:"sort.selectedDateTill",disabled:i.isLoading})]}),Object(a.jsx)(oe.a,{name:"sort.selectedStatus",label:"\u0421\u0442\u0430\u0442\u0443\u0441",error:null===d||void 0===d?void 0:d.selectedStatus,component:be,validator:s,disabled:i.isLoading,getName:function(e){return e.name||""},options:V.a.getQuery("statuses").state.data||[],loading:V.a.getQuery("statuses").state.isLoading}),Object(a.jsx)(oe.a,{name:"sort.selectedDetails",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===d||void 0===d?void 0:d.selectedDetails,numeric:!1,disabled:i.isLoading,component:de,validator:s})]}),Object(a.jsxs)("div",{className:"sort__row__three",children:[Object(a.jsx)(Le,{name:"showUserOrders",disabled:i.isLoading,isChecked:n.showUserOrders,label:"\u041b\u0438\u0448\u0435 \u043c\u043e\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(a.jsx)(F.a,{color:"primary",variant:"contained",disabled:i.isLoading,className:e.button,type:"submit",children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u0442\u0438"}),Object(a.jsx)(F.a,{className:e.clear,onClick:function(e){return function(e,t){o({}),t(e)}(e,l)},disabled:i.isLoading,variant:"contained",type:"button",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0438 \u0432\u0441\u0435"})]})]})}})})};r(390);function Ue(){var e=Object(n.useState)(0),t=Object(z.a)(e,2),r=t[0],o=t[1],i=function(e){return o(r===e?0:e)};return Object(V.c)("customers",Qe),Object(V.c)("entrepreneurs",Fe),Object(V.c)("orderTypes",qe),Object(V.c)("statuses",Ee),Object(a.jsx)(q.a,{elevation:2,children:Object(a.jsxs)("div",{className:"action_bar_container",children:[Object(a.jsx)("div",{className:"action__bar",children:Object(a.jsxs)("div",{className:"action__bar__button",children:[Object(a.jsx)(F.a,{variant:"contained",color:"primary",onClick:function(){return i(1)},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(a.jsx)(F.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",onClick:function(){return i(2)},children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u043d\u043d\u044f"})]})}),Object(a.jsx)(we.a,{in:1===r,timeout:"auto",children:Object(a.jsx)(Ie,{})}),Object(a.jsx)(we.a,{in:2===r,timeout:"auto",children:Object(a.jsx)(Be,{})})]})})}var Me=r(457),Pe=r(448),We=r(449),ze=r(452),He=r(218),Ve=r.n(He),Je=r(447);function $e(){return Object(a.jsxs)(re.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(E.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"}),(new Date).getFullYear(),"."]})}var Ge=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ye(){var e=Ge(),t=Object(_.g)(),r=Object(l.b)(),o=Object(n.useState)({username:"",password:""}),i=Object(z.a)(o,2),d=i[0],s=i[1];return Object(a.jsxs)(Je.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(Pe.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(Me.a,{className:e.avatar,children:Object(a.jsx)(Ve.a,{})}),Object(a.jsx)(re.a,{component:"h1",variant:"h5",children:"\u0412\u0445\u0456\u0434"}),Object(a.jsxs)("form",{className:e.form,onSubmit:function(e){e.preventDefault(),h(d).then((function(e){r(p(e.accessToken,e.employee)),t.push("/")}))},children:[Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return s(Object(B.a)(Object(B.a)({},d),{},{username:e.target.value}))},label:"\u041b\u043e\u0433\u0456\u043d",name:"email",autoComplete:"off",autoFocus:!0}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",onChange:function(e){return s(Object(B.a)(Object(B.a)({},d),{},{password:e.target.value}))},autoComplete:"off"}),Object(a.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"\u0412\u0445\u0456\u0434"}),Object(a.jsxs)(We.a,{container:!0,children:[Object(a.jsx)(We.a,{item:!0,xs:!0,children:Object(a.jsx)(E.a,{href:"#",variant:"body2",children:"\u0417\u0430\u0431\u0443\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),Object(a.jsx)(We.a,{item:!0,children:Object(a.jsx)(E.a,{href:"#",variant:"body2",children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c"})})]})]})]}),Object(a.jsx)(ze.a,{mt:8,children:Object(a.jsx)($e,{})})]})}var Xe=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(T.a,{children:Object(a.jsxs)(_.d,{children:[Object(a.jsx)(_.b,{path:"/login",children:Object(a.jsx)(Ye,{})}),Object(a.jsxs)(_.b,{exact:!0,path:"/",children:[Object(a.jsx)(R,{}),Object(a.jsx)(Ue,{}),Object(a.jsx)(ye,{tableID:1})]}),Object(a.jsxs)(_.b,{path:"/sort",children:[Object(a.jsx)(R,{}),Object(a.jsx)(ye,{tableID:2})]})]})})})},Ze=r(219),et=function(e){var t=e.component,r=Object(U.a)(e,["component"]),n=Object(l.c)((function(e){return e.auth})),o=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("loggedUser"));return Object(a.jsx)(_.b,Object(B.a)(Object(B.a)({},r),{},{render:function(e){return n.isAuthenticated?Object(a.jsx)(t,Object(B.a)({},e)):o?(w.dispatch(p(o,i)),Object(a.jsx)(t,Object(B.a)({},e))):Object(a.jsx)(_.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};r(391);var tt=function(){return Object(a.jsx)(q.a,{elevation:3,className:"blue-holder",children:Object(a.jsxs)(q.a,{elevation:3,className:"info",children:[Object(a.jsxs)("div",{className:"blank-page",children:[Object(a.jsx)(re.a,{variant:"h4",component:"h3",children:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0430"})," ",Object(a.jsx)(re.a,{variant:"h2",component:"h3",children:"404"})]}),Object(a.jsx)(ze.a,{mt:8,children:Object(a.jsxs)(re.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(E.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"})," ",(new Date).getFullYear(),"."]})})]})})},rt=r(220),at=Object(N.a)({palette:{primary:{light:"#fff",main:"rgba(0, 60, 170, 0.95)",dark:"rgba(0, 40, 170, 0.95)"},secondary:{main:"#f44336"}},typography:{useNextVariants:!0,fontSize:11,htmlFontSize:15}},Ze.ukUA);d.a.render(Object(a.jsxs)(C.a,{theme:at,children:[Object(a.jsx)(k.a,{utils:S.a,locale:L.a,children:Object(a.jsx)(l.a,{store:w,children:Object(a.jsx)(T.a,{children:Object(a.jsxs)(_.d,{children:[Object(a.jsx)(_.b,{path:"/login",component:Ye}),Object(a.jsx)(et,{exact:!0,path:"/",component:Xe}),Object(a.jsx)(_.b,{path:"*",component:tt})]})})})}),Object(a.jsx)(rt.ReactQueryDevtools,{})]}),document.getElementById("root"))}},[[392,1,2]]]);
//# sourceMappingURL=main.38a7eeea.chunk.js.map