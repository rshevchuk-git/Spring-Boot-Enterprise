(this["webpackJsonpb1.0"]=this["webpackJsonpb1.0"]||[]).push([[0],{25:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"f",(function(){return a})),r.d(t,"i",(function(){return o})),r.d(t,"j",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"l",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"m",(function(){return d})),r.d(t,"o",(function(){return u})),r.d(t,"n",(function(){return m})),r.d(t,"a",(function(){return b})),r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return j})),r.d(t,"k",(function(){return v})),r.d(t,"e",(function(){return f}));var n="ADD_ORDER",a="LOAD_ORDERS",o="SET_AUTHENTICATED",i="SET_UNAUTHENTICATED",s="SELECT_CUSTOMER",c="UNSELECT_CUSTOMER",l="SET_ACTIVE_SORTING",d="UPDATE_MAIN_SORTING",u="UPDATE_SORT_SORTING",m="UPDATE_PAYMENT_SORTING",b="ADD_MAIN_SORTING",p="ADD_SORT_SORTING",j="ADD_PAYMENT_SORTING",v="SHOW_CUSTOMER_MODAL",f="CLOSE_CUSTOMER_MODAL"},281:function(e,t,r){},380:function(e,t,r){},400:function(e,t,r){"use strict";r.r(t);var n=r(28),a=r(9),o=r(25),i={mainPageOrderList:[],sortPageOrderList:[],isLoading:!0};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.b:return Object(a.a)(Object(a.a)({},e),{},{mainPageOrderList:[].concat(Object(n.a)(e.mainPageOrderList),[t.payload]),sortPageOrderList:[].concat(Object(n.a)(e.sortPageOrderList),[t.payload])});case o.f:return t.payload?Object(a.a)(Object(a.a)({},e),{},{mainPageOrderList:t.payload,sortPageOrderList:t.payload,isLoading:!1}):e;default:return e}}},402:function(e,t,r){},403:function(e,t,r){},406:function(e,t,r){},407:function(e,t,r){},411:function(e,t,r){},412:function(e,t,r){},413:function(e,t,r){},414:function(e,t,r){"use strict";r.r(t);var n=r(33),a=r(9),o=r(2),i=r(238),s=r(484),c=r(239),l=r(485),d=r(237),u=r(48),m=r(488),b=r(0),p=r.n(b),j=r(27),v=r.n(j),f=r(240),O=r(493),h=r(101),g=r(224),x=r(32),y=r(93),w=r(39),S=r(10),C=r(121),N=r(120),k=r(123),I=r(475),T=r(474),L=(r(281),r(468)),_=r(425),D=r(122),E=r(466),R=r(467),F=r(469),P=r(102),M=r.n(P),A=r(12),Q=r(15),z=(r(380),r(50)),B=r(5),K=r(241),U=r(489),q=r(152),G=r(25),W=function(e,t,r,n){return{type:G.i,payload:{token:e,employee:t,username:r,roles:n}}},H=function(e){return{type:G.h,payload:e}},V=function(e,t){var r;switch(t){case"main":r=G.m;break;case"sort":r=G.o;break;case"payment":r=G.n}return{type:r,payload:e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:G.k,payload:e}},$=function(){return{type:G.e}};var Y=function(e,t,r){e.price>=0?t.shrink||r({shrink:!0}):t.shrink&&r({shrink:!1})},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){return 0===e.orderId?(e.id=t,e.customerId=t):e.id=e.customerId,e}))},Z=function(e){return e.m2>0?Math.ceil(+e.m2*e.price+ +e.fees):Math.ceil(e.price*e.amount+ +e.fees)},ee=Object(B.a)({inputRoot:{'&&[class*="MuiOutlinedInput-root"] $input':{padding:2},'&&[class*="MuiOutlinedInput-root"]':{paddingRight:"40px!important"}},input:{}})(U.a);var te=function(e){var t=e.label,r=e.getName,n=e.sortKey,i=e.error,s=e.validator,c=e.kindNameSetter,l=void 0!==c&&c,d=e.typeNameSetter,u=void 0!==d&&d,m=e.setEntrepreneur,b=void 0!==m&&m,p=e.setDimensions,j=void 0!==p&&p,v=e.setPrice,f=void 0!==v&&v,O=e.action,g=void 0!==O&&O,y=e.sortPage,w=void 0===y?"":y,S=(e.textFieldProps,Object(z.a)(e,["label","getName","sortKey","error","validator","kindNameSetter","typeNameSetter","setEntrepreneur","setDimensions","setPrice","action","sortPage","textFieldProps"])),C=S.form.setFieldValue,N=Object(A.f)().values.order,k=Object(q.a)(S),I=Object.assign({},k),T=I.name,L=Object(x.b)(),_=Object(h.b)();return Object(o.jsx)(ee,Object(a.a)(Object(a.a)({},S),{},{size:"small",error:"",value:I.value,autoHighlight:!0,getOptionLabel:r,onKeyPress:function(e){"="!==e.key&&"+"!==e.key||(e.preventDefault(),g&&g())},onChange:function(e,t){if(n){var r={};r[n]=t,L(function(e,t){var r;switch(t){case"main":r=G.a;break;case"sort":r=G.d;break;case"payment":r=G.c}return{type:r,payload:e}}(r,w))}if(b){var o,i=(null===(o=_.getQueryData("ce-links").find((function(e){return e.customer.customerId===(null===t||void 0===t?void 0:t.customerId)})))||void 0===o?void 0:o.entrepreneur)||null;C("order.entrepreneur",i)}if(C(T,t),f){var c,l,d,u,m;if(!t)return;if(t.customerId)l=t.customerId,d=null===(u=N.orderKind)||void 0===u?void 0:u.kindId;else l=null===(m=N.customer)||void 0===m?void 0:m.customerId,d=t.kindId;if(!l||!d)return;var p=(null===(c=_.getQueryData("cp-links").find((function(e){var t,r;return(null===(t=e.customer)||void 0===t?void 0:t.customerId)===l&&(null===(r=e.orderKind)||void 0===r?void 0:r.kindId)===d})))||void 0===c?void 0:c.price)||0;C("order.price",p);var v=Z(Object(a.a)(Object(a.a)({},N),{},{price:p}));v&&C("order.finalSum",v)}j&&t&&t.width&&t.height&&(C("order.width",t.width),C("order.height",t.height)),s(T)},renderInput:function(e){return Object(o.jsx)(K.a,Object(a.a)(Object(a.a)({},e),{},{error:!!i,onChange:function(e){u?u(e.target.value):l&&l(e.target.value)},label:t,variant:"outlined"}))}}))},re=r(19),ne=r.n(re),ae=r(35),oe=r.n(ae),ie=r(52),se=function(){var e=Object(ie.a)(oe.a.mark((function e(t){var r,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.post("/api/auth/signin",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){Oe.dispatch({type:G.j})},le={isAuthenticated:!1,loggedUser:null,roles:[]};var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.i:return localStorage.setItem("token",t.payload.token),localStorage.setItem("username",t.payload.username),localStorage.setItem("roles",t.payload.roles),localStorage.setItem("loggedUser",JSON.stringify(t.payload.employee)),ne.a.defaults.headers.common.Authorization="Bearer ".concat(t.payload.token),ne.a.interceptors.response.use((function(e){return e}),(function(e){var t;throw 401===(null===(t=e.response)||void 0===t?void 0:t.status)?ce():console.error(e),e})),{isAuthenticated:!0,loggedUser:t.payload.employee,roles:t.payload.roles};case G.j:return localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),localStorage.removeItem("loggedUser"),{isAuthenticated:!1,loggedUser:null};default:return e}},ue={customer:null,status:null,dateFrom:null,dateTill:null,orderKind:null,orderType:null,employee:null,details:""},me={active:"main",main:ue,sort:ue,payment:ue};var be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.h:return Object(a.a)(Object(a.a)({},e),{},{active:t.payload});case G.a:return Object(a.a)(Object(a.a)({},e),{},{main:Object(a.a)(Object(a.a)({},e.main),t.payload)});case G.d:return Object(a.a)(Object(a.a)({},e),{},{sort:Object(a.a)(Object(a.a)({},e.sort),t.payload)});case G.c:return Object(a.a)(Object(a.a)({},e),{},{payment:Object(a.a)(Object(a.a)({},e.payment),t.payload)});case G.m:return Object(a.a)(Object(a.a)({},e),{},{main:t.payload});case G.o:return Object(a.a)(Object(a.a)({},e),{},{sort:t.payload});case G.n:return Object(a.a)(Object(a.a)({},e),{},{payment:t.payload});default:return e}},pe={customerId:0,customerName:"",customerGroup:"",money:0,payLog:"",debtor:!1,city:"",info:"",firstPerson:"",firstPhone:"",firstEmail:"",secondPerson:"",secondPhone:"",secondEmail:"",thirdPerson:"",thirdPhone:"",thirdEmail:""},je={show:!1,customer:pe};var ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.k:return{show:!0,customer:t.payload};case G.e:return{show:!1,customer:{}};default:return e}},fe=r(173),Oe=(0,fe.createStore)((0,fe.combineReducers)({auth:de,orders:r(400).default,sortSelections:be,showCustomerModal:ve})),he=r(497);var ge=r(495),xe=r(491);var ye=function(e){var t=e.open,r=e.onClose,n=e.message;return"success"===e.type?Object(o.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:r,children:Object(o.jsx)(xe.a,{onClose:r,variant:"filled",severity:"success",children:n})}):Object(o.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:r,children:Object(o.jsx)(xe.a,{onClose:r,variant:"filled",severity:"error",children:n})})},we=function(e){var t=e.label,r=e.field,n=e.error,i=e.readonly,s=void 0!==i&&i,c=e.validator,l=e.disableCalculation,d=void 0!==l&&l,u=e.numeric,m=void 0===u||u,b=e.phone,p=void 0!==b&&b,j=Object(z.a)(e,["label","field","error","readonly","validator","disableCalculation","numeric","phone"]),v=j.form.setFieldValue,f=Object(A.f)().values,O=r.onChange,h=r.name;return Object(o.jsx)(K.a,Object(a.a)(Object(a.a)(Object(a.a)({},j),r),{},{error:!!n,size:"small",variant:"outlined",autoComplete:"off",label:t,InputProps:{readOnly:s},onChange:function(e){m||O(e),(e.target.value.match(/^\d*\.?\d*$/)||0===e.target.value.length)&&O(e),c(h)},onKeyUp:function(e){if(m&&!p&&f.order&&!d){var t;(t=f.order).m2=(t.width*t.height/1e6*t.amount).toFixed(3)||0;var r=Z(f.order);r&&v("order.finalSum",r)}}}))},Se={kindId:0,typeId:0,kindName:"",width:0,height:0},Ce={orderId:0,billNo:0,date:"",employee:{userID:60},entrepreneur:null,customer:null,orderType:null,orderKind:null,width:0,height:0,amount:0,m2:0,price:0,fees:0,finalSum:0,paySum:0,status:{id:1},comment:""},Ne={typeId:0,typeName:""},ke=r(420),Ie=r(419),Te=function(e){var t=e.label,r=e.isChecked,n=Object(z.a)(e,["label","isChecked"]),i=Object(A.e)(n),s=Object(S.a)(i,1)[0];return Object(o.jsx)(ke.a,{control:Object(o.jsx)(Ie.a,Object(a.a)(Object(a.a)(Object(a.a)({},n),s),{},{checked:r,color:"primary"})),label:t})},Le=Object(D.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},lock:{padding:0,width:"5px",backgroundColor:"white !important",minWidth:0,"&:hover":{backgroundColor:"white"}},svg:{fill:"rgba(0, 0, 0, 0.23)","&:hover":{fill:"black"}},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"}}})),_e=Q.c({order:Q.c({entrepreneur:Q.c().required(),customer:Q.c().required(),orderType:Q.c().required(),orderKind:Q.c().required(),width:Q.b().lessThan(2e9).positive().min(0).required(),height:Q.b().lessThan(2e9).positive().min(0).required(),amount:Q.b().lessThan(2e9).positive().min(0).required(),price:Q.b().lessThan(2e9).positive().min(0).required(),fees:Q.b().lessThan(2e9).positive().min(0).required(),finalSum:Q.b().lessThan(2e9).positive().min(0).required(),comment:Q.d().trim().max(255).required()})});function De(){var e=Le(),t=Object(x.b)(),r=Object(h.b)(),n=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.post("/api/orders/",e.newOrder)}),{onSuccess:function(t,r){r.setStatus({success:!0,error:!1}),e.invalidateQueries(["customers"]),Oe.dispatch(V(Object(a.a)({},ue),"main")),r.resetForm()},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),i=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.get("/api/ce-links/"+e.customerId+"/"+e.entrepreneurId)}),{onSuccess:function(t,r){e.invalidateQueries("ce-links"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),s=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.get("/api/cp-links/"+e.customerId+"/"+e.orderKindId+"/"+e.price)}),{onSuccess:function(t,r){e.invalidateQueries("cp-links"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),c=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.post("/api/order-kinds/",e.orderKind)}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(t,r){r.orderType.orderKinds.push(t.data),e.invalidateQueries(["orderTypes"]),r.setStatus({success:!0,error:!1})}})}(),l=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.post("/api/order-types/",e.orderType)}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(t,r){e.invalidateQueries(["orderTypes"]),r.setStatus({success:!0,error:!1})}})}(),d=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.put("/api/order-kinds/",e.orderKind)}),{onSuccess:function(t,r){e.invalidateQueries("orderTypes"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),u=Object(b.useState)({}),m=Object(S.a)(u,2),p=m[0],j=m[1],v=Object(b.useState)({success:!1,error:!1}),f=Object(S.a)(v,2),O=f[0],g=f[1],y=Object(b.useState)({success:!1,error:!1}),w=Object(S.a)(y,2),C=w[0],N=w[1],I=Object(b.useState)({success:!1,error:!1}),T=Object(S.a)(I,2),D=T[0],P=T[1],Q=Object(b.useState)({success:!1,error:!1}),z=Object(S.a)(Q,2),B=z[0],K=z[1],U=Object(b.useState)({success:!1,error:!1}),q=Object(S.a)(U,2),G=q[0],W=q[1],H=Object(b.useState)({success:!1,error:!1}),$=Object(S.a)(H,2),X=$[0],Z=$[1],ee=Object(b.useState)(""),re=Object(S.a)(ee,2),ae=re[0],oe=re[1],ie=Object(b.useState)(""),se=Object(S.a)(ie,2),ce=se[0],le=se[1],de=function(){g({success:!1,error:!1}),N({success:!1,error:!1}),P({success:!1,error:!1}),K({success:!1,error:!1}),Z({success:!1,error:!1}),W({success:!1,error:!1})},me=function(){t(J(Object(a.a)({},pe)))},be=function(){0!==ce.trim().length?l.mutate({orderType:Object(a.a)(Object(a.a)({},Ne),{},{typeName:ce}),setStatus:W}):W({success:!1,error:!0})},je=function(e,t,a){var o,i;o=e.isUrgently,i=e.order,o&&(.15*i.finalSum<10?i.finalSum=+i.finalSum+10:i.finalSum=Math.ceil(1.15*i.finalSum),i.comment="(\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e) "+i.comment),function(e,t){t.status=e?r.getQueryData("statuses").find((function(e){return 1===e.id})):r.getQueryData("statuses").find((function(e){return 2===e.id}))}(e.onAcceptance,e.order),n.mutate({newOrder:e.order,resetForm:e.clearFields?t:function(){return ve(e.order,a)},setStatus:g})},ve=function(e,t){var n;t("order.width",e.orderKind.width),t("order.height",e.orderKind.height),t("order.amount",0),t("order.price",(null===(n=r.getQueryData("cp-links").find((function(t){var r,n;return(null===(r=t.customer)||void 0===r?void 0:r.customerId)===e.customer.customerId&&(null===(n=t.orderKind)||void 0===n?void 0:n.kindId)===e.orderKind.kindId})))||void 0===n?void 0:n.price)||0),t("order.fees",0),t("order.finalSum",0),t("order.comment","")};return Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)(A.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{order:Object(a.a)(Object(a.a)({},Ce),{},{employee:JSON.parse(localStorage.getItem("loggedUser"))}),onAcceptance:!1,clearFields:!0,isUrgently:!1},onSubmit:function(e,t){var r=t.resetForm,n=t.setFieldValue;return je(e,r,n)},validationSchema:_e,children:function(t){var l,u,m,b,v,f,O,h,g,x,y,w,S=t.values,C=t.errors,I=t.validateField,T=t.handleReset;return Object(o.jsxs)(A.b,{children:[Y(S.order,p,j),Object(o.jsxs)("div",{className:"row__one",children:[Object(o.jsx)(A.a,{name:"order.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===C||void 0===C||null===(l=C.order)||void 0===l?void 0:l.entrepreneur,validator:I,component:te,disabled:n.isFetching,getName:function(e){return e.fullName||""},options:r.getQueryData("entrepreneurs")||[]}),Object(o.jsx)(k.a,{tabIndex:-1,className:e.lock,disableRipple:!0,onClick:function(){return e=S.order.customer,t=S.order.entrepreneur,void(e&&t?i.mutate({customerId:e.customerId,entrepreneurId:t.entrepreneurId,setStatus:N}):N({success:!1,error:!0}));var e,t},children:Object(o.jsx)(E.a,{className:e.svg})}),Object(o.jsx)(A.a,{name:"order.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===C||void 0===C||null===(u=C.order)||void 0===u?void 0:u.customer,validator:I,component:te,setEntrepreneur:!0,setPrice:!0,sortKey:"customer",sortPage:"main",action:me,disabled:n.isFetching,getName:function(e){return e.customerName||""},options:r.getQueryData("customers")||[]}),Object(o.jsx)(A.a,{name:"order.orderType",label:"\u0412\u0438\u0434",error:null===C||void 0===C||null===(m=C.order)||void 0===m?void 0:m.orderType,validator:I,component:te,typeNameSetter:le,action:be,disabled:n.isFetching,getName:function(e){return e.typeName||""},options:r.getQueryData("orderTypes")||[]}),Object(o.jsx)(A.a,{name:"order.orderKind",label:"\u0422\u0438\u043f",error:null===C||void 0===C||null===(b=C.order)||void 0===b?void 0:b.orderKind,validator:I,component:te,setPrice:!0,setDimensions:!0,action:function(){return e=S.order.orderType,void(0!==ae.trim().length&&e?c.mutate({orderType:e,orderKind:Object(a.a)(Object(a.a)({},Se),{},{typeId:e.typeId,kindName:ae}),setStatus:Z}):Z({success:!1,error:!0}));var e},kindNameSetter:oe,disabled:n.isFetching,getName:function(e){return e.kindName||""},options:(null===(v=S.order.orderType)||void 0===v?void 0:v.orderKinds)||[]})]}),Object(o.jsxs)("div",{className:"row__two",children:[Object(o.jsx)(A.a,{name:"order.width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===C||void 0===C||null===(f=C.order)||void 0===f?void 0:f.width,validator:I,component:we,disabled:n.isFetching}),Object(o.jsx)(k.a,{tabIndex:-1,className:e.lock,disableRipple:!0,onClick:function(){return e=S.order.orderKind,t=S.order.width,r=S.order.height,void(e&&t&&r?(e.width=t,e.height=r,d.mutate({orderKind:e,setStatus:P})):P({success:!1,error:!0}));var e,t,r},children:Object(o.jsx)(R.a,{className:e.svg})}),Object(o.jsx)(A.a,{name:"order.height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===C||void 0===C||null===(O=C.order)||void 0===O?void 0:O.height,validator:I,component:we,disabled:n.isFetching}),Object(o.jsx)(A.a,{name:"order.amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===C||void 0===C||null===(h=C.order)||void 0===h?void 0:h.amount,validator:I,component:we,disabled:n.isFetching}),Object(o.jsx)(_.a,{id:"outlined",size:"small",variant:"outlined",value:(S.order.width*S.order.height/1e6*S.order.amount).toFixed(3)||0,endAdornment:Object(o.jsx)(L.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(o.jsx)(A.a,{name:"order.price",label:"\u0426\u0456\u043d\u0430",error:null===C||void 0===C||null===(g=C.order)||void 0===g?void 0:g.price,validator:I,InputLabelProps:p,component:we,disabled:n.isFetching}),Object(o.jsx)(k.a,{tabIndex:-1,className:e.lock,disableRipple:!0,onClick:function(){return e=S.order.customer,t=S.order.orderKind,r=S.order.price,void(e&&t&&r?s.mutate({customerId:e.customerId,orderKindId:t.kindId,price:r,setStatus:K}):K({success:!1,error:!0}));var e,t,r},children:Object(o.jsx)(F.a,{className:e.svg})}),Object(o.jsx)(A.a,{name:"order.fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===C||void 0===C||null===(x=C.order)||void 0===x?void 0:x.fees,validator:I,component:we,disabled:n.isFetching}),Object(o.jsx)(A.a,{name:"order.finalSum",label:"\u0421\u0443\u043c\u0430",error:null===C||void 0===C||null===(y=C.order)||void 0===y?void 0:y.finalSum,validator:I,component:we,disableCalculation:!0,disabled:n.isFetching})]}),Object(o.jsx)("div",{className:"row__three",children:Object(o.jsx)(A.a,{name:"order.comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===C||void 0===C||null===(w=C.order)||void 0===w?void 0:w.comment,validator:I,numeric:!1,component:we,disabled:n.isFetching})}),Object(o.jsxs)("div",{className:"row__four",children:[Object(o.jsxs)("div",{className:"controls",children:[Object(o.jsx)(Te,{name:"onAcceptance",isChecked:S.onAcceptance,label:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456",disabled:n.isFetching}),Object(o.jsx)(Te,{name:"clearFields",isChecked:S.clearFields,label:"\u041e\u0447\u0438\u0449\u0430\u0442\u0438 \u043f\u043e\u043b\u044f",disabled:n.isFetching}),Object(o.jsx)(Te,{name:"isUrgently",isChecked:S.isUrgently,label:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e",disabled:n.isFetching})]}),Object(o.jsx)(k.a,{color:"primary",variant:"contained",disabled:n.isFetching,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(o.jsx)(k.a,{className:e.clear,onClick:function(e){return function(e,t){Oe.dispatch(V(Object(a.a)({},ue),"main")),t(e)}(e,T)},disabled:n.isFetching,variant:"contained",type:"button",children:Object(o.jsx)(M.a,{})})]})]})}}),Object(o.jsx)(ye,{type:"success",open:O.success,onClose:de,message:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e."}),Object(o.jsx)(ye,{type:"error",open:O.error,onClose:de,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f."}),Object(o.jsx)(ye,{type:"success",open:C.success,onClose:de,message:"\u0417\u0432'\u044f\u0437\u043e\u043a \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(o.jsx)(ye,{type:"error",open:C.error,onClose:de,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0432'\u044f\u0437\u043a\u0443."}),Object(o.jsx)(ye,{type:"success",open:D.success,onClose:de,message:"\u0420\u043e\u0437\u043c\u0456\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(o.jsx)(ye,{type:"error",open:D.error,onClose:de,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0440\u043e\u0437\u043c\u0456\u0440\u0456\u0432."}),Object(o.jsx)(ye,{type:"success",open:B.success,onClose:de,message:"\u0426\u0456\u043d\u0430 \u043f\u0440\u0438\u0432'\u044f\u0437\u0430\u043d\u0430."}),Object(o.jsx)(ye,{type:"error",open:B.error,onClose:de,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0446\u0456\u043d\u0438."}),Object(o.jsx)(ye,{type:"success",open:X.success,onClose:de,message:"\u0422\u0438\u043f \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u0438\u0439."}),Object(o.jsx)(ye,{type:"error",open:X.error,onClose:de,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u0456 \u0442\u0438\u043f\u0443. \u041c\u043e\u0436\u043b\u0438\u0432\u043e \u043d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u0438\u0439 \u0432\u0438\u0434."}),Object(o.jsx)(ye,{type:"success",open:G.success,onClose:de,message:"\u0412\u0438\u0434 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u0438\u0439."}),Object(o.jsx)(ye,{type:"error",open:G.error,onClose:de,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u0456 \u0432\u0438\u0434\u0443."})]})}var Ee=r(486),Re=Object(D.a)((function(){return{datepicker:{margin:0}}}));var Fe=function(e){var t=e.label,r=e.validator,n=e.onTouch,i=void 0!==n&&n,s=Object(z.a)(e,["label","validator","onTouch"]),c=Re(),l=s.form.setFieldValue,d=Object(q.a)(s),u=Object.assign({},d),m=u.name;return Object(o.jsx)(Ee.a,Object(a.a)(Object(a.a)(Object(a.a)({},s),u),{},{autoOk:!0,autoComplete:"off",helperText:"",className:c.datepicker,inputVariant:"outlined",variant:"inline",format:"dd/MM/yyyy",margin:"normal",label:t,onChange:function(e){l(m,e),i&&i(!0),r&&r(m)},KeyboardButtonProps:{"aria-label":"change date"}}))},Pe=function(e){var t=e.name,r=e.label,n=e.field,i=e.error,s=e.validator,c=(e.value,Object(z.a)(e,["name","label","field","error","validator","value"])),l=n.onChange,d=Object(A.f)(),u=d.values.payment,m=d.setFieldValue;return p.a.useEffect((function(){var e;u.paymentType?m("payment.percentage",null===(e=u.paymentType)||void 0===e?void 0:e.paymentPercentage):m("payment.percentage",0)}),[u.paymentType,m]),Object(o.jsx)(K.a,Object(a.a)(Object(a.a)(Object(a.a)({},c),n),{},{error:!!i,id:"metrics",size:"small",variant:"outlined",autoComplete:"off",label:r,onChange:function(e){(e.target.value.match(/^\d*\.?\d*$/)||0===e.target.value.length)&&(m("payment.percentage",e.target.value),l(e)),s(t)}}))};var Me=r(492),Ae=function(){var e=Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/customers/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/entrepreneurs/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/order-types/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/orders/statuses/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/payments/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/ce-links/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/cp-links/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Ge={entrepreneur:null,customer:null,paymentDate:null,sum:0,percentage:0,paymentType:null,receiver:""},We=Object(D.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},row__one:{display:"grid",gridColumnGap:"20px",gridTemplateColumns:"1fr 2fr",margin:".5rem auto 1rem auto"},row__two:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 0.05fr 1fr 1fr",margin:"1rem auto","& .MuiOutlinedInput-input":{padding:"8px 8px"},"& .MuiInputLabel-outlined":{transform:"translate(14px, 10px) scale(1)"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& .MuiAutocomplete-endAdornment":{top:"initial",right:"11px !important"}},button:{gridColumn:2,width:"16rem",height:"2.375rem",justifySelf:"center"},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"},lock:{padding:0,width:"100%",backgroundColor:"white !important",minWidth:0,"&:hover":{backgroundColor:"white"}},svg:{fill:"rgba(0, 0, 0, 0.23)","&:hover":{fill:"black"}},successInfo:{display:"flex"},successText:{margin:"auto .5rem",color:"#27A637"},errorInfo:{display:"flex"},errorText:{margin:"auto .5rem",color:"#d2000a"},errorSvg:{fontSize:"2.54rem",fill:"#d2000a"},successSvg:{fontSize:"2.54rem",fill:"#27A637"}}})),He=Q.c({payment:Q.c({entrepreneur:Q.c().nullable(),customer:Q.c().required(),paymentDate:Q.a().required(),sum:Q.b().lessThan(2e9).positive().required(),percentage:Q.b().lessThan(2e9).positive().min(0).required(),paymentType:Q.c().required()})});var Ve=function(){var e=We(),t=Object(h.b)(),r=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.post("/api/payments/",e.payment)}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(t,r){r.setStatus({success:!0,error:!1}),e.invalidateQueries(["customers"]),e.invalidateQueries(["orders"]),r.payment.sum=0}})}(),n=Object(Me.a)("paymentMethods",Ke,{initialData:[],initialStale:!0,keepPreviousData:!0}),i=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.put("/api/payments/types/",e.paymentMethod)}),{onSuccess:function(t,r){e.invalidateQueries("paymentMethods"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),s=p.a.useState({success:!1,error:!1}),c=Object(S.a)(s,2),l=c[0],d=c[1],u=p.a.useState({success:!1,error:!1}),m=Object(S.a)(u,2),b=m[0],j=m[1],v=function(){d({success:!1,error:!1}),j({success:!1,error:!1})};return Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)(A.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{payment:Object(a.a)(Object(a.a)({},Ge),{},{paymentDate:new Date})},validationSchema:He,onSubmit:function(e){!function(e){var t=new Date;e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds())}(e.payment.paymentDate),e.payment.receiver=e.payment.paymentType.typeName,r.mutate({payment:e.payment,setStatus:d})},children:function(s){var c,l,d,u,m,b=s.values,p=s.errors,v=s.handleReset,f=s.validateField;return Object(o.jsxs)(A.b,{style:{margin:"0 auto"},children:[Object(o.jsxs)("div",{className:e.row__one,children:[Object(o.jsx)(A.a,{name:"payment.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===p||void 0===p||null===(c=p.payment)||void 0===c?void 0:c.entrepreneur,validator:f,component:te,sortKey:"entrepreneur",sortPage:"payment",disabled:r.isLoading,getName:function(e){return e.fullName||""},options:t.getQueryData("entrepreneurs")||[]}),Object(o.jsx)(A.a,{name:"payment.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===p||void 0===p||null===(l=p.payment)||void 0===l?void 0:l.customer,component:te,validator:f,sortKey:"customer",sortPage:"payment",disabled:r.isLoading,getName:function(e){return e.customerName||""},options:t.getQueryData("customers")||[]})]}),Object(o.jsxs)("div",{className:e.row__two,children:[Object(o.jsx)(A.a,{component:Fe,label:"\u0414\u0430\u0442\u0430",name:"payment.paymentDate",validator:f,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"payment.paymentType",label:"\u0422\u0438\u043f \u043e\u043f\u043b\u0430\u0442\u0438",error:null===p||void 0===p||null===(d=p.payment)||void 0===d?void 0:d.paymentType,component:te,validator:f,disabled:r.isLoading,getName:function(e){return e.typeName||""},options:(null===n||void 0===n?void 0:n.data)||[]}),Object(o.jsx)(k.a,{className:e.lock,disableRipple:!0,onClick:function(){return e=b.payment.paymentType,t=b.payment.percentage,e.paymentPercentage=t,void i.mutate({paymentMethod:e,setStatus:j});var e,t},children:Object(o.jsx)(R.a,{className:e.svg})}),Object(o.jsx)(A.a,{name:"payment.percentage",label:"\u0412\u0456\u0434\u0441\u043e\u0442\u043e\u043a",error:null===p||void 0===p||null===(u=p.payment)||void 0===u?void 0:u.percentage,validator:f,component:Pe,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"payment.sum",label:"\u0421\u0443\u043c\u0430",error:null===p||void 0===p||null===(m=p.payment)||void 0===m?void 0:m.sum,validator:f,component:we,disabled:r.isLoading})]}),Object(o.jsxs)("div",{className:"sort__row__three",children:[Object(o.jsx)(k.a,{color:"primary",variant:"contained",disabled:r.isLoading,className:e.button,type:"submit",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"}),Object(o.jsx)(k.a,{className:e.clear,onClick:function(e){return function(e,t){Oe.dispatch(V(Object(a.a)({},ue),"payment")),t(e)}(e,v)},disabled:r.isLoading,variant:"contained",type:"button",children:Object(o.jsx)(M.a,{})})]})]})}}),Object(o.jsx)(ye,{type:"success",open:l.success,onClose:v,message:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u043d\u0435\u0441\u0435\u043d\u0430."}),Object(o.jsx)(ye,{type:"error",open:l.error,onClose:v,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u0456 \u043e\u043f\u043b\u0430\u0442\u0438."}),Object(o.jsx)(ye,{type:"success",open:b.success,onClose:v,message:"\u0417\u0432'\u044f\u0437\u043e\u043a \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u0439."}),Object(o.jsx)(ye,{type:"error",open:b.error,onClose:v,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0432'\u044f\u0437\u043a\u0443."})]})},Je=(r(402),Object(D.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},button:{width:"16rem",justifySelf:"center"},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"}}}))),$e=Q.c({sort:Q.c({customer:Q.c().nullable(),status:Q.c().nullable(),dateFrom:Q.a().nullable(),dateTill:Q.a().nullable(),orderKind:Q.c().nullable(),orderType:Q.c().nullable(),details:Q.d().trim().max(255).nullable()})});var Ye=function(){var e=Je(),t=Object(x.b)(),r=Object(h.b)(),n=Object(x.c)((function(e){return e.auth}));return Object(o.jsx)("div",{className:e.root,children:Object(o.jsx)(A.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{sort:ue,showUserOrders:!1},onSubmit:function(e){e.showUserOrders?e.sort.employee=n.loggedUser:e.sort.employee=null,e.sort.details=e.sort.details.trim(),t(V(e.sort,"sort"))},validationSchema:$e,children:function(n){var i,s,c,l,d,u,m=n.values,b=n.errors,p=n.handleReset,j=n.validateField;return Object(o.jsxs)(A.b,{children:[Object(o.jsxs)("div",{className:"sort__row__one",children:[Object(o.jsx)(A.a,{name:"sort.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===b||void 0===b||null===(i=b.sort)||void 0===i?void 0:i.customer,component:te,validator:j,getName:function(e){return e.customerName||""},options:r.getQueryData("customers")||[]}),Object(o.jsx)(A.a,{name:"sort.orderType",label:"\u0412\u0438\u0434",error:null===b||void 0===b||null===(s=b.sort)||void 0===s?void 0:s.orderType,component:te,validator:j,getName:function(e){return e.typeName||""},options:r.getQueryData("orderTypes")||[]}),Object(o.jsx)(A.a,{name:"sort.orderKind",label:"\u0422\u0438\u043f",error:null===b||void 0===b||null===(c=b.sort)||void 0===c?void 0:c.orderKind,component:te,validator:j,getName:function(e){return e.kindName||""},options:(null===(l=m.sort.orderType)||void 0===l?void 0:l.orderKinds)||[]})]}),Object(o.jsxs)("div",{className:"sort__row__two",children:[Object(o.jsxs)("div",{className:"datepickers",children:[Object(o.jsx)(A.a,{component:Fe,disabled:!1,label:"\u0412\u0456\u0434",name:"sort.dateFrom"}),Object(o.jsx)(A.a,{component:Fe,disabled:!1,label:"\u0414\u043e",name:"sort.dateTill"})]}),Object(o.jsx)(A.a,{name:"sort.status",label:"\u0421\u0442\u0430\u0442\u0443\u0441",error:null===b||void 0===b||null===(d=b.sort)||void 0===d?void 0:d.status,component:te,validator:j,getName:function(e){return e.name||""},options:r.getQueryData("statuses")||[]}),Object(o.jsx)(A.a,{name:"sort.details",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===b||void 0===b||null===(u=b.sort)||void 0===u?void 0:u.details,numeric:!1,component:we,validator:j})]}),Object(o.jsxs)("div",{className:"sort__row__three",children:[Object(o.jsx)(Te,{name:"showUserOrders",isChecked:m.showUserOrders,label:"\u041b\u0438\u0448\u0435 \u043c\u043e\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(o.jsx)(k.a,{color:"primary",variant:"contained",className:e.button,type:"submit",children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u0442\u0438"}),Object(o.jsx)(k.a,{className:e.clear,onClick:function(e){return function(e,r){t(V(Object(a.a)({},ue),"sort")),r(e)}(e,p)},variant:"contained",type:"button",children:Object(o.jsx)(M.a,{})})]})]})}})})};function Xe(){var e=Object(b.useState)(0),t=Object(S.a)(e,2),r=t[0],n=t[1],a=Object(h.b)(),i=Object(x.b)(),s=Object(T.a)(),c=Object(x.c)((function(e){return e.auth})),l=Object(x.c)((function(e){return e.sortSelections})),d=function(e){return n(r===e?0:e)};return Object(o.jsx)(N.a,{elevation:2,children:Object(o.jsxs)("div",{className:"action_bar_container",children:[Object(o.jsxs)("div",{className:"action__bar",children:[Object(o.jsx)("div",{className:"action__bar__info",children:function(){var e,t,r,n,a,i,s;if(l[l.active].customer)return(null===(e=l[l.active].customer)||void 0===e?void 0:e.debtor)?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(C.a,{variant:"subtitle1",children:[Object(o.jsx)("img",{className:"debtor-mark",src:"img/Blackmark.svg",width:"19",height:"19",alt:"blackmark"})," ",Object(o.jsx)("strong",{children:null===(t=l[l.active].customer)||void 0===t?void 0:t.customerName})," ",null===(r=l[l.active].customer)||void 0===r?void 0:r.customerGroup,":"," ",null===(n=l[l.active].customer)||void 0===n?void 0:n.info]})}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(C.a,{variant:"subtitle1",children:[Object(o.jsx)("strong",{children:null===(a=l[l.active].customer)||void 0===a?void 0:a.customerName})," ",null===(i=l[l.active].customer)||void 0===i?void 0:i.customerGroup,":"," ",null===(s=l[l.active].customer)||void 0===s?void 0:s.info]})})}()}),Object(o.jsxs)("div",{className:"action__bar__button",children:[!c.roles.includes("ROLE_GROUNDFLOOR")&&!c.roles.includes("ROLE_UVPRINT")&&Object(o.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(){return d(1)},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(o.jsx)(k.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",onClick:function(){return d(2)},children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}),!c.roles.includes("ROLE_GROUNDFLOOR")&&!c.roles.includes("ROLE_UVPRINT")&&Object(o.jsx)(k.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",onClick:function(){return d(3)},children:"\u0412\u043d\u0435\u0441\u0442\u0438 \u043e\u043f\u043b\u0430\u0442\u0443"})]})]}),Object(o.jsx)(I.a,{in:1===r,timeout:"auto",onEntered:function(){a.invalidateQueries("customers"),a.invalidateQueries("ce-links"),a.invalidateQueries("cp-links"),s||i(H("main"))},children:Object(o.jsx)(De,{})}),Object(o.jsx)(I.a,{in:2===r,timeout:"auto",onEntered:function(){a.invalidateQueries("customers"),a.invalidateQueries("statuses"),s||i(H("sort"))},children:Object(o.jsx)(Ye,{})}),Object(o.jsx)(I.a,{in:3===r,timeout:"auto",onEntered:function(){a.invalidateQueries("customers"),s||i(H("payment"))},children:Object(o.jsx)(Ve,{})})]})})}r(403);var Ze=r(476),et=r(151);r(406);var tt=[{field:"customerName",headerName:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430",flex:3,renderCell:function(e){return Object(o.jsx)(Ze.a,{className:"name-link",onClick:function(){return Oe.dispatch(J(e.row))},children:Object(o.jsx)("b",{children:e.value})})}},{field:"debtor",headerName:"\u0411\u043e\u0440\u0436\u043d\u0438\u043a",flex:1.4,cellClassName:"centered",renderCell:function(e){return e.value?Object(o.jsx)("img",{src:"img/Blackmark.svg",width:"19",height:"19",alt:"blackmark"}):Object(o.jsx)("div",{})}},{field:"customerGroup",headerName:"\u0413\u0440\u0443\u043f\u0430",flex:5},{field:"firstPerson",headerName:"\u041e\u0441\u043e\u0431\u0430 1",flex:2},{field:"firstPhone",headerName:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d 1",flex:2.5},{field:"firstEmail",headerName:"Email 1",flex:4},{field:"city",headerName:"\u041c\u0456\u0441\u0442\u043e",flex:1.3},{field:"info",headerName:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",flex:6}];function rt(){var e=Object(h.b)(),t=Object(he.a)((function(e){return ne.a.post("api/customers/export/",{customers:e},{responseType:"arraybuffer"})}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(e,t){var r=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r);else{var n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download="\u041a\u043b\u0456\u0454\u043d\u0442\u0438.xlsx",a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}}),r=Object(x.c)((function(e){return e.auth})),n=Object(b.useState)(""),a=Object(S.a)(n,2),i=a[0],s=a[1],c=function(e){return e.filter((function(e){var t,r,n,a,o,s,c;return(null===(t=e.customerName)||void 0===t?void 0:t.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(r=e.customerGroup)||void 0===r?void 0:r.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(n=e.firstPerson)||void 0===n?void 0:n.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(a=e.firstPhone)||void 0===a?void 0:a.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(o=e.firstEmail)||void 0===o?void 0:o.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(s=e.city)||void 0===s?void 0:s.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(c=e.info)||void 0===c?void 0:c.toString().toLowerCase().indexOf(i.toLowerCase()))>-1}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(K.a,{variant:"outlined",size:"small",placeholder:"\u0428\u0432\u0438\u0434\u043a\u0438\u0439 \u043f\u043e\u0448\u0443\u043a",onChange:function(e){return s(e.target.value)},InputProps:{endAdornment:r.roles.includes("ADMIN")&&Object(o.jsx)(k.a,{className:"export-btn",variant:"outlined",onClick:function(){return t.mutate(c(X(e.getQueryData("customers")||[])))},children:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442"})}}),Object(o.jsx)(N.a,{elevation:4,className:"x-grid",children:Object(o.jsx)("div",{className:"frame",children:Object(o.jsx)("div",{className:"grid-holder",children:Object(o.jsx)(et.a,{className:"customers-grid",rows:c(X(e.getQueryData("customers")||[])),columns:tt,sortModel:[{field:"customerName",sort:"asc"}],loading:e.isFetching("customers"),rowHeight:35,headerHeight:35,pagination:!0,disableSelectionOnClick:!0})})})})]})}var nt=r(421),at=r(246),ot=r(250);var it=Object(D.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4),width:"40%","& .MuiOutlinedInput-inputMarginDense":{padding:"8px !important"}},link:{cursor:"pointer",color:e.palette.primary.main},h2:{textAlign:"center",fontWeight:"400",marginBottom:"1rem"},buttons:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},clearButton:{backgroundColor:"rgb(210,0,10)",color:"white",marginRight:"1rem","&:hover":{backgroundColor:"rgb(190,0,10)"}},rowOne:{gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr 1fr 1fr",gridColumnGap:"15px",gridRowGap:"10px"},rowTwo:{gridTemplateRows:"1fr 1fr 1fr",gridTemplateColumns:"1fr 1fr 1fr",gridRowGap:"10px"},longTextField:{gridColumnStart:1,gridColumnEnd:3},billNo:{gridColumn:4},switchHolder:{gridColumn:3,justifySelf:"end","& .MuiFormControlLabel-root":{margin:0}},auxiliaryRow:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",margin:"2rem auto 1rem auto","& .MuiOutlinedInput-input":{padding:"8px"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& #date-picker-inline-label":{transform:"translate(14px, 10px) scale(1)"}}}})),st=Q.c({customer:Q.c({customerName:Q.d().required(),customerGroup:Q.d().nullable(),city:Q.d().nullable(),info:Q.d().nullable(),firstPerson:Q.d().trim().max(25).nullable(),firstPhone:Q.d().max(10).min(10).nullable(),firstEmail:Q.d().email().nullable(),secondPerson:Q.d().trim().max(25).nullable(),secondPhone:Q.d().max(10).min(10).nullable(),secondEmail:Q.d().email().nullable(),thirdPerson:Q.d().trim().max(25).nullable(),thirdPhone:Q.d().max(10).min(10).nullable(),thirdEmail:Q.d().email().nullable()})});function ct(){var e=it(),t=Object(x.c)((function(e){return e.showCustomerModal})),r=function(){var e=Object(h.b)(),t=Object(x.b)();return Object(he.a)((function(e){return 0===e.customer.customerId?ne.a.post("/api/customers/",e.customer):ne.a.put("/api/customers/",e.customer)}),{onSuccess:function(r,n){e.invalidateQueries("customers"),t($()),n.setStatus({success:!0,error:!1})},onError:function(e,t){console.log(e),t.setStatus({success:!1,error:!0})}})}(),n=Object(x.b)(),a=p.a.useState({success:!1,error:!1}),i=Object(S.a)(a,2),s=i[0],c=i[1],l=function(){c({success:!1,error:!1})};return Object(o.jsxs)("div",{children:[Object(o.jsx)(ot.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:t.show,onClose:function(){return n($())},closeAfterTransition:!0,BackdropComponent:nt.a,BackdropProps:{timeout:500},children:Object(o.jsx)(at.a,{in:t.show,children:Object(o.jsx)("div",{className:e.paper,children:Object(o.jsx)(A.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{customer:t.customer},onSubmit:function(e){r.mutate({customer:e.customer,setStatus:c})},validationSchema:st,children:function(n){var a,i,s,c,l,d,u,m,b,p,j,v,f,O=n.values,h=n.errors,g=n.validateField;return Object(o.jsxs)(A.b,{children:[Object(o.jsx)(C.a,{className:e.h2,component:"h2",variant:"h5",children:t.customer.customerName?t.customer.customerName:"\u041d\u043e\u0432\u0438\u0439 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a"}),Object(o.jsxs)("div",{className:"row__one ".concat(e.rowOne),children:[Object(o.jsx)(A.a,{className:e.longTextField,name:"customer.customerName",label:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430",error:null===h||void 0===h||null===(a=h.customer)||void 0===a?void 0:a.customerName,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.customerGroup",label:"\u0413\u0440\u0443\u043f\u0430",error:null===h||void 0===h||null===(i=h.customer)||void 0===i?void 0:i.customerGroup,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{className:e.longTextField,name:"customer.info",label:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430",error:null===h||void 0===h||null===(s=h.customer)||void 0===s?void 0:s.info,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.city",label:"\u041c\u0456\u0441\u0442\u043e",error:null===h||void 0===h||null===(c=h.customer)||void 0===c?void 0:c.city,validator:g,component:we,numeric:!1,disabled:r.isLoading})]}),Object(o.jsxs)("div",{className:"".concat(e.rowTwo," row__two"),children:[Object(o.jsx)(A.a,{name:"customer.firstPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 1",error:null===h||void 0===h||null===(l=h.customer)||void 0===l?void 0:l.firstPerson,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.firstPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===h||void 0===h||null===(d=h.customer)||void 0===d?void 0:d.firstPhone,validator:g,component:we,phone:!0,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.firstEmail",label:"Email",error:null===h||void 0===h||null===(u=h.customer)||void 0===u?void 0:u.firstEmail,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.secondPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 2",error:null===h||void 0===h||null===(m=h.customer)||void 0===m?void 0:m.secondPerson,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.secondPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===h||void 0===h||null===(b=h.customer)||void 0===b?void 0:b.secondPhone,validator:g,component:we,phone:!0,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.secondEmail",label:"Email",error:null===h||void 0===h||null===(p=h.customer)||void 0===p?void 0:p.secondEmail,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.thirdPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 3",error:null===h||void 0===h||null===(j=h.customer)||void 0===j?void 0:j.thirdPerson,validator:g,component:we,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.thirdPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===h||void 0===h||null===(v=h.customer)||void 0===v?void 0:v.thirdPhone,validator:g,component:we,phone:!0,disabled:r.isLoading}),Object(o.jsx)(A.a,{name:"customer.thirdEmail",label:"Email",error:null===h||void 0===h||null===(f=h.customer)||void 0===f?void 0:f.thirdEmail,validator:g,component:we,numeric:!1,disabled:r.isLoading})]}),Object(o.jsxs)("div",{className:e.buttons,children:[Object(o.jsx)(k.a,{style:{gridColumn:2},color:"primary",variant:"contained",className:e.button,disabled:r.isLoading,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430"}),O.customer.customerId&&Object(o.jsx)("div",{className:e.switchHolder,children:Object(o.jsx)(Te,{name:"customer.debtor",label:"\u0411\u043e\u0440\u0436\u043d\u0438\u043a",isChecked:O.customer.debtor,disabled:r.isLoading})})||null]})]})}})})})}),Object(o.jsx)(ye,{type:"success",open:s.success,onClose:l,message:"\u0417\u0430\u043c\u043e\u0432\u0438\u043d\u043a\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(o.jsx)(ye,{type:"error",open:s.error,onClose:l,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430. \u041c\u043e\u0436\u043b\u0438\u0432\u043e \u043a\u043b\u0456\u0454\u043d\u0442 \u0437\u0456 \u0441\u0445\u043e\u0436\u043e\u044e \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0454\u044e \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454."})]})}var lt=r(477),dt=r(478),ut=r(490),mt=r(473),bt=(r(407),Object(D.a)((function(){return{root:{flexGrow:1},logoutButton:{padding:0},logoutHolder:{display:"flex",justifyContent:"flex-end",alignItems:"baseline",whiteSpace:"nowrap"},tabs:{margin:"0 auto",cursor:"pointer"}}})));function pt(){var e=bt(),t=Object(w.g)(),r=Object(h.b)(),n=p.a.useState(0),a=Object(S.a)(n,2),i=a[0],s=a[1];return Object(o.jsx)(N.a,{elevation:2,children:Object(o.jsx)("div",{className:"header__container",children:Object(o.jsx)(lt.a,{position:"static",children:Object(o.jsxs)(mt.a,{children:[Object(o.jsx)(Ze.a,{color:"inherit",href:"https://psdruk.com.ua/",children:Object(o.jsx)("img",{width:"110",height:"50",src:"/img/logo.svg",alt:"logo"})}),Object(o.jsxs)(ut.a,{className:e.tabs,value:i,onChange:function(e,n){switch(s(n),n){case 0:t.push("/");break;case 1:r.invalidateQueries("customers"),t.push("/clients")}},TabIndicatorProps:{style:{background:"white"}},indicatorColor:"secondary","aria-label":"scrollable auto tabs example",children:[Object(o.jsx)(dt.a,{label:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),Object(o.jsx)(dt.a,{label:"\u041a\u043b\u0456\u0454\u043d\u0442\u0438"})]}),Object(o.jsxs)("div",{className:e.logoutHolder,children:[Object(o.jsxs)(C.a,{variant:"body1",style:{fontWeight:300},children:["\u0412\u0456\u0442\u0430\u0454\u043c\u043e, ",Object(o.jsx)("b",{children:localStorage.getItem("username")})]}),Object(o.jsx)(k.a,{color:"inherit",onClick:function(){ce(),t.push("/login")},className:e.logoutButton,children:"\u0412\u0438\u0439\u0442\u0438"})]})]})})})})}var jt=r(496),vt=r(487),ft=r(479),Ot=r(480),ht=r(481),gt=r(236),xt=r.n(gt);function yt(){return Object(o.jsxs)(C.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(o.jsx)(Ze.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"})," ",(new Date).getFullYear(),"."]})}var wt=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function St(){var e=wt(),t=Object(w.g)(),r=Object(x.b)(),n=Object(b.useState)({username:"",password:""}),i=Object(S.a)(n,2),s=i[0],c=i[1],l=Object(b.useState)(!1),d=Object(S.a)(l,2),u=d[0],m=d[1],p=Object(b.useState)(!1),j=Object(S.a)(p,2),v=j[0],f=j[1],O=Object(b.useState)(!1),h=Object(S.a)(O,2),g=h[0],y=h[1],C=function(){m(!1),f(!1)};return Object(o.jsxs)(ft.a,{component:"main",maxWidth:"xs",children:[Object(o.jsx)(Ot.a,{}),Object(o.jsxs)("div",{className:e.paper,children:[Object(o.jsx)(jt.a,{className:e.avatar,children:Object(o.jsx)(xt.a,{})}),Object(o.jsxs)("form",{className:e.form,onSubmit:function(e){e.preventDefault(),y(!0),se(s).then((function(e){e.roles.includes("ROLE_CUSTOMER")?m(!0):(r(W(e.token,e.employee,e.username,e.roles)),t.push("/"))})).catch((function(){y(!1),f(!0)}))},children:[Object(o.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return c(Object(a.a)(Object(a.a)({},s),{},{username:e.target.value}))},label:"\u041b\u043e\u0433\u0456\u043d",name:"email",autoComplete:"off",autoFocus:!0}),Object(o.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",onChange:function(e){return c(Object(a.a)(Object(a.a)({},s),{},{password:e.target.value}))},autoComplete:"off"}),Object(o.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:g,children:"\u0412\u0445\u0456\u0434"}),Object(o.jsxs)(ht.a,{container:!0,children:[Object(o.jsx)(ht.a,{item:!0,xs:!0,children:Object(o.jsx)(Ze.a,{href:"http://plg-site.32server.in.ua/",variant:"body2",children:"\u0417\u0430\u0431\u0443\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),Object(o.jsx)(ht.a,{item:!0,children:Object(o.jsx)(Ze.a,{href:"http://plg-site.32server.in.ua/",variant:"body2",children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c"})})]})]})]}),Object(o.jsx)(vt.a,{mt:8,children:Object(o.jsx)(yt,{})}),Object(o.jsx)(ye,{type:"error",open:u,onClose:C,message:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u0449\u0435 \u043d\u0435 \u043f\u0440\u043e\u0439\u0448\u043e\u0432 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0443."}),Object(o.jsx)(ye,{type:"error",open:v,onClose:C,message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443."})]})}var Ct=r(470),Nt=r(482),kt=r(471),It=r(483),Tt=r(472);var Lt=r(248),_t=Object(D.a)((function(e){return{arrow:{color:e.palette.primary.main},tooltip:{fontSize:12,backgroundColor:e.palette.primary.main}}}));var Dt=function(e){var t=e.title,r=(e.value,e.placement),n=void 0===r?"right-start":r,i=e.children,s=Object(z.a)(e,["title","value","placement","children"]),c=_t();return Object(o.jsx)(Lt.a,Object(a.a)(Object(a.a)({title:t,placement:n,arrow:!0,classes:c},s),{},{children:Object(o.jsx)("div",{className:"value",style:{lineHeight:"1.43"},children:i})}))},Et=Object(D.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4),width:"55%"},link:{cursor:"pointer",color:e.palette.primary.main},h2:{top:"-.9rem",position:"relative",marginTop:0,textAlign:"center",fontWeight:"400",gridColumnEnd:4,gridColumnStart:2},buttons:{display:"flex",justifyContent:"flex-end"},clearButton:{backgroundColor:"rgb(210,0,10)",color:"white",marginRight:"1rem","&:hover":{backgroundColor:"rgb(190,0,10)"}},rowOne:{gridTemplateColumns:"1fr 1fr 1fr 1fr"},rowTwo:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr 1fr"},billNo:{gridColumn:4},auxiliaryRow:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",margin:"2rem auto 1rem auto","& .MuiOutlinedInput-input":{padding:"8px"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& #date-picker-inline-label":{transform:"translate(14px, 10px) scale(1)"}}}})),Rt=Q.c({order:Q.c({entrepreneur:Q.c().required(),customer:Q.c().required(),date:Q.a().required(),orderType:Q.c().required(),orderKind:Q.c().required(),billNo:Q.b().lessThan(2e9).positive().min(0),width:Q.b().lessThan(2e9).positive().min(0).required(),height:Q.b().lessThan(2e9).positive().min(0).required(),amount:Q.b().lessThan(2e9).positive().min(0).required(),price:Q.b().lessThan(2e9).positive().min(0).required(),fees:Q.b().lessThan(2e9).positive().min(0).required(),finalSum:Q.b().lessThan(2e9).positive().min(0).required(),comment:Q.d().trim().max(255).required(),payLog:Q.d()})});function Ft(e){var t=e.user,r=e.roles,n=e.order,a=Et(),i=Object(h.b)(),s=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.delete("/api/orders/"+e.orderId)}),{onError:function(e,t){t.setStatus(!0)},onSuccess:function(t,r){e.invalidateQueries(["customers"]),e.invalidateQueries(["orders"]),r.setShowModal(!1)}})}(),c=function(){var e=null,t=Object(h.b)();return Object(he.a)((function(e){return ne.a.put("/api/orders/",e.order)}),{onMutate:function(r){t.getQueryCache().findAll(["orders",1]).forEach((function(n){t.setQueryData(n.queryKey,n.state.data.map((function(t){return t.orderId===r.order.orderId?(e=t,r.order):t})))}))},onError:function(r,n){n.setStatus(!0),t.getQueryCache().findAll(["orders",1]).forEach((function(r){t.setQueryData(r.queryKey,r.state.data.map((function(t){return t.orderId===e.orderId?e:t})))}))},onSuccess:function(e,r){t.invalidateQueries(["customers"]),t.invalidateQueries(["orders"]),r.toggleModal()}})}(),l=p.a.useState(!1),d=Object(S.a)(l,2),u=d[0],m=d[1],b=p.a.useState(!1),j=Object(S.a)(b,2),v=j[0],f=j[1],O=p.a.useState(!1),g=Object(S.a)(O,2),x=g[0],y=g[1],w=p.a.useState(!1),N=Object(S.a)(w,2),I=N[0],T=N[1],D=function(){return m(!u)},E=function(){return n.employee.employeeID!==t.employeeID},R=function(e){return r.includes(e)},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ROLE_ADMIN";return!R("ROLE_ADMIN")&&(!R(e)&&E())};return Object(o.jsxs)("div",{children:[Object(o.jsx)(Dt,{title:n.employee.name,children:Object(o.jsx)(Ze.a,{className:a.link,onClick:D,children:Object(o.jsx)("b",{children:n.orderId})})}),Object(o.jsx)(ot.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:u,onClose:D,closeAfterTransition:!0,BackdropComponent:nt.a,BackdropProps:{timeout:500},children:Object(o.jsx)(at.a,{in:u,children:Object(o.jsx)("div",{className:a.paper,children:Object(o.jsx)(A.c,{validateOnChange:!0,validateOnMount:!1,validateOnBlur:!1,initialValues:{order:n},onSubmit:function(e){c.mutate({order:e.order,toggleModal:D,setStatus:y})},validationSchema:Rt,children:function(e){var t,r,s,l,d,u,m,b,p,j,O,h,g,w,S,N,I=e.values,D=e.errors,E=e.validateField;return Object(o.jsxs)(A.b,{children:[Object(o.jsx)(ye,{type:"error",open:v,onClose:function(){return f(!1)},message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f."}),Object(o.jsx)(ye,{type:"error",open:x,onClose:function(){return y(!1)},message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f."}),Object(o.jsxs)("div",{className:a.auxiliaryRow,children:[Object(o.jsx)(A.a,{component:Fe,label:"\u0414\u0430\u0442\u0430",name:"order.date",error:null===D||void 0===D||null===(t=D.order)||void 0===t?void 0:t.date,validator:E,disabled:c.isLoading||F()}),Object(o.jsxs)(C.a,{className:a.h2,component:"h2",variant:"h5",children:["\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044f \u2116 ",Object(o.jsx)("b",{children:n.orderId})]}),Object(o.jsx)(A.a,{className:a.billNo,name:"order.billNo",label:"\u2116 \u0420\u0430\u0445\u0443\u043d\u043a\u0443",disableCalculation:!0,error:null===D||void 0===D||null===(r=D.order)||void 0===r?void 0:r.billNo,validator:E,component:we,disabled:c.isLoading||F("ROLE_MANAGER")})]}),Object(o.jsxs)("div",{className:"".concat(a.rowOne," row__one"),children:[Object(o.jsx)(A.a,{name:"order.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===D||void 0===D||null===(s=D.order)||void 0===s?void 0:s.entrepreneur,validator:E,component:te,disabled:c.isLoading||F(),getName:function(e){return e.fullName||""},options:i.getQueryData("entrepreneurs")}),Object(o.jsx)(A.a,{name:"order.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===D||void 0===D||null===(l=D.order)||void 0===l?void 0:l.customer,validator:E,component:te,disabled:c.isLoading||F(),getName:function(e){return e.customerName||""},options:i.getQueryData("customers")}),Object(o.jsx)(A.a,{name:"order.orderType",label:"\u0412\u0438\u0434",error:null===D||void 0===D||null===(d=D.order)||void 0===d?void 0:d.orderType,validator:E,component:te,disabled:c.isLoading||F(),getName:function(e){return e.typeName||""},options:i.getQueryData("orderTypes")}),Object(o.jsx)(A.a,{name:"order.orderKind",label:"\u0422\u0438\u043f",error:null===D||void 0===D||null===(u=D.order)||void 0===u?void 0:u.orderKind,validator:E,component:te,disabled:c.isLoading||F(),getName:function(e){return e.kindName||""},options:(null===(m=I.order)||void 0===m||null===(b=m.orderType)||void 0===b?void 0:b.orderKinds)||[]})]}),Object(o.jsxs)("div",{className:"".concat(a.rowTwo," row__two"),children:[Object(o.jsx)(A.a,{name:"order.width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===D||void 0===D||null===(p=D.order)||void 0===p?void 0:p.width,validator:E,component:we,disabled:c.isLoading||F()}),Object(o.jsx)(A.a,{name:"order.height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===D||void 0===D||null===(j=D.order)||void 0===j?void 0:j.height,validator:E,component:we,disabled:c.isLoading||F()}),Object(o.jsx)(A.a,{name:"order.amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===D||void 0===D||null===(O=D.order)||void 0===O?void 0:O.amount,validator:E,component:we,disabled:c.isLoading||F()}),Object(o.jsx)(_.a,{id:"metrics",size:"small",variant:"outlined",value:(I.order.width*I.order.height/1e6*I.order.amount).toFixed(3)||0,endAdornment:Object(o.jsx)(L.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(o.jsx)(A.a,{name:"order.price",label:"\u0426\u0456\u043d\u0430",error:null===D||void 0===D||null===(h=D.order)||void 0===h?void 0:h.price,validator:E,component:we,disabled:c.isLoading||F()}),Object(o.jsx)(A.a,{name:"order.fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===D||void 0===D||null===(g=D.order)||void 0===g?void 0:g.fees,validator:E,component:we,disabled:c.isLoading||F()}),Object(o.jsx)(A.a,{name:"order.finalSum",label:"\u0421\u0443\u043c\u0430",error:null===D||void 0===D||null===(w=D.order)||void 0===w?void 0:w.finalSum,validator:E,component:we,disableCalculation:!0,disabled:c.isLoading||F()})]}),Object(o.jsx)("div",{className:"row__three",children:Object(o.jsx)(A.a,{name:"order.comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===D||void 0===D||null===(S=D.order)||void 0===S?void 0:S.comment,validator:E,numeric:!1,component:we,disabled:c.isLoading||F("ROLE_MANAGER")})}),Object(o.jsx)("div",{className:"row__three",children:Object(o.jsx)(A.a,{name:"order.payLog",label:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u043f\u043b\u0430\u0442",error:null===D||void 0===D||null===(N=D.order)||void 0===N?void 0:N.payLog,validator:E,numeric:!1,multiline:!0,component:we,disabled:c.isLoading||F()})}),Object(o.jsxs)("div",{className:a.buttons,children:[Object(o.jsx)(k.a,{className:a.clearButton,disabled:c.isLoading||F(),variant:"contained",type:"button",onClick:function(){return T(!0)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),Object(o.jsx)(k.a,{color:"primary",variant:"contained",className:a.button,disabled:c.isLoading||F("ROLE_MANAGER"),type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]})}})})})}),Object(o.jsxs)(Ct.a,{fullScreen:!1,open:I,onClose:function(){return T(!1)},"aria-labelledby":"responsive-dialog-title",children:[Object(o.jsx)(Nt.a,{id:"responsive-dialog-title",children:"\u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f?"}),Object(o.jsx)(kt.a,{children:Object(o.jsx)(It.a,{children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u0439\u043e\u0433\u043e \u0437\u043c\u0456\u0441\u0442 \u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u0438 \u0431\u0443\u0434\u0435 \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e. \u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438?"})}),Object(o.jsxs)(Tt.a,{children:[Object(o.jsx)(k.a,{autoFocus:!0,onClick:function(){return T(!1)},variant:"contained",color:"primary",children:"\u041d\u0456"}),Object(o.jsx)(k.a,{onClick:function(){return e=n.orderId,T(!1),void s.mutate({orderId:e,setStatus:y,setShowModal:m});var e},variant:"contained",className:a.clearButton,autoFocus:!0,children:"\u0422\u0430\u043a"})]})]})]})}var Pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){return 0===e.orderId?(e.id=t,e.orderId=t):e.id=e.orderId,e.date?e.date=new Date(e.date):e.date=new Date,e}))},Mt=function(){var e=Object(ie.a)(oe.a.mark((function e(t){var r,n,o,i;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={orderId:null,customer:null,entrepreneur:null,employee:null,status:null,dateFrom:null,dateTill:null,payDateFrom:null,payDateTill:null,receiver:null,orderKind:null,orderType:null,details:""},n=Object(a.a)(Object(a.a)({},r),{},{orderId:null===t||void 0===t?void 0:t.orderId,customer:null===t||void 0===t?void 0:t.customer,entrepreneur:null===t||void 0===t?void 0:t.entrepreneur,employee:null===t||void 0===t?void 0:t.employee,status:null===t||void 0===t?void 0:t.status,dateFrom:null===t||void 0===t?void 0:t.dateFrom,dateTill:null===t||void 0===t?void 0:t.dateTill,payDateFrom:null===t||void 0===t?void 0:t.payDateFrom,payDateTill:null===t||void 0===t?void 0:t.payDateTill,receiver:null===t||void 0===t?void 0:t.receiver,orderKind:null===t||void 0===t?void 0:t.orderKind,orderType:null===t||void 0===t?void 0:t.orderType,details:null===t||void 0===t?void 0:t.details}),e.next=4,ne.a.post("/api/orders/filter/",n);case 4:if(o=e.sent,!(i=o.data)){e.next=8;break}return e.abrupt("return",Pt(i));case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var At=r(180);var Qt=["","img/on-agreement.svg","img/in-progress.svg","img/ready.svg","img/completed.svg"],zt=Object(D.a)((function(e){return{container:{padding:e.spacing(1),textAlign:"center",backgroundColor:"#fff",boxShadow:"0 0 14px 2px rgba(0, 0, 0, 0.3)",borderRadius:"4px"},acceptanceButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#df16a0",color:"#df16a0","&:hover":{color:"#fff",backgroundColor:"#df16a0"}},inWorkButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:e.palette.primary.main,color:e.palette.primary.main,"&:hover":{color:"#fff",backgroundColor:e.palette.primary.main}},readyButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#28a745",color:"#28a745","&:hover":{color:"#fff",backgroundColor:"#28a745"}},completedButton:{width:"100%",margin:".2rem 0",backgroundColor:"#28a745",border:"1px solid",borderColor:"#28a745",color:"#fff","&:hover":{borderColor:"#218838",backgroundColor:"#218838"}},popper:{zIndex:1,marginLeft:"0.5rem",'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent ".concat(e.palette.background.paper," transparent transparent")}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent ".concat(e.palette.background.paper)}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}}));var Bt=function(e){var t=e.orderId,r=e.status,n=zt(),a=function(){var e=Object(h.b)();return Object(he.a)((function(e){return ne.a.get("/api/orders/statuses/"+e.orderId+"/"+e.statusId)}),{onSuccess:function(t,r){e.invalidateQueries("orders"),r.toggle()}})}(),i=p.a.useRef(null),s=p.a.useState(!0),c=Object(S.a)(s,1)[0],l=p.a.useState(!1),d=Object(S.a)(l,2),u=d[0],m=d[1],b=p.a.useState(null),j=Object(S.a)(b,2),v=j[0],f=j[1],O=u?"scroll-playground":null,g=function(){return m((function(e){return!e}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("img",{className:n.img,ref:i,src:Qt[r],width:"19",height:"19",alt:"on-agreement","aria-describedby":O,variant:"contained",color:"primary",onClick:g}),Object(o.jsxs)(At.a,{id:O,open:u,anchorEl:i.current,placement:"right",disablePortal:!0,className:n.popper,modifiers:{flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"scrollParent"},arrow:{enabled:!0,element:v}},children:[c?Object(o.jsx)("span",{className:n.arrow,ref:f}):null,Object(o.jsxs)("div",{className:n.container,children:[Object(o.jsx)(k.a,{className:n.acceptanceButton,onClick:function(){return a.mutate({orderId:t,statusId:1,toggle:g})},children:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456"}),Object(o.jsx)("br",{}),Object(o.jsx)(k.a,{className:n.inWorkButton,onClick:function(){return a.mutate({orderId:t,statusId:2,toggle:g})},children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),Object(o.jsx)("br",{}),Object(o.jsx)(k.a,{className:n.readyButton,onClick:function(){return a.mutate({orderId:t,statusId:3,toggle:g})},children:"\u0413\u043e\u0442\u043e\u0432\u0435"}),Object(o.jsx)("br",{}),Object(o.jsx)(k.a,{className:n.completedButton,o:!0,onClick:function(){return a.mutate({orderId:t,statusId:4,toggle:g})},children:"\u0412\u0456\u0434\u0434\u0430\u043d\u043e"})]})]})]})};r(411);function Kt(e,t){return e.localeCompare(t)}var Ut=function(e){return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)};function qt(e){var t,r=e.tableID,n=Object(x.c)((function(e){return e.sortSelections})),a=Object(x.c)((function(e){return e.auth})),i=function(e,t){return Object(Me.a)(["orders",e,t],(function(){return Mt(t)}),{initialData:[],initialStale:!0,keepPreviousData:!1})}(r,n[n.active]),s=Object(b.useState)({orderId:"desc"}),c=Object(S.a)(s,2),l=c[0],d=c[1],u=Object(he.a)((function(e){return ne.a.post("api/orders/export/",{orders:e},{responseType:"arraybuffer"})}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(e,t){var r=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r);else{var n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download="\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c.xlsx",a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}}),m=Object(h.b)(),p=Object(b.useState)(""),j=Object(S.a)(p,2),v=j[0],f=j[1],O=function(e){return e.filter((function(e){var t,r,n,a,o,i,s,c,l,d,u,m,b;return(null===(t=e.orderId)||void 0===t?void 0:t.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(r=e.billNo)||void 0===r?void 0:r.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||e.customer.customerName.toString().toLowerCase().indexOf(v.toLowerCase())>-1||(null===(n=Ut(e.date))||void 0===n?void 0:n.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(a=e.fees)||void 0===a?void 0:a.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(o=e.finalSum)||void 0===o?void 0:o.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(i=e.amount)||void 0===i?void 0:i.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(s=e.price)||void 0===s?void 0:s.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(c=e.height)||void 0===c?void 0:c.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(l=e.width)||void 0===l?void 0:l.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(d=e.m2)||void 0===d?void 0:d.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(u=e.orderKind.kindName)||void 0===u?void 0:u.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(m=e.orderType.typeName)||void 0===m?void 0:m.toString().toLowerCase().indexOf(v.toLowerCase()))>-1||(null===(b=e.comment)||void 0===b?void 0:b.toString().toLowerCase().indexOf(v.toLowerCase()))>-1}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(K.a,{variant:"outlined",size:"small",placeholder:"\u0428\u0432\u0438\u0434\u043a\u0438\u0439 \u043f\u043e\u0448\u0443\u043a",onChange:function(e){return f(e.target.value)},InputProps:{endAdornment:a.roles.includes("ROLE_ORDERS_EXPORTER")&&Object(o.jsx)(k.a,{className:"export-btn",variant:"outlined",onClick:function(){return u.mutate(O(i.data))},children:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442"})}}),Object(o.jsxs)(N.a,{elevation:4,className:"x-grid",children:[n[n.active].customer&&Object(o.jsx)("div",{className:"action__bar__stat",children:Object(o.jsxs)("label",{children:["\u0421\u0443\u043c\u0430 \u0431\u043e\u0440\u0433\u0443 :"," ",Object(o.jsx)("b",{children:(t=m.getQueryData("customers").find((function(e){return e.customerId===n[n.active].customer.customerId})),i.data.reduce((function(e,t){return e+(t.finalSum-t.paySum)}),0)-t.money)})," ","\u0433\u0440\u043d"]})}),Object(o.jsx)("div",{className:"frame",children:Object(o.jsx)("div",{className:"grid-holder",children:Object(o.jsx)(et.a,{rows:O(i.data),columns:function(e){var t=[{field:"orderId",type:"number",headerName:"\u2116",flex:.8,renderCell:function(e){return Object(o.jsx)(Ft,{user:a.loggedUser,roles:a.roles,order:e.row})}},{field:"billNo",type:"number",headerName:"\u0420\u0430\u0445",flex:.6},{field:"customer",headerName:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",flex:2.2,sortComparator:function(e,t){return Kt(e.customerName,t.customerName)},valueFormatter:function(e){return e.value.customerName},renderCell:function(e){return e.value.info?Object(o.jsx)(Dt,{title:e.value.info,children:Object(o.jsx)("b",{children:e.value.customerName})}):Object(o.jsx)("b",{children:e.value.customerName})}},{field:"date",type:"dateTime",headerName:"\u0414\u0430\u0442\u0430",flex:1.2,valueFormatter:function(e){return Ut(e.value)}},{field:"width",type:"number",headerName:"\u0428\u0438\u0440\u0438\u043d\u0430",valueFormatter:function(e){return e.value},flex:1.09},{field:"height",type:"number",headerName:"\u0412\u0438\u0441\u043e\u0442\u0430",valueFormatter:function(e){return e.value},flex:1},{field:"amount",type:"number",headerName:"\u041a-\u0441\u0442\u044c",valueFormatter:function(e){return e.value},flex:.85},{field:"m2",type:"number",headerName:"\u041c2",valueFormatter:function(e){return Number.parseFloat(e.value).toFixed(3)},flex:.9},{field:"price",type:"number",headerName:"\u0426\u0456\u043d\u0430",valueFormatter:function(e){return e.value},flex:.8},{field:"fees",type:"number",headerName:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",valueFormatter:function(e){return e.value},flex:1},{field:"finalSum",type:"number",headerName:"\u0421\u0443\u043c\u0430",flex:.9,renderCell:function(e){return Object(o.jsxs)("b",{children:[" ",e.value," "]})}},{field:"paid",headerName:"\u041e\u043f\u043b\u0430\u0442\u0430",sortable:!1,flex:1.1,cellClassName:"centered",renderCell:function(e){return e.row.paySum===e.row.finalSum?Object(o.jsx)(Dt,{title:Ut(new Date(e.row.payDate)),arrow:!0,children:Object(o.jsx)("img",{src:"img/completed.svg",width:"19",height:"19",alt:"paid"})}):e.row.paySum>0?Object(o.jsx)(Dt,{title:e.row.paySum+" \u0433\u0440\u043d, "+Ut(new Date(e.row.payDate)),arrow:!0,children:Object(o.jsx)("img",{src:"img/partly_paid.svg",width:"19",height:"19",alt:"partly__paid"})}):void 0}},{field:"status",headerName:"\u0421\u0442\u0430\u0442\u0443\u0441",flex:1.1,cellClassName:"centered",sortComparator:function(e,t){return e.id-t.id},renderCell:function(e){return Object(o.jsx)(Bt,{orderId:e.row.orderId,status:e.row.status.id})}},{field:"orderType",type:"string",headerName:"\u0412\u0438\u0434",flex:1.8,sortComparator:function(e,t){return Kt(e.typeName,t.typeName)},valueFormatter:function(e){return e.value.typeName}},{field:"orderKind",headerName:"\u0422\u0438\u043f",flex:1.8,sortComparator:function(e,t){return Kt(e.kindName,t.kindName)},valueFormatter:function(e){return e.value.kindName}},{field:"comment",headerName:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",flex:6,sortComparator:function(e,t){return Kt(e,t)},renderCell:function(e){return Object(o.jsx)(Dt,{title:e.value,placement:"left-start",children:e.value})}}];return Object.keys(e).forEach((function(r){return t.find((function(e){return e.field===r})).sortDirection=e[r]})),Object.values(t)}(l),onSortModelChange:function(e){var t,r,n={};e.sortModel.length>0?n[null===(t=e.sortModel[0])||void 0===t?void 0:t.field]=null===(r=e.sortModel[0])||void 0===r?void 0:r.sort:n.orderId="desc";d(n)},loading:i.isLoading,rowHeight:35,headerHeight:35,pagination:!0,disableSelectionOnClick:!0})})})]})]})}var Gt=function(){return Object(Me.a)("customers",Ae),Object(Me.a)("entrepreneurs",Qe,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Me.a)("orderTypes",ze,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Me.a)("statuses",Be,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Me.a)("ce-links",Ue,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Me.a)("cp-links",qe,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(y.a,{children:Object(o.jsxs)(w.d,{children:[Object(o.jsx)(w.b,{path:"/login",children:Object(o.jsx)(St,{})}),Object(o.jsx)(w.b,{exact:!0,path:"/",children:Object(o.jsxs)("div",{className:"main",children:[Object(o.jsxs)("div",{className:"main__header",children:[Object(o.jsx)(pt,{}),Object(o.jsx)(Xe,{})]}),Object(o.jsx)("div",{className:"main__table",children:Object(o.jsx)(qt,{tableID:1})})]})}),Object(o.jsx)(w.b,{path:"/clients",children:Object(o.jsxs)("div",{className:"clients",children:[Object(o.jsx)("div",{className:"clients__header",children:Object(o.jsx)(pt,{})}),Object(o.jsx)("div",{className:"clients__table",children:Object(o.jsx)(rt,{})})]})}),Object(o.jsxs)(w.b,{path:"/sort",children:[Object(o.jsx)(pt,{}),Object(o.jsx)(qt,{tableID:2})]})]})}),Object(o.jsx)(ct,{})]})};r(412),r(413);var Wt,Ht,Vt,Jt,$t,Yt,Xt,Zt,er,tr=function(){return Object(o.jsx)(N.a,{elevation:3,className:"blue-holder",children:Object(o.jsxs)(N.a,{elevation:3,className:"info",children:[Object(o.jsxs)("div",{className:"blank-page",children:[Object(o.jsx)(C.a,{variant:"h4",component:"h3",children:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0430"})," ",Object(o.jsx)(C.a,{variant:"h2",component:"h3",children:"404"})]}),Object(o.jsx)(vt.a,{mt:8,children:Object(o.jsxs)(C.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(o.jsx)(Ze.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"})," ",(new Date).getFullYear(),"."]})})]})})},rr=function(e){var t=e.component,r=Object(z.a)(e,["component"]),n=Object(x.c)((function(e){return e.auth})),i=localStorage.getItem("token"),s=localStorage.getItem("username"),c=localStorage.getItem("roles"),l=JSON.parse(localStorage.getItem("loggedUser"));return Object(o.jsx)(w.b,Object(a.a)(Object(a.a)({},r),{},{render:function(e){return n.isAuthenticated?Object(o.jsx)(t,Object(a.a)({},e)):i?(Oe.dispatch(W(i,l,s,c)),Object(o.jsx)(t,Object(a.a)({},e))):Object(o.jsx)(w.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},nr=Object(c.a)({palette:{primary:{light:"#fff",main:"rgba(0, 60, 170, 0.95)",dark:"rgba(0, 40, 170, 0.95)"},secondary:{main:"#f44336"}},typography:{useNextVariants:!0,fontSize:11,htmlFontSize:15}},d.ukUA),ar=nr.breakpoints,or=Object(a.a)(Object(a.a)({},nr),{},{overrides:{MuiInputLabel:{root:(Wt={fontSize:11},Object(n.a)(Wt,ar.up("lg"),{fontSize:11}),Object(n.a)(Wt,ar.down(1300),{fontSize:9}),Wt)},MuiInputAdornment:{root:(Ht={fontSize:11},Object(n.a)(Ht,ar.up("lg"),{fontSize:11}),Object(n.a)(Ht,ar.down(1300),{fontSize:9}),Ht)},MuiInputBase:{root:(Vt={fontSize:11},Object(n.a)(Vt,ar.up("lg"),{fontSize:11}),Object(n.a)(Vt,ar.down(1300),{fontSize:9}),Vt)},MuiTypography:{root:(Jt={fontSize:11},Object(n.a)(Jt,ar.up("lg"),{fontSize:11}),Object(n.a)(Jt,ar.down(1300),{fontSize:9}),Jt),subtitle1:($t={fontSize:11},Object(n.a)($t,ar.up("lg"),{fontSize:11}),Object(n.a)($t,ar.down(1300),{fontSize:9}),$t),body1:(Yt={fontSize:12},Object(n.a)(Yt,ar.up("lg"),{fontSize:12}),Object(n.a)(Yt,ar.down(1300),{fontSize:10}),Yt),button:(Xt={fontSize:11},Object(n.a)(Xt,ar.up("lg"),{fontSize:11}),Object(n.a)(Xt,ar.down(1300),{fontSize:9}),Xt)},MuiButton:{root:(Zt={fontSize:11},Object(n.a)(Zt,ar.up("lg"),{fontSize:11}),Object(n.a)(Zt,ar.down(1300),{fontSize:9}),Zt)},MuiTab:{root:(er={fontSize:11},Object(n.a)(er,ar.up("lg"),{fontSize:11}),Object(n.a)(er,ar.down(1300),{fontSize:9}),er)},MuiSvgIcon:{root:Object(n.a)({},ar.down(1300),{fontSize:15})}}});Date.prototype.toISOString=function(){var e=Object(s.a)(this);return e.substr(0,e.indexOf("+"))};var ir=new f.a,sr=new O.a({queryCache:ir});v.a.render(Object(o.jsx)(l.a,{theme:or,children:Object(o.jsxs)(h.a,{client:sr,children:[Object(o.jsx)(u.a,{utils:i.a,locale:m.a,children:Object(o.jsx)(x.a,{store:Oe,children:Object(o.jsx)(y.a,{children:Object(o.jsxs)(w.d,{children:[Object(o.jsx)(w.b,{path:"/login",component:St}),Object(o.jsx)(rr,{path:"/",component:Gt}),Object(o.jsx)(w.b,{path:"*",component:tr})]})})})}),Object(o.jsx)(g.ReactQueryDevtools,{})]})}),document.getElementById("root"))}},[[414,1,2]]]);
//# sourceMappingURL=main.d6fd877b.chunk.js.map