(this["webpackJsonpb1.0"]=this["webpackJsonpb1.0"]||[]).push([[0],{222:function(e,t,r){},24:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"f",(function(){return n})),r.d(t,"i",(function(){return o})),r.d(t,"j",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"l",(function(){return l})),r.d(t,"h",(function(){return c})),r.d(t,"m",(function(){return d})),r.d(t,"o",(function(){return u})),r.d(t,"n",(function(){return m})),r.d(t,"a",(function(){return b})),r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return j})),r.d(t,"k",(function(){return v})),r.d(t,"e",(function(){return h}));var a="ADD_ORDER",n="LOAD_ORDERS",o="SET_AUTHENTICATED",i="SET_UNAUTHENTICATED",s="SELECT_CUSTOMER",l="UNSELECT_CUSTOMER",c="SET_ACTIVE_SORTING",d="UPDATE_MAIN_SORTING",u="UPDATE_SORT_SORTING",m="UPDATE_PAYMENT_SORTING",b="ADD_MAIN_SORTING",p="ADD_SORT_SORTING",j="ADD_PAYMENT_SORTING",v="SHOW_CUSTOMER_MODAL",h="CLOSE_CUSTOMER_MODAL"},295:function(e,t,r){"use strict";r.r(t);var a=r(25),n=r(12),o=r(24),i={mainPageOrderList:[],sortPageOrderList:[],isLoading:!0};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.b:return Object(n.a)(Object(n.a)({},e),{},{mainPageOrderList:[].concat(Object(a.a)(e.mainPageOrderList),[t.payload]),sortPageOrderList:[].concat(Object(a.a)(e.sortPageOrderList),[t.payload])});case o.f:return t.payload?Object(n.a)(Object(n.a)({},e),{},{mainPageOrderList:t.payload,sortPageOrderList:t.payload,isLoading:!1}):e;default:return e}}},394:function(e,t,r){},397:function(e,t,r){},398:function(e,t,r){},401:function(e,t,r){},402:function(e,t,r){},406:function(e,t,r){},407:function(e,t,r){},408:function(e,t,r){},409:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r(0),o=r.n(n),i=r(26),s=r.n(i),l=r(34),c=r(21),d=r.n(c),u=r(32),m=r.n(u),b=r(50),p=r(24),j=function(e,t,r,a){return{type:p.i,payload:{token:e,employee:t,username:r,roles:a}}},v=function(e){return{type:p.h,payload:e}},h=function(e,t){var r;switch(t){case"main":r=p.m;break;case"sort":r=p.o;break;case"payment":r=p.n}return{type:r,payload:e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:p.k,payload:e}},O=function(){return{type:p.e}},g=function(){var e=Object(b.a)(m.a.mark((function e(t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/auth/signin",t);case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){_.dispatch({type:p.j})},y={isAuthenticated:!1,loggedUser:null,roles:[]};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.i:return localStorage.setItem("token",t.payload.token),localStorage.setItem("username",t.payload.username),localStorage.setItem("roles",t.payload.roles),localStorage.setItem("loggedUser",JSON.stringify(t.payload.employee)),d.a.defaults.headers.common.Authorization="Bearer ".concat(t.payload.token),d.a.interceptors.response.use((function(e){return e}),(function(e){var t;throw 401===(null===(t=e.response)||void 0===t?void 0:t.status)?x():console.error(e),e})),{isAuthenticated:!0,loggedUser:t.payload.employee,roles:t.payload.roles};case p.j:return localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),localStorage.removeItem("loggedUser"),{isAuthenticated:!1,loggedUser:null};default:return e}},C=r(12),N={selectedCustomer:null,selectedStatus:null,selectedDateFrom:null,selectedDateTill:null,selectedKind:null,selectedType:null,selectedEmployee:null,selectedDetails:""},S={active:"main",main:N,sort:N,payment:N};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.h:return Object(C.a)(Object(C.a)({},e),{},{active:t.payload});case p.a:return Object(C.a)(Object(C.a)({},e),{},{main:Object(C.a)(Object(C.a)({},e.main),t.payload)});case p.d:return Object(C.a)(Object(C.a)({},e),{},{sort:Object(C.a)(Object(C.a)({},e.sort),t.payload)});case p.c:return Object(C.a)(Object(C.a)({},e),{},{payment:Object(C.a)(Object(C.a)({},e.payment),t.payload)});case p.m:return Object(C.a)(Object(C.a)({},e),{},{main:t.payload});case p.o:return Object(C.a)(Object(C.a)({},e),{},{sort:t.payload});case p.n:return Object(C.a)(Object(C.a)({},e),{},{payment:t.payload});default:return e}},T={show:!1,customer:{customerId:0,customerName:"",customerGroup:"",money:0,payLog:"",debtor:!1,city:"",info:"",firstPerson:"",firstPhone:"",firstEmail:"",secondPerson:"",secondPhone:"",secondEmail:"",thirdPerson:"",thirdPhone:"",thirdEmail:""}};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.k:return{show:!0,customer:t.payload};case p.e:return{show:!1,customer:{}};default:return e}},D=r(170),_=(0,D.createStore)((0,D.combineReducers)({auth:w,orders:r(295).default,sortSelections:k,showCustomerModal:L})),I=r(238),E=r(475),F=r(46),P=r(478),R=r(237),M=r(91),A=r(37),Q=r(13),K=r(177),B=r(149),q=r(119),U=r(468),G=r(463),W=r(421),z=r(118),H=r(461),V=r(462),J=r(464),$=r(100),Y=r.n($),X=r(10),Z=r(99),ee=r(15),te=(r(394),r(48)),re=r(5),ae=r(240),ne=r(479),oe=r(148),ie=Object(re.a)({inputRoot:{'&&[class*="MuiOutlinedInput-root"] $input':{padding:2},'&&[class*="MuiOutlinedInput-root"]':{paddingRight:"40px!important"}},input:{}})(ne.a);var se=function(e){var t=e.label,r=e.getName,n=e.sortKey,o=e.error,i=e.validator,s=e.setEntrepreneur,c=void 0!==s&&s,d=e.setDimensions,u=void 0!==d&&d,m=e.setPrice,b=void 0!==m&&m,j=e.action,v=void 0!==j&&j,h=e.sortPage,f=void 0===h?"":h,O=(e.textFieldProps,Object(te.a)(e,["label","getName","sortKey","error","validator","setEntrepreneur","setDimensions","setPrice","action","sortPage","textFieldProps"])),g=O.form.setFieldValue,x=Object(X.f)().values.order,y=Object(oe.a)(O),w=Object.assign({},y),N=w.name,S=Object(l.b)(),k=Object(Z.b)();return Object(a.jsx)(ie,Object(C.a)(Object(C.a)({},O),{},{size:"small",error:"",value:w.value,autoHighlight:!0,getOptionLabel:r,onKeyPress:function(e){"="===e.key&&(v&&S(v),e.preventDefault())},onChange:function(e,t){if(n){var r={};r[n]=t,S(function(e,t){var r;switch(t){case"main":r=p.a;break;case"sort":r=p.d;break;case"payment":r=p.c}return{type:r,payload:e}}(r,f))}if(c){var a,o=(null===(a=k.getQueryData("ce-links").find((function(e){return e.customer.customerId===(null===t||void 0===t?void 0:t.customerId)})))||void 0===a?void 0:a.entrepreneur)||null;g("order.entrepreneur",o)}if(g(N,t),u&&t&&t.width&&t.height&&(g("order.width",t.width),g("order.height",t.height)),b){var s,l,d,m,j;if(!t)return;if(t.customerId)l=t.customerId,d=null===(m=x.orderKind)||void 0===m?void 0:m.kindId;else l=null===(j=x.customer)||void 0===j?void 0:j.customerId,d=t.kindId;if(!l||!d)return;var v=(null===(s=k.getQueryData("cp-links").find((function(e){var t,r;return(null===(t=e.customer)||void 0===t?void 0:t.customerId)===l&&(null===(r=e.orderKind)||void 0===r?void 0:r.kindId)===d})))||void 0===s?void 0:s.price)||0;g("order.price",v)}i(N)},renderInput:function(e){return Object(a.jsx)(ae.a,Object(C.a)(Object(C.a)({},e),{},{error:!!o,label:t,variant:"outlined"}))}}))},le=r(487);var ce=r(25),de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){return 0===e.orderId?(e.id=t,e.orderId=t):e.id=e.orderId,e.date?e.date=new Date(e.date):e.date=new Date,e}))},ue=function(){var e=Object(b.a)(m.a.mark((function e(t,r){var a,n,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={selectedNo:null,selectedCustomer:null,selectedEntrepreneur:null,selectedOperator:null,selectedEmployee:null,selectedStatus:null,selectedDateFrom:null,selectedDateTill:null,selectedPayDateFrom:null,selectedPayDateTill:null,selectedReceiver:null,selectedKind:null,selectedType:null,selectedDetails:""},n=Object(C.a)(Object(C.a)({},a),{},{selectedNo:null===t||void 0===t?void 0:t.selectedNo,selectedCustomer:null===t||void 0===t?void 0:t.selectedCustomer,selectedEntrepreneur:null===t||void 0===t?void 0:t.selectedEntrepreneur,selectedOperator:null===t||void 0===t?void 0:t.selectedOperator,selectedEmployee:null===t||void 0===t?void 0:t.selectedEmployee,selectedStatus:null===t||void 0===t?void 0:t.selectedStatus,selectedDateFrom:null===t||void 0===t?void 0:t.selectedDateFrom,selectedDateTill:null===t||void 0===t?void 0:t.selectedDateTill,selectedPayDateFrom:null===t||void 0===t?void 0:t.selectedPayDateFrom,selectedPayDateTill:null===t||void 0===t?void 0:t.selectedPayDateTill,selectedReceiver:null===t||void 0===t?void 0:t.selectedReceiver,selectedKind:null===t||void 0===t?void 0:t.selectedKind,selectedType:null===t||void 0===t?void 0:t.selectedType,selectedDetails:null===t||void 0===t?void 0:t.selectedDetails}),r.includes("ROLE_GROUNDFLOOR")&&(n.selectedType={typeId:7}),e.next=5,d.a.post("/api/orders/filter/",n);case 5:if(o=e.sent,!(i=o.data)){e.next=9;break}return e.abrupt("return",de(i));case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function me(e){e.m2=(e.width*e.height/1e6*e.amount).toFixed(3)||0}var be=function(e,t,r){e.price>0?t.shrink||r({shrink:!0}):t.shrink&&r({shrink:!1})},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){return 0===e.orderId?(e.id=t,e.customerId=t):e.id=e.customerId,e}))};var je=r(486),ve=r(481);var he=function(e){var t=e.open,r=e.onClose,n=e.message;return"success"===e.type?Object(a.jsx)(je.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:r,children:Object(a.jsx)(ve.a,{onClose:r,variant:"filled",severity:"success",children:n})}):Object(a.jsx)(je.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:r,children:Object(a.jsx)(ve.a,{onClose:r,variant:"filled",severity:"error",children:n})})},fe=function(e){var t=e.label,r=e.field,n=e.error,o=e.readonly,i=void 0!==o&&o,s=e.validator,l=e.numeric,c=void 0===l||l,d=e.phone,u=void 0!==d&&d,m=Object(te.a)(e,["label","field","error","readonly","validator","numeric","phone"]),b=m.form.setFieldValue,p=Object(X.f)().values,j=r.onChange,v=r.name;return Object(a.jsx)(ae.a,Object(C.a)(Object(C.a)(Object(C.a)({},m),r),{},{error:!!n,size:"small",variant:"outlined",autoComplete:"off",label:t,InputProps:{readOnly:i},onChange:function(e){c||j(e),(e.target.value.match(/^\d*\.?\d*$/)||0===e.target.value.length)&&j(e),s(v)},onKeyUp:function(e){if(c&&!u&&p.order){me(p.order);var t=0===p.order.m2?Math.ceil(p.order.price*p.order.amount+ +p.order.fees):Math.ceil(+p.order.m2*p.order.price+ +p.order.fees);t&&b("order.finalSum",t)}}}))},Oe={orderId:0,billNo:0,date:"",employee:{userID:60},entrepreneur:null,customer:null,orderType:null,orderKind:null,width:"",height:"",amount:"",m2:0,price:"",fees:"",finalSum:"",paySum:0,status:{id:1},comment:""},ge=r(415),xe=r(414),ye=function(e){var t=e.label,r=e.isChecked,n=Object(te.a)(e,["label","isChecked"]),o=Object(X.e)(n),i=Object(Q.a)(o,1)[0];return Object(a.jsx)(ge.a,{control:Object(a.jsx)(xe.a,Object(C.a)(Object(C.a)(Object(C.a)({},n),i),{},{checked:r,color:"primary"})),label:t})},we=Object(z.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},lock:{padding:0,width:"5px",backgroundColor:"white !important",minWidth:0,"&:hover":{backgroundColor:"white"}},svg:{fill:"rgba(0, 0, 0, 0.23)","&:hover":{fill:"black"}},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"}}})),Ce=ee.c({order:ee.c({entrepreneur:ee.c().required(),customer:ee.c().required(),orderType:ee.c().required(),orderKind:ee.c().required(),width:ee.b().lessThan(2e9).positive().min(0).required(),height:ee.b().lessThan(2e9).positive().min(0).required(),amount:ee.b().lessThan(2e9).positive().min(0).required(),price:ee.b().lessThan(2e9).positive().min(0).required(),fees:ee.b().lessThan(2e9).positive().min(0).required(),finalSum:ee.b().lessThan(2e9).positive().min(0).required(),comment:ee.d().trim().max(255).required()})});function Ne(){var e=we(),t=function(){var e=Object(Z.b)();return Object(le.a)((function(e){return d.a.post("/api/orders/",e.newOrder)}),{onMutate:function(t){me(t.newOrder),t.newOrder=de([t.newOrder],e.getQueryData(["orders",1,N]).length>0?e.getQueryData(["orders",1,N])[0].orderId+1:1)[0],e.setQueryData(["orders",1,N],[].concat(Object(ce.a)(e.getQueryData(["orders",1,N])),[t.newOrder]))},onSuccess:function(e,t){t.setStatus({success:!0,error:!1}),_.dispatch(h(Object(C.a)({},N),"main")),t.resetForm()},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),r=function(){var e=Object(Z.b)();return Object(le.a)((function(e){return d.a.get("/api/ce-links/"+e.customerId+"/"+e.entrepreneurId)}),{onSuccess:function(t,r){e.invalidateQueries("ce-links"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),i=function(){var e=Object(Z.b)();return Object(le.a)((function(e){return d.a.get("/api/cp-links/"+e.customerId+"/"+e.orderKindId+"/"+e.price)}),{onSuccess:function(t,r){e.invalidateQueries("cp-links"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),s=function(){var e=Object(Z.b)();return Object(le.a)((function(e){return d.a.put("/api/order-kinds/",e.orderKind)}),{onSuccess:function(t,r){e.invalidateQueries("orderTypes"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),l=Object(Z.b)(),c=Object(n.useState)({}),u=Object(Q.a)(c,2),m=u[0],b=u[1],p=o.a.useState({success:!1,error:!1}),j=Object(Q.a)(p,2),v=j[0],O=j[1],g=o.a.useState({success:!1,error:!1}),x=Object(Q.a)(g,2),y=x[0],w=x[1],S=o.a.useState({success:!1,error:!1}),k=Object(Q.a)(S,2),T=k[0],L=k[1],D=o.a.useState({success:!1,error:!1}),I=Object(Q.a)(D,2),E=I[0],F=I[1],P=function(){O({success:!1,error:!1}),w({success:!1,error:!1}),L({success:!1,error:!1}),F({success:!1,error:!1})},R=function(e,r){var a,n;a=e.isUrgently,n=e.order,a&&(.15*n.finalSum<10?n.finalSum=+n.finalSum+10:n.finalSum=Math.ceil(1.15*n.finalSum),n.comment="(\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e) "+n.comment),function(e,t){t.status=e?l.getQueryData("statuses").find((function(e){return 1===e.id})):l.getQueryData("statuses").find((function(e){return 2===e.id}))}(e.onAcceptance,e.order),t.mutate({newOrder:e.order,resetForm:e.clearFields?r:function(){},setStatus:O})};return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(X.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{order:Object(C.a)(Object(C.a)({},Oe),{},{employee:JSON.parse(localStorage.getItem("loggedUser"))}),onAcceptance:!1,clearFields:!0,isUrgently:!1},onSubmit:function(e,t){var r=t.resetForm;return R(e,r)},validationSchema:Ce,children:function(n){var o,c,d,u,p,j,v,g,x,y,S,k,T=n.values,D=n.errors,I=n.validateField,E=n.handleReset;return Object(a.jsxs)(X.b,{children:[be(T.order,m,b),Object(a.jsxs)("div",{className:"row__one",children:[Object(a.jsx)(X.a,{name:"order.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===D||void 0===D||null===(o=D.order)||void 0===o?void 0:o.entrepreneur,validator:I,component:se,disabled:t.isFetching,getName:function(e){return e.fullName||""},options:l.getQueryData("entrepreneurs")||[]}),Object(a.jsx)(q.a,{className:e.lock,disableRipple:!0,onClick:function(){return e=T.order.customer,t=T.order.entrepreneur,void(e&&t?r.mutate({customerId:e.customerId,entrepreneurId:t.entrepreneurId,setStatus:w}):w({success:!1,error:!0}));var e,t},children:Object(a.jsx)(H.a,{className:e.svg})}),Object(a.jsx)(X.a,{name:"order.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===D||void 0===D||null===(c=D.order)||void 0===c?void 0:c.customer,validator:I,component:se,setEntrepreneur:!0,setPrice:!0,sortKey:"selectedCustomer",sortPage:"main",action:f({}),disabled:t.isFetching,getName:function(e){return e.customerName||""},options:l.getQueryData("customers")||[]}),Object(a.jsx)(X.a,{name:"order.orderType",label:"\u0412\u0438\u0434",error:null===D||void 0===D||null===(d=D.order)||void 0===d?void 0:d.orderType,validator:I,component:se,disabled:t.isFetching,getName:function(e){return e.typeName||""},options:l.getQueryData("orderTypes")||[]}),Object(a.jsx)(X.a,{name:"order.orderKind",label:"\u0422\u0438\u043f",error:null===D||void 0===D||null===(u=D.order)||void 0===u?void 0:u.orderKind,validator:I,component:se,setPrice:!0,setDimensions:!0,disabled:t.isFetching,getName:function(e){return e.kindName||""},options:(null===(p=T.order.orderType)||void 0===p?void 0:p.orderKinds)||[]})]}),Object(a.jsxs)("div",{className:"row__two",children:[Object(a.jsx)(X.a,{name:"order.width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===D||void 0===D||null===(j=D.order)||void 0===j?void 0:j.width,validator:I,component:fe,disabled:t.isFetching}),Object(a.jsx)(q.a,{className:e.lock,disableRipple:!0,onClick:function(){return e=T.order.orderKind,t=T.order.width,r=T.order.height,void(e&&t&&r?(e.width=t,e.height=r,s.mutate({orderKind:e,setStatus:L})):L({success:!1,error:!0}));var e,t,r},children:Object(a.jsx)(V.a,{className:e.svg})}),Object(a.jsx)(X.a,{name:"order.height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===D||void 0===D||null===(v=D.order)||void 0===v?void 0:v.height,validator:I,component:fe,disabled:t.isFetching}),Object(a.jsx)(X.a,{name:"order.amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===D||void 0===D||null===(g=D.order)||void 0===g?void 0:g.amount,validator:I,component:fe,disabled:t.isFetching}),Object(a.jsx)(W.a,{id:"outlined",size:"small",variant:"outlined",value:(T.order.width*T.order.height/1e6*T.order.amount).toFixed(3)||0,endAdornment:Object(a.jsx)(G.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(a.jsx)(X.a,{name:"order.price",label:"\u0426\u0456\u043d\u0430",error:null===D||void 0===D||null===(x=D.order)||void 0===x?void 0:x.price,validator:I,InputLabelProps:m,component:fe,disabled:t.isFetching}),Object(a.jsx)(q.a,{className:e.lock,disableRipple:!0,onClick:function(){return e=T.order.customer,t=T.order.orderKind,r=T.order.price,void(e&&t&&r?i.mutate({customerId:e.customerId,orderKindId:t.kindId,price:r,setStatus:F}):F({success:!1,error:!0}));var e,t,r},children:Object(a.jsx)(J.a,{className:e.svg})}),Object(a.jsx)(X.a,{name:"order.fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===D||void 0===D||null===(y=D.order)||void 0===y?void 0:y.fees,validator:I,component:fe,disabled:t.isFetching}),Object(a.jsx)(X.a,{name:"order.finalSum",label:"\u0421\u0443\u043c\u0430",error:null===D||void 0===D||null===(S=D.order)||void 0===S?void 0:S.finalSum,validator:I,component:fe,disabled:t.isFetching})]}),Object(a.jsx)("div",{className:"row__three",children:Object(a.jsx)(X.a,{name:"order.comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===D||void 0===D||null===(k=D.order)||void 0===k?void 0:k.comment,validator:I,numeric:!1,component:fe,disabled:t.isFetching})}),Object(a.jsxs)("div",{className:"row__four",children:[Object(a.jsxs)("div",{className:"controls",children:[Object(a.jsx)(ye,{name:"onAcceptance",isChecked:T.onAcceptance,label:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456",disabled:t.isFetching}),Object(a.jsx)(ye,{name:"clearFields",isChecked:T.clearFields,label:"\u041e\u0447\u0438\u0449\u0430\u0442\u0438 \u043f\u043e\u043b\u044f",disabled:t.isFetching}),Object(a.jsx)(ye,{name:"isUrgently",isChecked:T.isUrgently,label:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e",disabled:t.isFetching})]}),Object(a.jsx)(q.a,{color:"primary",variant:"contained",disabled:t.isFetching,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(a.jsx)(q.a,{className:e.clear,onClick:function(e){return function(e,t){_.dispatch(h(Object(C.a)({},N),"main")),O(!0),t(e)}(e,E)},disabled:t.isFetching,variant:"contained",type:"button",children:Object(a.jsx)(Y.a,{})})]})]})}}),Object(a.jsx)(he,{type:"success",open:v.success,onClose:P,message:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e."}),Object(a.jsx)(he,{type:"error",open:v.error,onClose:P,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f."}),Object(a.jsx)(he,{type:"success",open:y.success,onClose:P,message:"\u0417\u0432'\u044f\u0437\u043e\u043a \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(a.jsx)(he,{type:"error",open:y.error,onClose:P,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0432'\u044f\u0437\u043a\u0443."}),Object(a.jsx)(he,{type:"success",open:T.success,onClose:P,message:"\u0420\u043e\u0437\u043c\u0456\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(a.jsx)(he,{type:"error",open:T.error,onClose:P,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0440\u043e\u0437\u043c\u0456\u0440\u0456\u0432."}),Object(a.jsx)(he,{type:"success",open:E.success,onClose:P,message:"\u0426\u0456\u043d\u0430 \u043f\u0440\u0438\u0432'\u044f\u0437\u0430\u043d\u0430."}),Object(a.jsx)(he,{type:"error",open:E.error,onClose:P,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0446\u0456\u043d\u0438."})]})}var Se=r(476),ke=Object(z.a)((function(){return{datepicker:{margin:0}}}));var Te=function(e){var t=e.label,r=e.validator,n=e.onTouch,o=void 0!==n&&n,i=Object(te.a)(e,["label","validator","onTouch"]),s=ke(),l=i.form.setFieldValue,c=Object(oe.a)(i),d=Object.assign({},c),u=d.name;return Object(a.jsx)(Se.a,Object(C.a)(Object(C.a)(Object(C.a)({},i),d),{},{autoOk:!0,autoComplete:"off",helperText:"",className:s.datepicker,inputVariant:"outlined",variant:"inline",format:"dd/MM/yyyy",margin:"normal",label:t,onChange:function(e){l(u,e),o&&o(!0),r&&r(u)},KeyboardButtonProps:{"aria-label":"change date"}}))},Le=(r(397),Object(z.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},button:{width:"16rem",justifySelf:"center"},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"}}}))),De=ee.c({sort:ee.c({selectedCustomer:ee.c().nullable(),selectedStatus:ee.c().nullable(),selectedDateFrom:ee.a().nullable(),selectedDateTill:ee.a().nullable(),selectedKind:ee.c().nullable(),selectedType:ee.c().nullable(),selectedDetails:ee.d().trim().max(255).nullable()})});var _e=function(){var e=Le(),t=Object(l.b)(),r=Object(Z.b)(),n=Object(l.c)((function(e){return e.auth}));return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(X.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{sort:N,showUserOrders:!1},onSubmit:function(e){e.showUserOrders?e.sort.selectedEmployee=n.loggedUser:e.sort.selectedEmployee=null,e.sort.selectedDetails=e.sort.selectedDetails.trim(),t(h(e.sort,"sort"))},validationSchema:De,children:function(n){var o,i=n.values,s=n.errors,l=n.handleReset,c=n.validateField;return Object(a.jsxs)(X.b,{children:[Object(a.jsxs)("div",{className:"sort__row__one",children:[Object(a.jsx)(X.a,{name:"sort.selectedCustomer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===s||void 0===s?void 0:s.customer,component:se,validator:c,getName:function(e){return e.customerName||""},options:r.getQueryData("customers")||[]}),Object(a.jsx)(X.a,{name:"sort.selectedType",label:"\u0412\u0438\u0434",error:null===s||void 0===s?void 0:s.orderType,component:se,validator:c,getName:function(e){return e.typeName||""},options:r.getQueryData("orderTypes")||[]}),Object(a.jsx)(X.a,{name:"sort.selectedKind",label:"\u0422\u0438\u043f",error:null===s||void 0===s?void 0:s.orderKind,component:se,validator:c,getName:function(e){return e.kindName||""},options:(null===(o=i.sort.selectedType)||void 0===o?void 0:o.orderKinds)||[]})]}),Object(a.jsxs)("div",{className:"sort__row__two",children:[Object(a.jsxs)("div",{className:"datepickers",children:[Object(a.jsx)(X.a,{component:Te,label:"\u0412\u0456\u0434",name:"sort.selectedDateFrom"}),Object(a.jsx)(X.a,{component:Te,label:"\u0414\u043e",name:"sort.selectedDateTill"})]}),Object(a.jsx)(X.a,{name:"sort.selectedStatus",label:"\u0421\u0442\u0430\u0442\u0443\u0441",error:null===s||void 0===s?void 0:s.selectedStatus,component:se,validator:c,getName:function(e){return e.name||""},options:r.getQueryData("statuses")||[]}),Object(a.jsx)(X.a,{name:"sort.selectedDetails",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===s||void 0===s?void 0:s.selectedDetails,numeric:!1,component:fe,validator:c})]}),Object(a.jsxs)("div",{className:"sort__row__three",children:[Object(a.jsx)(ye,{name:"showUserOrders",isChecked:i.showUserOrders,label:"\u041b\u0438\u0448\u0435 \u043c\u043e\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(a.jsx)(q.a,{color:"primary",variant:"contained",className:e.button,type:"submit",children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u0442\u0438"}),Object(a.jsx)(q.a,{className:e.clear,onClick:function(e){return function(e,r){t(h(Object(C.a)({},N),"sort")),r(e)}(e,l)},variant:"contained",type:"button",children:Object(a.jsx)(Y.a,{})})]})]})}})})},Ie=function(e){var t=e.name,r=e.label,n=e.field,i=e.error,s=e.validator,l=(e.value,Object(te.a)(e,["name","label","field","error","validator","value"])),c=n.onChange,d=Object(X.f)(),u=d.values.payment,m=d.setFieldValue;return o.a.useEffect((function(){var e;u.paymentType?m("payment.percentage",null===(e=u.paymentType)||void 0===e?void 0:e.paymentPercentage):m("payment.percentage",0)}),[u.paymentType,m]),Object(a.jsx)(ae.a,Object(C.a)(Object(C.a)(Object(C.a)({},l),n),{},{error:!!i,id:"metrics",size:"small",variant:"outlined",autoComplete:"off",label:r,onChange:function(e){(e.target.value.match(/^\d*\.?\d*$/)||0===e.target.value.length)&&(m("payment.percentage",e.target.value),c(e)),s(t)}}))};var Ee=r(482),Fe=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/customers/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/entrepreneurs/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/order-types/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/orders/statuses/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/payments/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/ce-links/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/cp-links/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Be={entrepreneur:null,customer:null,paymentDate:null,sum:0,percentage:0,paymentType:null},qe=Object(z.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},row__one:{display:"grid",gridColumnGap:"20px",gridTemplateColumns:"1fr 2fr",margin:".5rem auto 1rem auto"},row__two:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 0.05fr 1fr 1fr",margin:"1rem auto","& .MuiOutlinedInput-input":{padding:"8px 8px"},"& .MuiInputLabel-outlined":{transform:"translate(14px, 10px) scale(1)"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& .MuiAutocomplete-endAdornment":{top:"initial",right:"11px !important"}},button:{gridColumn:2,width:"16rem",height:"2.375rem",justifySelf:"center"},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"},lock:{padding:0,width:"100%",backgroundColor:"white !important",minWidth:0,"&:hover":{backgroundColor:"white"}},svg:{fill:"rgba(0, 0, 0, 0.23)","&:hover":{fill:"black"}},successInfo:{display:"flex"},successText:{margin:"auto .5rem",color:"#27A637"},errorInfo:{display:"flex"},errorText:{margin:"auto .5rem",color:"#d2000a"},errorSvg:{fontSize:"2.54rem",fill:"#d2000a"},successSvg:{fontSize:"2.54rem",fill:"#27A637"}}})),Ue=ee.c({payment:ee.c({entrepreneur:ee.c().nullable(),customer:ee.c().required(),paymentDate:ee.a().required(),sum:ee.b().lessThan(2e9).positive().required(),percentage:ee.b().lessThan(2e9).positive().min(0).required(),paymentType:ee.c().required()})});var Ge=function(){var e=qe(),t=Object(Z.b)(),r=function(){var e=Object(Z.b)();return Object(le.a)((function(e){return d.a.post("/api/payments/",e.payment)}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(t,r){r.setStatus({success:!0,error:!1}),e.invalidateQueries(["orders"]),r.payment.sum=0}})}(),n=Object(Ee.a)("paymentMethods",Ae,{initialData:[],initialStale:!0,keepPreviousData:!0}),i=function(){var e=Object(Z.b)();return Object(le.a)((function(e){return d.a.put("/api/payments/types/",e.paymentMethod)}),{onSuccess:function(t,r){e.invalidateQueries("paymentMethods"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),s=o.a.useState({success:!1,error:!1}),l=Object(Q.a)(s,2),c=l[0],u=l[1],m=o.a.useState({success:!1,error:!1}),b=Object(Q.a)(m,2),p=b[0],j=b[1],v=function(){u({success:!1,error:!1}),j({success:!1,error:!1})};return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(X.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{payment:Object(C.a)(Object(C.a)({},Be),{},{paymentDate:new Date})},validationSchema:Ue,onSubmit:function(e){e.payment.receiver=e.payment.paymentType.typeName,r.mutate({payment:e.payment,setStatus:u})},children:function(o){var s,l,c,d,u,m=o.values,b=o.errors,p=o.handleReset,v=o.validateField;return Object(a.jsxs)(X.b,{style:{margin:"0 auto"},children:[Object(a.jsxs)("div",{className:e.row__one,children:[Object(a.jsx)(X.a,{name:"payment.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===b||void 0===b||null===(s=b.payment)||void 0===s?void 0:s.entrepreneur,validator:v,component:se,sortKey:"selectedEntrepreneur",sortPage:"payment",disabled:r.isLoading,getName:function(e){return e.fullName||""},options:t.getQueryData("entrepreneurs")||[]}),Object(a.jsx)(X.a,{name:"payment.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===b||void 0===b||null===(l=b.payment)||void 0===l?void 0:l.customer,component:se,validator:v,sortKey:"selectedCustomer",sortPage:"payment",disabled:r.isLoading,getName:function(e){return e.customerName||""},options:t.getQueryData("customers")||[]})]}),Object(a.jsxs)("div",{className:e.row__two,children:[Object(a.jsx)(X.a,{component:Te,label:"\u0414\u0430\u0442\u0430",name:"payment.paymentDate",validator:v,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"payment.paymentType",label:"\u0422\u0438\u043f \u043e\u043f\u043b\u0430\u0442\u0438",error:null===b||void 0===b||null===(c=b.payment)||void 0===c?void 0:c.paymentType,component:se,validator:v,disabled:r.isLoading,getName:function(e){return e.typeName||""},options:(null===n||void 0===n?void 0:n.data)||[]}),Object(a.jsx)(q.a,{className:e.lock,disableRipple:!0,onClick:function(){return e=m.payment.paymentType,t=m.payment.percentage,e.paymentPercentage=t,void i.mutate({paymentMethod:e,setStatus:j});var e,t},children:Object(a.jsx)(V.a,{className:e.svg})}),Object(a.jsx)(X.a,{name:"payment.percentage",label:"\u0412\u0456\u0434\u0441\u043e\u0442\u043e\u043a",error:null===b||void 0===b||null===(d=b.payment)||void 0===d?void 0:d.percentage,validator:v,component:Ie,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"payment.sum",label:"\u0421\u0443\u043c\u0430",error:null===b||void 0===b||null===(u=b.payment)||void 0===u?void 0:u.sum,validator:v,component:fe,disabled:r.isLoading})]}),Object(a.jsxs)("div",{className:"sort__row__three",children:[Object(a.jsx)(q.a,{color:"primary",variant:"contained",disabled:r.isLoading,className:e.button,type:"submit",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"}),Object(a.jsx)(q.a,{className:e.clear,onClick:function(e){return function(e,t){_.dispatch(h(Object(C.a)({},N),"payment")),t(e)}(e,p)},disabled:r.isLoading,variant:"contained",type:"button",children:Object(a.jsx)(Y.a,{})})]})]})}}),Object(a.jsx)(he,{type:"success",open:c.success,onClose:v,message:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u043d\u0435\u0441\u0435\u043d\u0430."}),Object(a.jsx)(he,{type:"error",open:c.error,onClose:v,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u0456 \u043e\u043f\u043b\u0430\u0442\u0438."}),Object(a.jsx)(he,{type:"success",open:p.success,onClose:v,message:"\u0417\u0432'\u044f\u0437\u043e\u043a \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u0439."}),Object(a.jsx)(he,{type:"error",open:p.error,onClose:v,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0432'\u044f\u0437\u043a\u0443."})]})},We=r(467);r(222);function ze(){var e=Object(n.useState)(0),t=Object(Q.a)(e,2),r=t[0],o=t[1],i=Object(Z.b)(),s=Object(l.b)(),c=Object(We.a)(),d=Object(l.c)((function(e){return e.auth})),u=Object(l.c)((function(e){return e.sortSelections})),m=function(e){return o(r===e?0:e)};return Object(a.jsx)(B.a,{elevation:2,children:Object(a.jsxs)("div",{className:"action_bar_container",children:[Object(a.jsxs)("div",{className:"action__bar",children:[Object(a.jsx)("div",{className:"action__bar__info",children:function(){var e,t,r,n,o,i,s;if(u[u.active].selectedCustomer)return(null===(e=u[u.active].selectedCustomer)||void 0===e?void 0:e.debtor)?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(K.a,{variant:"subtitle1",children:[Object(a.jsx)("img",{className:"debtor-mark",src:"img/Blackmark.svg",width:"19",height:"19",alt:"blackmark"})," ",Object(a.jsx)("strong",{children:null===(t=u[u.active].selectedCustomer)||void 0===t?void 0:t.customerName})," ",null===(r=u[u.active].selectedCustomer)||void 0===r?void 0:r.customerGroup,":"," ",null===(n=u[u.active].selectedCustomer)||void 0===n?void 0:n.info]})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(K.a,{variant:"subtitle1",children:[Object(a.jsx)("strong",{children:null===(o=u[u.active].selectedCustomer)||void 0===o?void 0:o.customerName})," ",null===(i=u[u.active].selectedCustomer)||void 0===i?void 0:i.customerGroup,":"," ",null===(s=u[u.active].selectedCustomer)||void 0===s?void 0:s.info]})})}()}),Object(a.jsxs)("div",{className:"action__bar__button",children:[!d.roles.includes("ROLE_GROUNDFLOOR")&&Object(a.jsx)(q.a,{variant:"contained",color:"primary",onClick:function(){return m(1)},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(a.jsx)(q.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",onClick:function(){return m(2)},children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}),!d.roles.includes("ROLE_GROUNDFLOOR")&&Object(a.jsx)(q.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",onClick:function(){return m(3)},children:"\u0412\u043d\u0435\u0441\u0442\u0438 \u043e\u043f\u043b\u0430\u0442\u0443"})]})]}),Object(a.jsx)(U.a,{in:1===r,timeout:"auto",onEntered:function(){i.invalidateQueries("customers"),i.invalidateQueries("ce-links"),i.invalidateQueries("cp-links"),c||s(v("main"))},children:Object(a.jsx)(Ne,{})}),Object(a.jsx)(U.a,{in:2===r,timeout:"auto",onEntered:function(){i.invalidateQueries("customers"),i.invalidateQueries("statuses"),c||s(v("sort"))},children:Object(a.jsx)(_e,{})}),Object(a.jsx)(U.a,{in:3===r,timeout:"auto",onEntered:function(){i.invalidateQueries("customers"),c||s(v("payment"))},children:Object(a.jsx)(Ge,{})})]})})}r(398);function He(){return Object(a.jsx)(B.a,{elevation:2,children:Object(a.jsx)("div",{className:"action_bar_container",children:Object(a.jsx)("div",{className:"action__bar",children:Object(a.jsx)("div",{className:"action__bar__button",children:Object(a.jsx)(q.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",children:"EXCEL"})})})})})}var Ve=r(469),Je=r(147),$e=(r(401),function(e){return window.innerWidth*e/100}),Ye=[{field:"customerName",headerName:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430",width:$e(15),renderCell:function(e){return Object(a.jsx)(Ve.a,{className:"name-link",onClick:function(){return _.dispatch(f(e.row))},children:Object(a.jsx)("b",{children:e.value})})}},{field:"debtor",headerName:"\u0411\u043e\u0440\u0436\u043d\u0438\u043a",width:$e(6.5),cellClassName:"centered",renderCell:function(e){return e.value?Object(a.jsx)("img",{src:"img/Blackmark.svg",width:"19",height:"19",alt:"blackmark"}):Object(a.jsx)("div",{})}},{field:"customerGroup",headerName:"\u0413\u0440\u0443\u043f\u0430",width:$e(10)},{field:"firstPerson",headerName:"\u041e\u0441\u043e\u0431\u0430 1",width:$e(10)},{field:"firstPhone",headerName:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d 1",width:$e(10)},{field:"firstEmail",headerName:"Email 1",width:$e(15)},{field:"city",headerName:"\u041c\u0456\u0441\u0442\u043e",width:$e(8)},{field:"info",headerName:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",width:$e(20)}];function Xe(){var e,t=Object(Z.b)(),r=Object(n.useState)(""),o=Object(Q.a)(r,2),i=o[0],s=o[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ae.a,{variant:"outlined",size:"small",placeholder:"\u0428\u0432\u0438\u0434\u043a\u0438\u0439 \u043f\u043e\u0448\u0443\u043a",onChange:function(e){return s(e.target.value)}}),Object(a.jsx)(B.a,{elevation:4,className:"x-grid",children:Object(a.jsx)("div",{className:"frame",children:Object(a.jsx)("div",{className:"grid-holder",children:Object(a.jsx)(Je.a,{className:"customers-grid",rows:(e=pe(t.getQueryData("customers")||[]),e.filter((function(e){var t,r,a,n,o,s,l;return(null===(t=e.customerName)||void 0===t?void 0:t.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(r=e.customerGroup)||void 0===r?void 0:r.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(a=e.firstPerson)||void 0===a?void 0:a.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(n=e.firstPhone)||void 0===n?void 0:n.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(o=e.firstEmail)||void 0===o?void 0:o.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(s=e.city)||void 0===s?void 0:s.toString().toLowerCase().indexOf(i.toLowerCase()))>-1||(null===(l=e.info)||void 0===l?void 0:l.toString().toLowerCase().indexOf(i.toLowerCase()))>-1}))),columns:Ye,sortModel:[{field:"customerName",sort:"asc"}],loading:t.isFetching("customers"),rowHeight:35,headerHeight:35,pagination:!0,disableSelectionOnClick:!0})})})})]})}var Ze=r(465),et=r(416),tt=r(420);var rt=Object(z.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4),width:"40%","& .MuiOutlinedInput-inputMarginDense":{padding:"8px !important"}},link:{cursor:"pointer",color:e.palette.primary.main},h2:{textAlign:"center",fontWeight:"400",marginBottom:"1rem"},buttons:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},clearButton:{backgroundColor:"rgb(210,0,10)",color:"white",marginRight:"1rem","&:hover":{backgroundColor:"rgb(190,0,10)"}},rowOne:{gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr 1fr 1fr",gridColumnGap:"15px",gridRowGap:"10px"},rowTwo:{gridTemplateRows:"1fr 1fr 1fr",gridTemplateColumns:"1fr 1fr 1fr",gridRowGap:"10px"},longTextField:{gridColumnStart:1,gridColumnEnd:3},billNo:{gridColumn:4},switchHolder:{gridColumn:3,justifySelf:"end","& .MuiFormControlLabel-root":{margin:0}},auxiliaryRow:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",margin:"2rem auto 1rem auto","& .MuiOutlinedInput-input":{padding:"8px"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& #date-picker-inline-label":{transform:"translate(14px, 10px) scale(1)"}}}})),at=ee.c({customer:ee.c({customerName:ee.d().required(),customerGroup:ee.d().nullable(),city:ee.d().nullable(),info:ee.d().nullable(),firstPerson:ee.d().trim().max(25).nullable(),firstPhone:ee.d().max(10).min(10).nullable(),firstEmail:ee.d().email().nullable(),secondPerson:ee.d().trim().max(25).nullable(),secondPhone:ee.d().max(10).min(10).nullable(),secondEmail:ee.d().email().nullable(),thirdPerson:ee.d().trim().max(25).nullable(),thirdPhone:ee.d().max(10).min(10).nullable(),thirdEmail:ee.d().email().nullable()})});function nt(){var e=rt(),t=Object(l.c)((function(e){return e.showCustomerModal})),r=function(){var e=Object(Z.b)(),t=Object(l.b)();return Object(le.a)((function(e){return 0===e.customer.customerId?d.a.post("/api/customers/",e.customer):d.a.put("/api/customers/",e.customer)}),{onSuccess:function(r,a){e.invalidateQueries("customers"),t(O()),a.setStatus({success:!0,error:!1})},onError:function(e,t){console.log(e),t.setStatus({success:!1,error:!0})}})}(),n=Object(l.b)(),i=o.a.useState({success:!1,error:!1}),s=Object(Q.a)(i,2),c=s[0],u=s[1],m=function(){u({success:!1,error:!1})};return Object(a.jsxs)("div",{children:[Object(a.jsx)(tt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:t.show,onClose:function(){return n(O())},closeAfterTransition:!0,BackdropComponent:Ze.a,BackdropProps:{timeout:500},children:Object(a.jsx)(et.a,{in:t.show,children:Object(a.jsx)("div",{className:e.paper,children:Object(a.jsx)(X.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{customer:t.customer},onSubmit:function(e){r.mutate({customer:e.customer,setStatus:u})},validationSchema:at,children:function(n){var o,i,s,l,c,d,u,m,b,p,j,v,h,f=n.values,O=n.errors,g=n.validateField;return Object(a.jsxs)(X.b,{children:[Object(a.jsx)(K.a,{className:e.h2,component:"h2",variant:"h5",children:f.customer.customerName?t.customer.customerName:"\u041d\u043e\u0432\u0438\u0439 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a"}),Object(a.jsxs)("div",{className:"".concat(e.rowOne," row__one"),children:[Object(a.jsx)(X.a,{className:e.longTextField,name:"customer.customerName",label:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430",error:null===O||void 0===O||null===(o=O.customer)||void 0===o?void 0:o.customerName,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.customerGroup",label:"\u0413\u0440\u0443\u043f\u0430",error:null===O||void 0===O||null===(i=O.customer)||void 0===i?void 0:i.customerGroup,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{className:e.longTextField,name:"customer.info",label:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430",error:null===O||void 0===O||null===(s=O.customer)||void 0===s?void 0:s.info,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.city",label:"\u041c\u0456\u0441\u0442\u043e",error:null===O||void 0===O||null===(l=O.customer)||void 0===l?void 0:l.city,validator:g,component:fe,numeric:!1,disabled:r.isLoading})]}),Object(a.jsxs)("div",{className:"".concat(e.rowTwo," row__two"),children:[Object(a.jsx)(X.a,{name:"customer.firstPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 1",error:null===O||void 0===O||null===(c=O.customer)||void 0===c?void 0:c.firstPerson,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.firstPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===O||void 0===O||null===(d=O.customer)||void 0===d?void 0:d.firstPhone,validator:g,component:fe,phone:!0,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.firstEmail",label:"Email",error:null===O||void 0===O||null===(u=O.customer)||void 0===u?void 0:u.firstEmail,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.secondPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 2",error:null===O||void 0===O||null===(m=O.customer)||void 0===m?void 0:m.secondPerson,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.secondPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===O||void 0===O||null===(b=O.customer)||void 0===b?void 0:b.secondPhone,validator:g,component:fe,phone:!0,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.secondEmail",label:"Email",error:null===O||void 0===O||null===(p=O.customer)||void 0===p?void 0:p.secondEmail,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.thirdPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 3",error:null===O||void 0===O||null===(j=O.customer)||void 0===j?void 0:j.thirdPerson,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.thirdPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===O||void 0===O||null===(v=O.customer)||void 0===v?void 0:v.thirdPhone,validator:g,component:fe,phone:!0,disabled:r.isLoading}),Object(a.jsx)(X.a,{name:"customer.thirdEmail",label:"Email",error:null===O||void 0===O||null===(h=O.customer)||void 0===h?void 0:h.thirdEmail,validator:g,component:fe,numeric:!1,disabled:r.isLoading})]}),Object(a.jsxs)("div",{className:e.buttons,children:[Object(a.jsx)(q.a,{style:{gridColumn:2},color:"primary",variant:"contained",className:e.button,disabled:r.isLoading,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430"}),f.customer.customerId&&Object(a.jsx)("div",{className:e.switchHolder,children:Object(a.jsx)(ye,{name:"customer.debtor",label:"\u0411\u043e\u0440\u0436\u043d\u0438\u043a",isChecked:f.customer.debtor,disabled:r.isLoading})})]})]})}})})})}),Object(a.jsx)(he,{type:"success",open:c.success,onClose:m,message:"\u0417\u0430\u043c\u043e\u0432\u0438\u043d\u043a\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(a.jsx)(he,{type:"error",open:c.error,onClose:m,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430."})]})}var ot=r(470),it=r(471),st=r(480),lt=r(466),ct=(r(402),Object(z.a)((function(){return{root:{flexGrow:1},logoutButton:{padding:0},logoutHolder:{display:"flex",justifyContent:"flex-end"},tabs:{margin:"0 auto",cursor:"pointer"}}})));function dt(){var e=ct(),t=Object(A.g)(),r=Object(Z.b)(),n=o.a.useState(0),i=Object(Q.a)(n,2),s=i[0],l=i[1];return Object(a.jsx)(B.a,{elevation:2,children:Object(a.jsx)("div",{className:"header__container",children:Object(a.jsx)(ot.a,{position:"static",children:Object(a.jsxs)(lt.a,{children:[Object(a.jsx)(Ve.a,{color:"inherit",href:"https://psdruk.com.ua/",children:Object(a.jsx)("img",{width:"110",height:"50",src:"/img/logo.svg",alt:"logo"})}),Object(a.jsxs)(st.a,{className:e.tabs,value:s,onChange:function(e,a){switch(l(a),a){case 0:t.push("/");break;case 1:r.invalidateQueries("customers"),t.push("/clients")}},TabIndicatorProps:{style:{background:"white"}},indicatorColor:"secondary","aria-label":"scrollable auto tabs example",children:[Object(a.jsx)(it.a,{label:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),Object(a.jsx)(it.a,{label:"\u041a\u043b\u0456\u0454\u043d\u0442\u0438"})]}),Object(a.jsxs)("div",{className:e.logoutHolder,children:[Object(a.jsxs)(K.a,{variant:"body1",style:{fontWeight:300},children:["\u0412\u0456\u0442\u0430\u0454\u043c\u043e, ",Object(a.jsx)("b",{children:localStorage.getItem("username")})]}),Object(a.jsx)(q.a,{color:"inherit",onClick:function(){x(),t.push("/login")},className:e.logoutButton,children:"\u0412\u0438\u0439\u0442\u0438"})]})]})})})})}var ut=r(484),mt=r(477),bt=r(472),pt=r(473),jt=r(474),vt=r(234),ht=r.n(vt);function ft(){return Object(a.jsxs)(K.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Ve.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"}),(new Date).getFullYear(),"."]})}var Ot=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function gt(){var e=Ot(),t=Object(A.g)(),r=Object(l.b)(),o=Object(n.useState)({username:"",password:""}),i=Object(Q.a)(o,2),s=i[0],c=i[1],d=Object(n.useState)(!1),u=Object(Q.a)(d,2),m=u[0],b=u[1];return Object(a.jsxs)(bt.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(pt.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(ut.a,{className:e.avatar,children:Object(a.jsx)(ht.a,{})}),Object(a.jsx)(K.a,{component:"h1",variant:"h5",children:"\u0412\u0445\u0456\u0434"}),Object(a.jsxs)("form",{className:e.form,onSubmit:function(e){e.preventDefault(),g(s).then((function(e){e.roles.includes("ROLE_CUSTOMER")?b(!0):(r(j(e.token,e.employee,e.username,e.roles)),t.push("/"))}))},children:[Object(a.jsx)(ae.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return c(Object(C.a)(Object(C.a)({},s),{},{username:e.target.value}))},label:"\u041b\u043e\u0433\u0456\u043d",name:"email",autoComplete:"off",autoFocus:!0}),Object(a.jsx)(ae.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",onChange:function(e){return c(Object(C.a)(Object(C.a)({},s),{},{password:e.target.value}))},autoComplete:"off"}),Object(a.jsx)(q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"\u0412\u0445\u0456\u0434"}),Object(a.jsxs)(jt.a,{container:!0,children:[Object(a.jsx)(jt.a,{item:!0,xs:!0,children:Object(a.jsx)(Ve.a,{href:"http://plg-site.32server.in.ua/",variant:"body2",children:"\u0417\u0430\u0431\u0443\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),Object(a.jsx)(jt.a,{item:!0,children:Object(a.jsx)(Ve.a,{href:"http://plg-site.32server.in.ua/",variant:"body2",children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c"})})]})]})]}),Object(a.jsx)(mt.a,{mt:8,children:Object(a.jsx)(ft,{})}),Object(a.jsx)(he,{type:"error",open:m,onClose:function(){b(!1)},message:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u0449\u0435 \u043d\u0435 \u043f\u0440\u043e\u0439\u0448\u043e\u0432 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0443."})]})}var xt=r(246),yt=Object(z.a)((function(e){return{arrow:{color:e.palette.primary.main},tooltip:{fontSize:12,backgroundColor:e.palette.primary.main}}}));var wt=function(e){var t=e.title,r=(e.value,e.placement),n=void 0===r?"right-start":r,o=e.children,i=Object(te.a)(e,["title","value","placement","children"]),s=yt();return Object(a.jsx)(xt.a,Object(C.a)(Object(C.a)({title:t,placement:n,arrow:!0,classes:s},i),{},{children:Object(a.jsx)("div",{className:"value",style:{lineHeight:"1.43"},children:o})}))},Ct=Object(z.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4),width:"55%"},link:{cursor:"pointer",color:e.palette.primary.main},h2:{top:"-.9rem",position:"relative",marginTop:0,textAlign:"center",fontWeight:"400",gridColumnEnd:4,gridColumnStart:2},buttons:{display:"flex",justifyContent:"flex-end"},clearButton:{backgroundColor:"rgb(210,0,10)",color:"white",marginRight:"1rem","&:hover":{backgroundColor:"rgb(190,0,10)"}},rowOne:{gridTemplateColumns:"1fr 1fr 1fr 1fr"},rowTwo:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr 1fr"},billNo:{gridColumn:4},auxiliaryRow:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",margin:"2rem auto 1rem auto","& .MuiOutlinedInput-input":{padding:"8px"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& #date-picker-inline-label":{transform:"translate(14px, 10px) scale(1)"}}}})),Nt=ee.c({order:ee.c({entrepreneur:ee.c().required(),customer:ee.c().required(),date:ee.a().required(),orderType:ee.c().required(),orderKind:ee.c().required(),billNo:ee.b().lessThan(2e9).positive().min(0),width:ee.b().lessThan(2e9).positive().min(0).required(),height:ee.b().lessThan(2e9).positive().min(0).required(),amount:ee.b().lessThan(2e9).positive().min(0).required(),price:ee.b().lessThan(2e9).positive().min(0).required(),fees:ee.b().lessThan(2e9).positive().min(0).required(),finalSum:ee.b().lessThan(2e9).positive().min(0).required(),comment:ee.d().trim().max(255).required()})});function St(e){var t=e.order,r=Ct(),n=o.a.useState(!1),i=Object(Q.a)(n,2),s=i[0],l=i[1],c=function(){var e=null,t=Object(Z.b)();return Object(le.a)((function(e){return d.a.put("/api/orders/",e.order)}),{onMutate:function(r){t.getQueryCache().findAll(["orders",1]).forEach((function(a){t.setQueryData(a.queryKey,a.state.data.map((function(t){return t.orderId===r.order.orderId?(e=t,r.order):t})))}))},onError:function(r){t.getQueryCache().findAll(["orders",1]).forEach((function(r){t.setQueryData(r.queryKey,r.state.data.map((function(t){return t.orderId===e.orderId?e:t})))}))},onSuccess:function(e,r){t.invalidateQueries(["orders"]),r.toggleModal()}})}(),u=Object(Z.b)(),m=function(){return l(!s)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(wt,{title:t.employee.name,children:Object(a.jsx)(Ve.a,{className:r.link,onClick:m,children:Object(a.jsx)("b",{children:t.orderId})})}),Object(a.jsx)(tt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.modal,open:s,onClose:m,closeAfterTransition:!0,BackdropComponent:Ze.a,BackdropProps:{timeout:500},children:Object(a.jsx)(et.a,{in:s,children:Object(a.jsx)("div",{className:r.paper,children:Object(a.jsx)(X.c,{validateOnChange:!0,validateOnMount:!1,validateOnBlur:!1,initialValues:{order:t},onSubmit:function(e){c.mutate({order:e.order,toggleModal:m})},validationSchema:Nt,children:function(e){var n,o,i,s,l,d,m,b,p,j,v,h,f,O,g,x=e.values,y=e.errors,w=e.validateField;return Object(a.jsxs)(X.b,{children:[Object(a.jsxs)("div",{className:r.auxiliaryRow,children:[Object(a.jsx)(X.a,{component:Te,label:"\u0414\u0430\u0442\u0430",name:"order.date",error:null===y||void 0===y||null===(n=y.order)||void 0===n?void 0:n.date,validator:w,disabled:c.isLoading}),Object(a.jsxs)(K.a,{className:r.h2,component:"h2",variant:"h5",children:["\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044f \u2116 ",Object(a.jsx)("b",{children:t.orderId})]}),Object(a.jsx)(X.a,{className:r.billNo,name:"order.billNo",label:"\u2116 \u0420\u0430\u0445\u0443\u043d\u043a\u0443",error:null===y||void 0===y||null===(o=y.order)||void 0===o?void 0:o.billNo,validator:w,component:fe,disabled:c.isLoading})]}),Object(a.jsxs)("div",{className:"".concat(r.rowOne," row__one"),children:[Object(a.jsx)(X.a,{name:"order.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===y||void 0===y||null===(i=y.order)||void 0===i?void 0:i.entrepreneur,validator:w,component:se,disabled:c.isLoading,getName:function(e){return e.fullName||""},options:u.getQueryData("entrepreneurs")}),Object(a.jsx)(X.a,{name:"order.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===y||void 0===y||null===(s=y.order)||void 0===s?void 0:s.customer,validator:w,component:se,disabled:c.isLoading,getName:function(e){return e.customerName||""},options:u.getQueryData("customers")}),Object(a.jsx)(X.a,{name:"order.orderType",label:"\u0412\u0438\u0434",error:null===y||void 0===y||null===(l=y.order)||void 0===l?void 0:l.orderType,validator:w,component:se,disabled:c.isLoading,getName:function(e){return e.typeName||""},options:u.getQueryData("orderTypes")}),Object(a.jsx)(X.a,{name:"order.orderKind",label:"\u0422\u0438\u043f",error:null===y||void 0===y||null===(d=y.order)||void 0===d?void 0:d.orderKind,validator:w,component:se,disabled:c.isLoading,getName:function(e){return e.kindName||""},options:(null===(m=x.orderType)||void 0===m?void 0:m.orderKinds)||[]})]}),Object(a.jsxs)("div",{className:"".concat(r.rowTwo," row__two"),children:[Object(a.jsx)(X.a,{name:"order.width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===y||void 0===y||null===(b=y.order)||void 0===b?void 0:b.width,validator:w,component:fe,disabled:c.isLoading}),Object(a.jsx)(X.a,{name:"order.height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===y||void 0===y||null===(p=y.order)||void 0===p?void 0:p.height,validator:w,component:fe,disabled:c.isLoading}),Object(a.jsx)(X.a,{name:"order.amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===y||void 0===y||null===(j=y.order)||void 0===j?void 0:j.amount,validator:w,component:fe,disabled:c.isLoading}),Object(a.jsx)(W.a,{id:"metrics",size:"small",variant:"outlined",value:(x.order.width*x.order.height/1e6*x.order.amount).toFixed(3)||0,endAdornment:Object(a.jsx)(G.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(a.jsx)(X.a,{name:"order.price",label:"\u0426\u0456\u043d\u0430",error:null===y||void 0===y||null===(v=y.order)||void 0===v?void 0:v.price,validator:w,component:fe,disabled:c.isLoading}),Object(a.jsx)(X.a,{name:"order.fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===y||void 0===y||null===(h=y.order)||void 0===h?void 0:h.fees,validator:w,component:fe,disabled:c.isLoading}),Object(a.jsx)(X.a,{name:"order.finalSum",label:"\u0421\u0443\u043c\u0430",error:null===y||void 0===y||null===(f=y.order)||void 0===f?void 0:f.finalSum,validator:w,component:fe,disabled:c.isLoading})]}),Object(a.jsx)("div",{className:"row__three",children:Object(a.jsx)(X.a,{name:"order.comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===y||void 0===y||null===(O=y.order)||void 0===O?void 0:O.comment,validator:w,numeric:!1,component:fe,disabled:c.isLoading})}),Object(a.jsx)("div",{className:"row__three",children:Object(a.jsx)(X.a,{name:"order.payLog",label:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u043f\u043b\u0430\u0442",error:null===y||void 0===y||null===(g=y.order)||void 0===g?void 0:g.payLog,validator:w,numeric:!1,multiline:!0,component:fe,readonly:!0,disabled:c.isLoading})}),Object(a.jsxs)("div",{className:r.buttons,children:[Object(a.jsx)(q.a,{className:r.clearButton,disabled:c.isLoading,variant:"contained",type:"button",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),Object(a.jsx)(q.a,{color:"primary",variant:"contained",className:r.button,disabled:c.isLoading,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]})}})})})})]})}var kt=r(178);var Tt=["","img/on-agreement.svg","img/in-progress.svg","img/ready.svg","img/completed.svg"],Lt=Object(z.a)((function(e){return{container:{padding:e.spacing(1),textAlign:"center",backgroundColor:"#fff",boxShadow:"0 0 14px 2px rgba(0, 0, 0, 0.3)",borderRadius:"4px"},acceptanceButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#df16a0",color:"#df16a0","&:hover":{color:"#fff",backgroundColor:"#df16a0"}},inWorkButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:e.palette.primary.main,color:e.palette.primary.main,"&:hover":{color:"#fff",backgroundColor:e.palette.primary.main}},readyButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#28a745",color:"#28a745","&:hover":{color:"#fff",backgroundColor:"#28a745"}},completedButton:{width:"100%",margin:".2rem 0",backgroundColor:"#28a745",border:"1px solid",borderColor:"#28a745",color:"#fff","&:hover":{borderColor:"#218838",backgroundColor:"#218838"}},popper:{zIndex:1,marginLeft:"0.5rem",'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent ".concat(e.palette.background.paper," transparent transparent")}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent ".concat(e.palette.background.paper)}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}}));var Dt=function(e){var t=e.orderId,r=e.status,n=Lt(),i=function(){var e=Object(Z.b)();return Object(le.a)((function(e){return d.a.get("/api/orders/statuses/"+e.orderId+"/"+e.statusId)}),{onSuccess:function(t,r){e.invalidateQueries("orders"),r.toggle()}})}(),s=o.a.useRef(null),l=o.a.useState(!0),c=Object(Q.a)(l,1)[0],u=o.a.useState(!1),m=Object(Q.a)(u,2),b=m[0],p=m[1],j=o.a.useState(null),v=Object(Q.a)(j,2),h=v[0],f=v[1],O=b?"scroll-playground":null,g=function(){return p((function(e){return!e}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:n.img,ref:s,src:Tt[r],width:"19",height:"19",alt:"on-agreement","aria-describedby":O,variant:"contained",color:"primary",onClick:g}),Object(a.jsxs)(kt.a,{id:O,open:b,anchorEl:s.current,placement:"right",disablePortal:!0,className:n.popper,modifiers:{flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"scrollParent"},arrow:{enabled:!0,element:h}},children:[c?Object(a.jsx)("span",{className:n.arrow,ref:f}):null,Object(a.jsxs)("div",{className:n.container,children:[Object(a.jsx)(q.a,{className:n.acceptanceButton,onClick:function(){return i.mutate({orderId:t,statusId:1,toggle:g})},children:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456"}),Object(a.jsx)("br",{}),Object(a.jsx)(q.a,{className:n.inWorkButton,onClick:function(){return i.mutate({orderId:t,statusId:2,toggle:g})},children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),Object(a.jsx)("br",{}),Object(a.jsx)(q.a,{className:n.readyButton,onClick:function(){return i.mutate({orderId:t,statusId:3,toggle:g})},children:"\u0413\u043e\u0442\u043e\u0432\u0435"}),Object(a.jsx)("br",{}),Object(a.jsx)(q.a,{className:n.completedButton,o:!0,onClick:function(){return i.mutate({orderId:t,statusId:4,toggle:g})},children:"\u0412\u0456\u0434\u0434\u0430\u043d\u043e"})]})]})]})},_t=(r(406),function(e){return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)});var It=[{field:"orderId",type:"number",headerName:"\u2116",width:59,renderCell:function(e){return Object(a.jsx)(St,{order:e.row})}},{field:"billNo",type:"number",headerName:"\u0420\u0430\u0445",width:50},{field:"customer",headerName:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",width:134,sortComparator:function(e,t){return r=e.customerName,a=t.customerName,r<a?-1:r>a?1:0;var r,a},valueFormatter:function(e){return e.value.customerName},renderCell:function(e){return e.value.info?Object(a.jsx)(wt,{title:e.value.info,children:Object(a.jsx)("b",{children:e.value.customerName})}):Object(a.jsx)("b",{children:e.value.customerName})}},{field:"date",type:"dateTime",headerName:"\u0414\u0430\u0442\u0430",width:93,valueFormatter:function(e){return _t(e.value)}},{field:"width",type:"number",headerName:"\u0428\u0438\u0440\u0438\u043d\u0430",valueFormatter:function(e){return e.value},width:69},{field:"height",type:"number",headerName:"\u0412\u0438\u0441\u043e\u0442\u0430",valueFormatter:function(e){return e.value},width:69},{field:"amount",type:"number",headerName:"\u041a-\u0441\u0442\u044c",valueFormatter:function(e){return e.value},width:56},{field:"m2",type:"number",headerName:"\u041c2",valueFormatter:function(e){return Number.parseFloat(e.value).toFixed(3)},width:64},{field:"price",type:"number",headerName:"\u0426\u0456\u043d\u0430",valueFormatter:function(e){return e.value},width:57},{field:"fees",type:"number",headerName:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",valueFormatter:function(e){return e.value},width:76},{field:"finalSum",type:"number",headerName:"\u0421\u0443\u043c\u0430",width:66,renderCell:function(e){return Object(a.jsxs)("b",{children:[" ",e.value," "]})}},{field:"paid",headerName:"\u041e\u043f\u043b\u0430\u0442\u0430",sortable:!1,width:71,cellClassName:"centered",renderCell:function(e){return e.row.paySum===e.row.finalSum?Object(a.jsx)(wt,{title:_t(new Date(e.row.payDate)),arrow:!0,children:Object(a.jsx)("img",{src:"img/completed.svg",width:"19",height:"19",alt:"paid"})}):e.row.paySum>0?Object(a.jsx)(wt,{title:e.row.paySum+" \u0433\u0440\u043d, "+_t(new Date(e.row.payDate)),arrow:!0,children:Object(a.jsx)("img",{src:"img/partly_paid.svg",width:"19",height:"19",alt:"partly__paid"})}):void 0}},{field:"status.ds",headerName:"\u0421\u0442\u0430\u0442\u0443\u0441",width:71,cellClassName:"centered",renderCell:function(e){return Object(a.jsx)(Dt,{orderId:e.row.orderId,status:e.row.status.id})}},{field:"orderType",type:"string",headerName:"\u0412\u0438\u0434",width:134,valueFormatter:function(e){return e.value.typeName}},{field:"orderKind",headerName:"\u0422\u0438\u043f",width:152,valueFormatter:function(e){return e.value.kindName}},{field:"comment",headerName:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",width:window.innerWidth-1268,renderCell:function(e){return Object(a.jsx)(wt,{title:e.value,placement:"left-start",children:e.value})}}];function Et(e){var t,r,o=e.tableID,i=Object(l.c)((function(e){return e.sortSelections})),s=function(e,t){var r=Object(l.c)((function(e){return e.auth}));return Object(Ee.a)(["orders",e,t],(function(){return ue(t,r.roles)}),{initialData:[],initialStale:!0,keepPreviousData:!1})}(o,i[i.active]),c=Object(n.useState)(""),d=Object(Q.a)(c,2),u=d[0],m=d[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ae.a,{variant:"outlined",size:"small",placeholder:"\u0428\u0432\u0438\u0434\u043a\u0438\u0439 \u043f\u043e\u0448\u0443\u043a",onChange:function(e){return m(e.target.value)}}),Object(a.jsxs)(B.a,{elevation:4,className:"x-grid",children:[i[i.active].selectedCustomer&&Object(a.jsx)("div",{className:"action__bar__stat",children:Object(a.jsxs)("label",{children:["\u0421\u0443\u043c\u0430 \u0431\u043e\u0440\u0433\u0443 :"," ",Object(a.jsx)("b",{children:(r=i[i.active].selectedCustomer,s.data.reduce((function(e,t){return e+(t.finalSum-t.paySum)}),0)-r.money)})," ","\u0433\u0440\u043d"]})}),Object(a.jsx)("div",{className:"frame",children:Object(a.jsx)("div",{className:"grid-holder",children:Object(a.jsx)(Je.a,{rows:(t=s.data,t.filter((function(e){var t,r,a,n,o,i,s,l,c,d,m,b,p;return(null===(t=e.orderId)||void 0===t?void 0:t.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(r=e.billNo)||void 0===r?void 0:r.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||e.customer.customerName.toString().toLowerCase().indexOf(u.toLowerCase())>-1||(null===(a=_t(e.date))||void 0===a?void 0:a.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(n=e.fees)||void 0===n?void 0:n.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(o=e.finalSum)||void 0===o?void 0:o.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(i=e.amount)||void 0===i?void 0:i.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(s=e.price)||void 0===s?void 0:s.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(l=e.height)||void 0===l?void 0:l.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(c=e.width)||void 0===c?void 0:c.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(d=e.m2)||void 0===d?void 0:d.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(m=e.orderKind.kindName)||void 0===m?void 0:m.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(b=e.orderType.typeName)||void 0===b?void 0:b.toString().toLowerCase().indexOf(u.toLowerCase()))>-1||(null===(p=e.comment)||void 0===p?void 0:p.toString().toLowerCase().indexOf(u.toLowerCase()))>-1}))),columns:It,sortModel:[{field:"orderId",sort:"desc"}],loading:s.isLoading,rowHeight:35,headerHeight:35,pagination:!0,disableSelectionOnClick:!0})})})]})]})}var Ft=function(){return Object(Ee.a)("customers",Fe),Object(Ee.a)("entrepreneurs",Pe,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Ee.a)("orderTypes",Re,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Ee.a)("statuses",Me,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Ee.a)("ce-links",Qe,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(Ee.a)("cp-links",Ke,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(M.a,{children:Object(a.jsxs)(A.d,{children:[Object(a.jsx)(A.b,{path:"/login",children:Object(a.jsx)(gt,{})}),Object(a.jsx)(A.b,{exact:!0,path:"/",children:Object(a.jsxs)("div",{className:"main",children:[Object(a.jsxs)("div",{className:"main__header",children:[Object(a.jsx)(dt,{}),Object(a.jsx)(ze,{})]}),Object(a.jsx)("div",{className:"main__table",children:Object(a.jsx)(Et,{tableID:1})})]})}),Object(a.jsx)(A.b,{path:"/clients",children:Object(a.jsxs)("div",{className:"clients",children:[Object(a.jsxs)("div",{className:"clients__header",children:[Object(a.jsx)(dt,{}),Object(a.jsx)(He,{})]}),Object(a.jsx)("div",{className:"clients__table",children:Object(a.jsx)(Xe,{})})]})}),Object(a.jsxs)(A.b,{path:"/sort",children:[Object(a.jsx)(dt,{}),Object(a.jsx)(Et,{tableID:2})]})]})}),Object(a.jsx)(nt,{})]})},Pt=r(236),Rt=function(e){var t=e.component,r=Object(te.a)(e,["component"]),n=Object(l.c)((function(e){return e.auth})),o=localStorage.getItem("token"),i=localStorage.getItem("username"),s=localStorage.getItem("roles"),c=JSON.parse(localStorage.getItem("loggedUser"));return Object(a.jsx)(A.b,Object(C.a)(Object(C.a)({},r),{},{render:function(e){return n.isAuthenticated?Object(a.jsx)(t,Object(C.a)({},e)):o?(_.dispatch(j(o,c,i,s)),Object(a.jsx)(t,Object(C.a)({},e))):Object(a.jsx)(A.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};r(407);var Mt=function(){return Object(a.jsx)(B.a,{elevation:3,className:"blue-holder",children:Object(a.jsxs)(B.a,{elevation:3,className:"info",children:[Object(a.jsxs)("div",{className:"blank-page",children:[Object(a.jsx)(K.a,{variant:"h4",component:"h3",children:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0430"})," ",Object(a.jsx)(K.a,{variant:"h2",component:"h3",children:"404"})]}),Object(a.jsx)(mt.a,{mt:8,children:Object(a.jsxs)(K.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Ve.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"})," ",(new Date).getFullYear(),"."]})})]})})},At=r(235),Qt=r(239),Kt=r(483),Bt=(r(408),Object(I.a)({palette:{primary:{light:"#fff",main:"rgba(0, 60, 170, 0.95)",dark:"rgba(0, 40, 170, 0.95)"},secondary:{main:"#f44336"}},typography:{useNextVariants:!0,fontSize:11,htmlFontSize:15}},Pt.ukUA)),qt=new Qt.a,Ut=new Kt.a({queryCache:qt});s.a.render(Object(a.jsx)(E.a,{theme:Bt,children:Object(a.jsxs)(Z.a,{client:Ut,children:[Object(a.jsx)(F.a,{utils:R.a,locale:P.a,children:Object(a.jsx)(l.a,{store:_,children:Object(a.jsx)(M.a,{children:Object(a.jsxs)(A.d,{children:[Object(a.jsx)(A.b,{path:"/login",component:gt}),Object(a.jsx)(Rt,{path:"/",component:Ft}),Object(a.jsx)(A.b,{path:"*",component:Mt})]})})})}),Object(a.jsx)(At.ReactQueryDevtools,{})]})}),document.getElementById("root"))}},[[409,1,2]]]);
//# sourceMappingURL=main.cd6df977.chunk.js.map