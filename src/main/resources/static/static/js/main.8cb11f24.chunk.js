(this["webpackJsonpb1.0"]=this["webpackJsonpb1.0"]||[]).push([[0],{24:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"f",(function(){return a})),r.d(t,"i",(function(){return o})),r.d(t,"j",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"l",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"m",(function(){return d})),r.d(t,"o",(function(){return u})),r.d(t,"n",(function(){return m})),r.d(t,"a",(function(){return b})),r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return j})),r.d(t,"k",(function(){return v})),r.d(t,"e",(function(){return f}));var n="ADD_ORDER",a="LOAD_ORDERS",o="SET_AUTHENTICATED",i="SET_UNAUTHENTICATED",s="SELECT_CUSTOMER",c="UNSELECT_CUSTOMER",l="SET_ACTIVE_SORTING",d="UPDATE_MAIN_SORTING",u="UPDATE_SORT_SORTING",m="UPDATE_PAYMENT_SORTING",b="ADD_MAIN_SORTING",p="ADD_SORT_SORTING",j="ADD_PAYMENT_SORTING",v="SHOW_CUSTOMER_MODAL",f="CLOSE_CUSTOMER_MODAL"},296:function(e,t,r){"use strict";r.r(t);var n=r(27),a=r(9),o=r(24),i={mainPageOrderList:[],sortPageOrderList:[],isLoading:!0};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.b:return Object(a.a)(Object(a.a)({},e),{},{mainPageOrderList:[].concat(Object(n.a)(e.mainPageOrderList),[t.payload]),sortPageOrderList:[].concat(Object(n.a)(e.sortPageOrderList),[t.payload])});case o.f:return t.payload?Object(a.a)(Object(a.a)({},e),{},{mainPageOrderList:t.payload,sortPageOrderList:t.payload,isLoading:!1}):e;default:return e}}},297:function(e,t,r){},396:function(e,t,r){},399:function(e,t,r){},400:function(e,t,r){},403:function(e,t,r){},404:function(e,t,r){},408:function(e,t,r){},409:function(e,t,r){},410:function(e,t,r){},411:function(e,t,r){"use strict";r.r(t);var n=r(32),a=r(9),o=r(2),i=r(0),s=r.n(i),c=r(25),l=r.n(c),d=r(31),u=r(19),m=r.n(u),b=r(34),p=r.n(b),j=r(51),v=r(24),f=function(e,t,r,n){return{type:v.i,payload:{token:e,employee:t,username:r,roles:n}}},O=function(e){return{type:v.h,payload:e}},h=function(e,t){var r;switch(t){case"main":r=v.m;break;case"sort":r=v.o;break;case"payment":r=v.n}return{type:r,payload:e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:v.k,payload:e}},x=function(){return{type:v.e}},y=function(){var e=Object(j.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/auth/signin",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){E.dispatch({type:v.j})},S={isAuthenticated:!1,loggedUser:null,roles:[]};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.i:return localStorage.setItem("token",t.payload.token),localStorage.setItem("username",t.payload.username),localStorage.setItem("roles",t.payload.roles),localStorage.setItem("loggedUser",JSON.stringify(t.payload.employee)),m.a.defaults.headers.common.Authorization="Bearer ".concat(t.payload.token),m.a.interceptors.response.use((function(e){return e}),(function(e){var t;throw 401===(null===(t=e.response)||void 0===t?void 0:t.status)?w():console.error(e),e})),{isAuthenticated:!0,loggedUser:t.payload.employee,roles:t.payload.roles};case v.j:return localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),localStorage.removeItem("loggedUser"),{isAuthenticated:!1,loggedUser:null};default:return e}},N={customer:null,status:null,dateFrom:null,dateTill:null,orderKind:null,orderType:null,employee:null,details:""},k={active:"main",main:N,sort:N,payment:N};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.h:return Object(a.a)(Object(a.a)({},e),{},{active:t.payload});case v.a:return Object(a.a)(Object(a.a)({},e),{},{main:Object(a.a)(Object(a.a)({},e.main),t.payload)});case v.d:return Object(a.a)(Object(a.a)({},e),{},{sort:Object(a.a)(Object(a.a)({},e.sort),t.payload)});case v.c:return Object(a.a)(Object(a.a)({},e),{},{payment:Object(a.a)(Object(a.a)({},e.payment),t.payload)});case v.m:return Object(a.a)(Object(a.a)({},e),{},{main:t.payload});case v.o:return Object(a.a)(Object(a.a)({},e),{},{sort:t.payload});case v.n:return Object(a.a)(Object(a.a)({},e),{},{payment:t.payload});default:return e}},I={customerId:0,customerName:"",customerGroup:"",money:0,payLog:"",debtor:!1,city:"",info:"",firstPerson:"",firstPhone:"",firstEmail:"",secondPerson:"",secondPhone:"",secondEmail:"",thirdPerson:"",thirdPhone:"",thirdEmail:""},L={show:!1,customer:I};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.k:return{show:!0,customer:t.payload};case v.e:return{show:!1,customer:{}};default:return e}},D=r(171),E=(0,D.createStore)((0,D.combineReducers)({auth:C,orders:r(296).default,sortSelections:T,showCustomerModal:_})),F=r(237),R=r(480),P=r(47),M=r(483),A=r(236),z=r(92),B=r(38),K=r(10),Q=r(119),U=r(118),q=r(121),G=r(471),W=r(99),H=r(470),V=(r(297),r(464)),J=r(422),$=r(120),Y=r(462),X=r(463),Z=r(465),ee=r(100),te=r.n(ee),re=r(12),ne=r(15),ae=(r(396),r(49)),oe=r(5),ie=r(239),se=r(484),ce=r(150),le=Object(oe.a)({inputRoot:{'&&[class*="MuiOutlinedInput-root"] $input':{padding:2},'&&[class*="MuiOutlinedInput-root"]':{paddingRight:"40px!important"}},input:{}})(se.a);var de=function(e){var t=e.label,r=e.getName,n=e.sortKey,i=e.error,s=e.validator,c=e.kindNameSetter,l=void 0!==c&&c,u=e.typeNameSetter,m=void 0!==u&&u,b=e.setEntrepreneur,p=void 0!==b&&b,j=e.setDimensions,f=void 0!==j&&j,O=e.setPrice,h=void 0!==O&&O,g=e.action,x=void 0!==g&&g,y=e.sortPage,w=void 0===y?"":y,S=(e.textFieldProps,Object(ae.a)(e,["label","getName","sortKey","error","validator","kindNameSetter","typeNameSetter","setEntrepreneur","setDimensions","setPrice","action","sortPage","textFieldProps"])),C=S.form.setFieldValue,N=Object(re.f)().values.order,k=Object(ce.a)(S),T=Object.assign({},k),I=T.name,L=Object(d.b)(),_=Object(W.b)();return Object(o.jsx)(le,Object(a.a)(Object(a.a)({},S),{},{size:"small",error:"",value:T.value,autoHighlight:!0,getOptionLabel:r,onKeyPress:function(e){"="!==e.key&&"+"!==e.key||(x&&x(),e.preventDefault())},onChange:function(e,t){if(n){var r={};r[n]=t,L(function(e,t){var r;switch(t){case"main":r=v.a;break;case"sort":r=v.d;break;case"payment":r=v.c}return{type:r,payload:e}}(r,w))}if(p){var a,o=(null===(a=_.getQueryData("ce-links").find((function(e){return e.customer.customerId===(null===t||void 0===t?void 0:t.customerId)})))||void 0===a?void 0:a.entrepreneur)||null;C("order.entrepreneur",o)}if(C(I,t),f&&t&&t.width&&t.height&&(C("order.width",t.width),C("order.height",t.height)),h){var i,c,l,d,u;if(!t)return;if(t.customerId)c=t.customerId,l=null===(d=N.orderKind)||void 0===d?void 0:d.kindId;else c=null===(u=N.customer)||void 0===u?void 0:u.customerId,l=t.kindId;if(!c||!l)return;var m=(null===(i=_.getQueryData("cp-links").find((function(e){var t,r;return(null===(t=e.customer)||void 0===t?void 0:t.customerId)===c&&(null===(r=e.orderKind)||void 0===r?void 0:r.kindId)===l})))||void 0===i?void 0:i.price)||0;C("order.price",m)}s(I)},renderInput:function(e){return Object(o.jsx)(ie.a,Object(a.a)(Object(a.a)({},e),{},{error:!!i,onChange:function(e){m?m(e.target.value):l&&l(e.target.value)},label:t,variant:"outlined"}))}}))},ue=r(491);var me=r(490),be=r(486);var pe=function(e){var t=e.open,r=e.onClose,n=e.message;return"success"===e.type?Object(o.jsx)(me.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:r,children:Object(o.jsx)(be.a,{onClose:r,variant:"filled",severity:"success",children:n})}):Object(o.jsx)(me.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:r,children:Object(o.jsx)(be.a,{onClose:r,variant:"filled",severity:"error",children:n})})};var je=function(e,t,r){e.price>=0?t.shrink||r({shrink:!0}):t.shrink&&r({shrink:!1})},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){return 0===e.orderId?(e.id=t,e.customerId=t):e.id=e.customerId,e}))},fe=function(e){var t=e.label,r=e.field,n=e.error,i=e.readonly,s=void 0!==i&&i,c=e.validator,l=e.isSum,d=void 0!==l&&l,u=e.numeric,m=void 0===u||u,b=e.phone,p=void 0!==b&&b,j=Object(ae.a)(e,["label","field","error","readonly","validator","isSum","numeric","phone"]),v=j.form.setFieldValue,f=Object(re.f)().values,O=r.onChange,h=r.name;return Object(o.jsx)(ie.a,Object(a.a)(Object(a.a)(Object(a.a)({},j),r),{},{error:!!n,size:"small",variant:"outlined",autoComplete:"off",label:t,InputProps:{readOnly:s},onChange:function(e){m||O(e),(e.target.value.match(/^\d*\.?\d*$/)||0===e.target.value.length)&&O(e),c(h)},onKeyUp:function(e){if(m&&!p&&f.order&&!d){var t;(t=f.order).m2=(t.width*t.height/1e6*t.amount).toFixed(3)||0;var r=f.order.m2>0?Math.ceil(+f.order.m2*f.order.price+ +f.order.fees):Math.ceil(f.order.price*f.order.amount+ +f.order.fees);r&&v("order.finalSum",r)}}}))},Oe={kindId:0,typeId:0,kindName:"",width:0,height:0},he={orderId:0,billNo:0,date:"",employee:{userID:60},entrepreneur:null,customer:null,orderType:null,orderKind:null,width:0,height:0,amount:0,m2:0,price:0,fees:0,finalSum:0,paySum:0,status:{id:1},comment:""},ge={typeId:0,typeName:""},xe=r(417),ye=r(416),we=function(e){var t=e.label,r=e.isChecked,n=Object(ae.a)(e,["label","isChecked"]),i=Object(re.e)(n),s=Object(K.a)(i,1)[0];return Object(o.jsx)(xe.a,{control:Object(o.jsx)(ye.a,Object(a.a)(Object(a.a)(Object(a.a)({},n),s),{},{checked:r,color:"primary"})),label:t})},Se=Object($.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},lock:{padding:0,width:"5px",backgroundColor:"white !important",minWidth:0,"&:hover":{backgroundColor:"white"}},svg:{fill:"rgba(0, 0, 0, 0.23)","&:hover":{fill:"black"}},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"}}})),Ce=ne.c({order:ne.c({entrepreneur:ne.c().required(),customer:ne.c().required(),orderType:ne.c().required(),orderKind:ne.c().required(),width:ne.b().lessThan(2e9).positive().min(0).required(),height:ne.b().lessThan(2e9).positive().min(0).required(),amount:ne.b().lessThan(2e9).positive().min(0).required(),price:ne.b().lessThan(2e9).positive().min(0).required(),fees:ne.b().lessThan(2e9).positive().min(0).required(),finalSum:ne.b().lessThan(2e9).positive().min(0).required(),comment:ne.d().trim().max(255).required()})});function Ne(){var e=Se(),t=Object(d.b)(),r=Object(W.b)(),n=Object(ue.a)((function(e){return m.a.post("/api/orders/",e.newOrder)}),{onSuccess:function(e,t){t.setStatus({success:!0,error:!1}),E.dispatch(h(Object(a.a)({},N),"main")),t.resetForm()},onError:function(e,t){t.setStatus({success:!1,error:!0})}}),s=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.get("/api/ce-links/"+e.customerId+"/"+e.entrepreneurId)}),{onSuccess:function(t,r){e.invalidateQueries("ce-links"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),c=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.get("/api/cp-links/"+e.customerId+"/"+e.orderKindId+"/"+e.price)}),{onSuccess:function(t,r){e.invalidateQueries("cp-links"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),l=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.post("/api/order-kinds/",e.orderKind)}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(t,r){r.orderType.orderKinds.push(t.data),e.invalidateQueries(["orderTypes"]),r.setStatus({success:!0,error:!1})}})}(),u=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.post("/api/order-types/",e.orderType)}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(t,r){e.invalidateQueries(["orderTypes"]),r.setStatus({success:!0,error:!1})}})}(),b=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.put("/api/order-kinds/",e.orderKind)}),{onSuccess:function(t,r){e.invalidateQueries("orderTypes"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),p=Object(i.useState)({}),j=Object(K.a)(p,2),v=j[0],f=j[1],O=Object(i.useState)({success:!1,error:!1}),x=Object(K.a)(O,2),y=x[0],w=x[1],S=Object(i.useState)({success:!1,error:!1}),C=Object(K.a)(S,2),k=C[0],T=C[1],L=Object(i.useState)({success:!1,error:!1}),_=Object(K.a)(L,2),D=_[0],F=_[1],R=Object(i.useState)({success:!1,error:!1}),P=Object(K.a)(R,2),M=P[0],A=P[1],z=Object(i.useState)({success:!1,error:!1}),B=Object(K.a)(z,2),Q=B[0],U=B[1],G=Object(i.useState)({success:!1,error:!1}),H=Object(K.a)(G,2),$=H[0],ee=H[1],ne=Object(i.useState)(""),ae=Object(K.a)(ne,2),oe=ae[0],ie=ae[1],se=Object(i.useState)(""),ce=Object(K.a)(se,2),le=ce[0],me=ce[1],be=function(){w({success:!1,error:!1}),T({success:!1,error:!1}),F({success:!1,error:!1}),A({success:!1,error:!1}),ee({success:!1,error:!1}),U({success:!1,error:!1})},ve=function(){t(g(Object(a.a)({},I)))},xe=function(){0!==le.trim().length?u.mutate({orderType:Object(a.a)(Object(a.a)({},ge),{},{typeName:le}),setStatus:U}):U({success:!1,error:!0})},ye=function(e,t,a){var o,i;o=e.isUrgently,i=e.order,o&&(.15*i.finalSum<10?i.finalSum=+i.finalSum+10:i.finalSum=Math.ceil(1.15*i.finalSum),i.comment="(\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e) "+i.comment),function(e,t){t.status=e?r.getQueryData("statuses").find((function(e){return 1===e.id})):r.getQueryData("statuses").find((function(e){return 2===e.id}))}(e.onAcceptance,e.order),n.mutate({newOrder:e.order,resetForm:e.clearFields?t:function(){return Ne(e.order,a)},setStatus:w})},Ne=function(e,t){var n;t("order.width",e.orderKind.width),t("order.height",e.orderKind.height),t("order.amount",0),t("order.price",(null===(n=r.getQueryData("cp-links").find((function(t){var r,n;return(null===(r=t.customer)||void 0===r?void 0:r.customerId)===e.customer.customerId&&(null===(n=t.orderKind)||void 0===n?void 0:n.kindId)===e.orderKind.kindId})))||void 0===n?void 0:n.price)||0),t("order.fees",0),t("order.finalSum",0),t("order.comment","")};return Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)(re.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{order:Object(a.a)(Object(a.a)({},he),{},{employee:JSON.parse(localStorage.getItem("loggedUser"))}),onAcceptance:!1,clearFields:!0,isUrgently:!1},onSubmit:function(e,t){var r=t.resetForm,n=t.setFieldValue;return ye(e,r,n)},validationSchema:Ce,children:function(t){var i,d,u,m,p,j,O,g,x,y,w,S,C=t.values,k=t.errors,I=t.validateField,L=t.handleReset;t.setFieldValue;return Object(o.jsxs)(re.b,{children:[je(C.order,v,f),Object(o.jsxs)("div",{className:"row__one",children:[Object(o.jsx)(re.a,{name:"order.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===k||void 0===k||null===(i=k.order)||void 0===i?void 0:i.entrepreneur,validator:I,component:de,disabled:n.isFetching,getName:function(e){return e.fullName||""},options:r.getQueryData("entrepreneurs")||[]}),Object(o.jsx)(q.a,{tabIndex:-1,className:e.lock,disableRipple:!0,onClick:function(){return e=C.order.customer,t=C.order.entrepreneur,void(e&&t?s.mutate({customerId:e.customerId,entrepreneurId:t.entrepreneurId,setStatus:T}):T({success:!1,error:!0}));var e,t},children:Object(o.jsx)(Y.a,{className:e.svg})}),Object(o.jsx)(re.a,{name:"order.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===k||void 0===k||null===(d=k.order)||void 0===d?void 0:d.customer,validator:I,component:de,setEntrepreneur:!0,setPrice:!0,sortKey:"customer",sortPage:"main",action:ve,disabled:n.isFetching,getName:function(e){return e.customerName||""},options:r.getQueryData("customers")||[]}),Object(o.jsx)(re.a,{name:"order.orderType",label:"\u0412\u0438\u0434",error:null===k||void 0===k||null===(u=k.order)||void 0===u?void 0:u.orderType,validator:I,component:de,typeNameSetter:me,action:xe,disabled:n.isFetching,getName:function(e){return e.typeName||""},options:r.getQueryData("orderTypes")||[]}),Object(o.jsx)(re.a,{name:"order.orderKind",label:"\u0422\u0438\u043f",error:null===k||void 0===k||null===(m=k.order)||void 0===m?void 0:m.orderKind,validator:I,component:de,setPrice:!0,setDimensions:!0,action:function(){return e=C.order.orderType,void(0!==oe.trim().length&&e?l.mutate({orderType:e,orderKind:Object(a.a)(Object(a.a)({},Oe),{},{typeId:e.typeId,kindName:oe}),setStatus:ee}):ee({success:!1,error:!0}));var e},kindNameSetter:ie,disabled:n.isFetching,getName:function(e){return e.kindName||""},options:(null===(p=C.order.orderType)||void 0===p?void 0:p.orderKinds)||[]})]}),Object(o.jsxs)("div",{className:"row__two",children:[Object(o.jsx)(re.a,{name:"order.width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===k||void 0===k||null===(j=k.order)||void 0===j?void 0:j.width,validator:I,component:fe,disabled:n.isFetching}),Object(o.jsx)(q.a,{tabIndex:-1,className:e.lock,disableRipple:!0,onClick:function(){return e=C.order.orderKind,t=C.order.width,r=C.order.height,void(e&&t&&r?(e.width=t,e.height=r,b.mutate({orderKind:e,setStatus:F})):F({success:!1,error:!0}));var e,t,r},children:Object(o.jsx)(X.a,{className:e.svg})}),Object(o.jsx)(re.a,{name:"order.height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===k||void 0===k||null===(O=k.order)||void 0===O?void 0:O.height,validator:I,component:fe,disabled:n.isFetching}),Object(o.jsx)(re.a,{name:"order.amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===k||void 0===k||null===(g=k.order)||void 0===g?void 0:g.amount,validator:I,component:fe,disabled:n.isFetching}),Object(o.jsx)(J.a,{id:"outlined",size:"small",variant:"outlined",value:(C.order.width*C.order.height/1e6*C.order.amount).toFixed(3)||0,endAdornment:Object(o.jsx)(V.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(o.jsx)(re.a,{name:"order.price",label:"\u0426\u0456\u043d\u0430",error:null===k||void 0===k||null===(x=k.order)||void 0===x?void 0:x.price,validator:I,InputLabelProps:v,component:fe,disabled:n.isFetching}),Object(o.jsx)(q.a,{tabIndex:-1,className:e.lock,disableRipple:!0,onClick:function(){return e=C.order.customer,t=C.order.orderKind,r=C.order.price,void(e&&t&&r?c.mutate({customerId:e.customerId,orderKindId:t.kindId,price:r,setStatus:A}):A({success:!1,error:!0}));var e,t,r},children:Object(o.jsx)(Z.a,{className:e.svg})}),Object(o.jsx)(re.a,{name:"order.fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===k||void 0===k||null===(y=k.order)||void 0===y?void 0:y.fees,validator:I,component:fe,disabled:n.isFetching}),Object(o.jsx)(re.a,{name:"order.finalSum",label:"\u0421\u0443\u043c\u0430",error:null===k||void 0===k||null===(w=k.order)||void 0===w?void 0:w.finalSum,validator:I,component:fe,isSum:!0,disabled:n.isFetching})]}),Object(o.jsx)("div",{className:"row__three",children:Object(o.jsx)(re.a,{name:"order.comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===k||void 0===k||null===(S=k.order)||void 0===S?void 0:S.comment,validator:I,numeric:!1,component:fe,disabled:n.isFetching})}),Object(o.jsxs)("div",{className:"row__four",children:[Object(o.jsxs)("div",{className:"controls",children:[Object(o.jsx)(we,{name:"onAcceptance",isChecked:C.onAcceptance,label:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456",disabled:n.isFetching}),Object(o.jsx)(we,{name:"clearFields",isChecked:C.clearFields,label:"\u041e\u0447\u0438\u0449\u0430\u0442\u0438 \u043f\u043e\u043b\u044f",disabled:n.isFetching}),Object(o.jsx)(we,{name:"isUrgently",isChecked:C.isUrgently,label:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e",disabled:n.isFetching})]}),Object(o.jsx)(q.a,{color:"primary",variant:"contained",disabled:n.isFetching,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(o.jsx)(q.a,{className:e.clear,onClick:function(e){return function(e,t){E.dispatch(h(Object(a.a)({},N),"main")),t(e)}(e,L)},disabled:n.isFetching,variant:"contained",type:"button",children:Object(o.jsx)(te.a,{})})]})]})}}),Object(o.jsx)(pe,{type:"success",open:y.success,onClose:be,message:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e."}),Object(o.jsx)(pe,{type:"error",open:y.error,onClose:be,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f."}),Object(o.jsx)(pe,{type:"success",open:k.success,onClose:be,message:"\u0417\u0432'\u044f\u0437\u043e\u043a \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(o.jsx)(pe,{type:"error",open:k.error,onClose:be,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0432'\u044f\u0437\u043a\u0443."}),Object(o.jsx)(pe,{type:"success",open:D.success,onClose:be,message:"\u0420\u043e\u0437\u043c\u0456\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(o.jsx)(pe,{type:"error",open:D.error,onClose:be,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0440\u043e\u0437\u043c\u0456\u0440\u0456\u0432."}),Object(o.jsx)(pe,{type:"success",open:M.success,onClose:be,message:"\u0426\u0456\u043d\u0430 \u043f\u0440\u0438\u0432'\u044f\u0437\u0430\u043d\u0430."}),Object(o.jsx)(pe,{type:"error",open:M.error,onClose:be,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0446\u0456\u043d\u0438."}),Object(o.jsx)(pe,{type:"success",open:$.success,onClose:be,message:"\u0422\u0438\u043f \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u0438\u0439."}),Object(o.jsx)(pe,{type:"error",open:$.error,onClose:be,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u0456 \u0442\u0438\u043f\u0443. \u041c\u043e\u0436\u043b\u0438\u0432\u043e \u043d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u0438\u0439 \u0432\u0438\u0434."}),Object(o.jsx)(pe,{type:"success",open:Q.success,onClose:be,message:"\u0412\u0438\u0434 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u0438\u0439."}),Object(o.jsx)(pe,{type:"error",open:Q.error,onClose:be,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u0456 \u0432\u0438\u0434\u0443."})]})}var ke=r(481),Te=Object($.a)((function(){return{datepicker:{margin:0}}}));var Ie=function(e){var t=e.label,r=e.validator,n=e.onTouch,i=void 0!==n&&n,s=Object(ae.a)(e,["label","validator","onTouch"]),c=Te(),l=s.form.setFieldValue,d=Object(ce.a)(s),u=Object.assign({},d),m=u.name;return Object(o.jsx)(ke.a,Object(a.a)(Object(a.a)(Object(a.a)({},s),u),{},{autoOk:!0,autoComplete:"off",helperText:"",className:c.datepicker,inputVariant:"outlined",variant:"inline",format:"dd/MM/yyyy",margin:"normal",label:t,onChange:function(e){l(m,e),i&&i(!0),r&&r(m)},KeyboardButtonProps:{"aria-label":"change date"}}))},Le=function(e){var t=e.name,r=e.label,n=e.field,i=e.error,c=e.validator,l=(e.value,Object(ae.a)(e,["name","label","field","error","validator","value"])),d=n.onChange,u=Object(re.f)(),m=u.values.payment,b=u.setFieldValue;return s.a.useEffect((function(){var e;m.paymentType?b("payment.percentage",null===(e=m.paymentType)||void 0===e?void 0:e.paymentPercentage):b("payment.percentage",0)}),[m.paymentType,b]),Object(o.jsx)(ie.a,Object(a.a)(Object(a.a)(Object(a.a)({},l),n),{},{error:!!i,id:"metrics",size:"small",variant:"outlined",autoComplete:"off",label:r,onChange:function(e){(e.target.value.match(/^\d*\.?\d*$/)||0===e.target.value.length)&&(b("payment.percentage",e.target.value),d(e)),c(t)}}))};var _e=r(487),De=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/customers/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/entrepreneurs/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/order-types/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/orders/statuses/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/payments/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/ce-links/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/cp-links/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var ze={entrepreneur:null,customer:null,paymentDate:null,sum:0,percentage:0,paymentType:null},Be=Object($.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},row__one:{display:"grid",gridColumnGap:"20px",gridTemplateColumns:"1fr 2fr",margin:".5rem auto 1rem auto"},row__two:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 0.05fr 1fr 1fr",margin:"1rem auto","& .MuiOutlinedInput-input":{padding:"8px 8px"},"& .MuiInputLabel-outlined":{transform:"translate(14px, 10px) scale(1)"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& .MuiAutocomplete-endAdornment":{top:"initial",right:"11px !important"}},button:{gridColumn:2,width:"16rem",height:"2.375rem",justifySelf:"center"},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"},lock:{padding:0,width:"100%",backgroundColor:"white !important",minWidth:0,"&:hover":{backgroundColor:"white"}},svg:{fill:"rgba(0, 0, 0, 0.23)","&:hover":{fill:"black"}},successInfo:{display:"flex"},successText:{margin:"auto .5rem",color:"#27A637"},errorInfo:{display:"flex"},errorText:{margin:"auto .5rem",color:"#d2000a"},errorSvg:{fontSize:"2.54rem",fill:"#d2000a"},successSvg:{fontSize:"2.54rem",fill:"#27A637"}}})),Ke=ne.c({payment:ne.c({entrepreneur:ne.c().nullable(),customer:ne.c().required(),paymentDate:ne.a().required(),sum:ne.b().lessThan(2e9).positive().required(),percentage:ne.b().lessThan(2e9).positive().min(0).required(),paymentType:ne.c().required()})});var Qe=function(){var e=Be(),t=Object(W.b)(),r=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.post("/api/payments/",e.payment)}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(t,r){r.setStatus({success:!0,error:!1}),e.invalidateQueries(["orders"]),r.payment.sum=0}})}(),n=Object(_e.a)("paymentMethods",Pe,{initialData:[],initialStale:!0,keepPreviousData:!0}),i=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.put("/api/payments/types/",e.paymentMethod)}),{onSuccess:function(t,r){e.invalidateQueries("paymentMethods"),r.setStatus({success:!0,error:!1})},onError:function(e,t){t.setStatus({success:!1,error:!0})}})}(),c=s.a.useState({success:!1,error:!1}),l=Object(K.a)(c,2),d=l[0],u=l[1],b=s.a.useState({success:!1,error:!1}),p=Object(K.a)(b,2),j=p[0],v=p[1],f=function(){u({success:!1,error:!1}),v({success:!1,error:!1})};return Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)(re.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{payment:Object(a.a)(Object(a.a)({},ze),{},{paymentDate:new Date})},validationSchema:Ke,onSubmit:function(e){!function(e){var t=new Date;e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds())}(e.payment.paymentDate),e.payment.receiver=e.payment.paymentType.typeName,r.mutate({payment:e.payment,setStatus:u})},children:function(s){var c,l,d,u,m,b=s.values,p=s.errors,j=s.handleReset,f=s.validateField;return Object(o.jsxs)(re.b,{style:{margin:"0 auto"},children:[Object(o.jsxs)("div",{className:e.row__one,children:[Object(o.jsx)(re.a,{name:"payment.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===p||void 0===p||null===(c=p.payment)||void 0===c?void 0:c.entrepreneur,validator:f,component:de,sortKey:"entrepreneur",sortPage:"payment",disabled:r.isLoading,getName:function(e){return e.fullName||""},options:t.getQueryData("entrepreneurs")||[]}),Object(o.jsx)(re.a,{name:"payment.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===p||void 0===p||null===(l=p.payment)||void 0===l?void 0:l.customer,component:de,validator:f,sortKey:"customer",sortPage:"payment",disabled:r.isLoading,getName:function(e){return e.customerName||""},options:t.getQueryData("customers")||[]})]}),Object(o.jsxs)("div",{className:e.row__two,children:[Object(o.jsx)(re.a,{component:Ie,label:"\u0414\u0430\u0442\u0430",name:"payment.paymentDate",validator:f,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"payment.paymentType",label:"\u0422\u0438\u043f \u043e\u043f\u043b\u0430\u0442\u0438",error:null===p||void 0===p||null===(d=p.payment)||void 0===d?void 0:d.paymentType,component:de,validator:f,disabled:r.isLoading,getName:function(e){return e.typeName||""},options:(null===n||void 0===n?void 0:n.data)||[]}),Object(o.jsx)(q.a,{className:e.lock,disableRipple:!0,onClick:function(){return e=b.payment.paymentType,t=b.payment.percentage,e.paymentPercentage=t,void i.mutate({paymentMethod:e,setStatus:v});var e,t},children:Object(o.jsx)(X.a,{className:e.svg})}),Object(o.jsx)(re.a,{name:"payment.percentage",label:"\u0412\u0456\u0434\u0441\u043e\u0442\u043e\u043a",error:null===p||void 0===p||null===(u=p.payment)||void 0===u?void 0:u.percentage,validator:f,component:Le,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"payment.sum",label:"\u0421\u0443\u043c\u0430",error:null===p||void 0===p||null===(m=p.payment)||void 0===m?void 0:m.sum,validator:f,component:fe,disabled:r.isLoading})]}),Object(o.jsxs)("div",{className:"sort__row__three",children:[Object(o.jsx)(q.a,{color:"primary",variant:"contained",disabled:r.isLoading,className:e.button,type:"submit",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"}),Object(o.jsx)(q.a,{className:e.clear,onClick:function(e){return function(e,t){E.dispatch(h(Object(a.a)({},N),"payment")),t(e)}(e,j)},disabled:r.isLoading,variant:"contained",type:"button",children:Object(o.jsx)(te.a,{})})]})]})}}),Object(o.jsx)(pe,{type:"success",open:d.success,onClose:f,message:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u043d\u0435\u0441\u0435\u043d\u0430."}),Object(o.jsx)(pe,{type:"error",open:d.error,onClose:f,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u0456 \u043e\u043f\u043b\u0430\u0442\u0438."}),Object(o.jsx)(pe,{type:"success",open:j.success,onClose:f,message:"\u0417\u0432'\u044f\u0437\u043e\u043a \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u0439."}),Object(o.jsx)(pe,{type:"error",open:j.error,onClose:f,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0432'\u044f\u0437\u043a\u0443."})]})},Ue=(r(399),Object($.a)((function(){return{root:{display:"flex",flexWrap:"wrap",borderRadius:4,backgroundColor:"white",margin:"0 auto",width:"52%"},button:{width:"16rem",justifySelf:"center"},clear:{backgroundColor:"#fff",minWidth:0,justifySelf:"flex-end",margin:"0px 0px 1px 0",width:"2.4rem"}}}))),qe=ne.c({sort:ne.c({customer:ne.c().nullable(),status:ne.c().nullable(),dateFrom:ne.a().nullable(),dateTill:ne.a().nullable(),orderKind:ne.c().nullable(),orderType:ne.c().nullable(),details:ne.d().trim().max(255).nullable()})});var Ge=function(){var e=Ue(),t=Object(d.b)(),r=Object(W.b)(),n=Object(d.c)((function(e){return e.auth}));return Object(o.jsx)("div",{className:e.root,children:Object(o.jsx)(re.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{sort:N,showUserOrders:!1},onSubmit:function(e){e.showUserOrders?e.sort.employee=n.loggedUser:e.sort.employee=null,e.sort.details=e.sort.details.trim(),t(h(e.sort,"sort"))},validationSchema:qe,children:function(n){var i,s,c,l,d,u,m=n.values,b=n.errors,p=n.handleReset,j=n.validateField;return Object(o.jsxs)(re.b,{children:[Object(o.jsxs)("div",{className:"sort__row__one",children:[Object(o.jsx)(re.a,{name:"sort.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===b||void 0===b||null===(i=b.sort)||void 0===i?void 0:i.customer,component:de,validator:j,getName:function(e){return e.customerName||""},options:r.getQueryData("customers")||[]}),Object(o.jsx)(re.a,{name:"sort.orderType",label:"\u0412\u0438\u0434",error:null===b||void 0===b||null===(s=b.sort)||void 0===s?void 0:s.orderType,component:de,validator:j,getName:function(e){return e.typeName||""},options:r.getQueryData("orderTypes")||[]}),Object(o.jsx)(re.a,{name:"sort.orderKind",label:"\u0422\u0438\u043f",error:null===b||void 0===b||null===(c=b.sort)||void 0===c?void 0:c.orderKind,component:de,validator:j,getName:function(e){return e.kindName||""},options:(null===(l=m.sort.orderType)||void 0===l?void 0:l.orderKinds)||[]})]}),Object(o.jsxs)("div",{className:"sort__row__two",children:[Object(o.jsxs)("div",{className:"datepickers",children:[Object(o.jsx)(re.a,{component:Ie,disabled:!1,label:"\u0412\u0456\u0434",name:"sort.dateFrom"}),Object(o.jsx)(re.a,{component:Ie,disabled:!1,label:"\u0414\u043e",name:"sort.dateTill"})]}),Object(o.jsx)(re.a,{name:"sort.status",label:"\u0421\u0442\u0430\u0442\u0443\u0441",error:null===b||void 0===b||null===(d=b.sort)||void 0===d?void 0:d.status,component:de,validator:j,getName:function(e){return e.name||""},options:r.getQueryData("statuses")||[]}),Object(o.jsx)(re.a,{name:"sort.details",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===b||void 0===b||null===(u=b.sort)||void 0===u?void 0:u.details,numeric:!1,component:fe,validator:j})]}),Object(o.jsxs)("div",{className:"sort__row__three",children:[Object(o.jsx)(we,{name:"showUserOrders",isChecked:m.showUserOrders,label:"\u041b\u0438\u0448\u0435 \u043c\u043e\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(o.jsx)(q.a,{color:"primary",variant:"contained",className:e.button,type:"submit",children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u0442\u0438"}),Object(o.jsx)(q.a,{className:e.clear,onClick:function(e){return function(e,r){t(h(Object(a.a)({},N),"sort")),r(e)}(e,p)},variant:"contained",type:"button",children:Object(o.jsx)(te.a,{})})]})]})}})})};function We(){var e=Object(i.useState)(0),t=Object(K.a)(e,2),r=t[0],n=t[1],a=Object(W.b)(),s=Object(d.b)(),c=Object(H.a)(),l=Object(d.c)((function(e){return e.auth})),u=Object(d.c)((function(e){return e.sortSelections})),m=function(e){return n(r===e?0:e)};return Object(o.jsx)(U.a,{elevation:2,children:Object(o.jsxs)("div",{className:"action_bar_container",children:[Object(o.jsxs)("div",{className:"action__bar",children:[Object(o.jsx)("div",{className:"action__bar__info",children:function(){var e,t,r,n,a,i,s;if(u[u.active].selectedCustomer)return(null===(e=u[u.active].selectedCustomer)||void 0===e?void 0:e.debtor)?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(Q.a,{variant:"subtitle1",children:[Object(o.jsx)("img",{className:"debtor-mark",src:"img/Blackmark.svg",width:"19",height:"19",alt:"blackmark"})," ",Object(o.jsx)("strong",{children:null===(t=u[u.active].selectedCustomer)||void 0===t?void 0:t.customerName})," ",null===(r=u[u.active].selectedCustomer)||void 0===r?void 0:r.customerGroup,":"," ",null===(n=u[u.active].selectedCustomer)||void 0===n?void 0:n.info]})}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(Q.a,{variant:"subtitle1",children:[Object(o.jsx)("strong",{children:null===(a=u[u.active].selectedCustomer)||void 0===a?void 0:a.customerName})," ",null===(i=u[u.active].selectedCustomer)||void 0===i?void 0:i.customerGroup,":"," ",null===(s=u[u.active].selectedCustomer)||void 0===s?void 0:s.info]})})}()}),Object(o.jsxs)("div",{className:"action__bar__button",children:[!l.roles.includes("ROLE_GROUNDFLOOR")&&!l.roles.includes("ROLE_UVPRINT")&&Object(o.jsx)(q.a,{variant:"contained",color:"primary",onClick:function(){return m(1)},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(o.jsx)(q.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",onClick:function(){return m(2)},children:"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}),!l.roles.includes("ROLE_GROUNDFLOOR")&&!l.roles.includes("ROLE_UVPRINT")&&Object(o.jsx)(q.a,{style:{marginLeft:".5rem"},variant:"contained",color:"primary",onClick:function(){return m(3)},children:"\u0412\u043d\u0435\u0441\u0442\u0438 \u043e\u043f\u043b\u0430\u0442\u0443"})]})]}),Object(o.jsx)(G.a,{in:1===r,timeout:"auto",onEntered:function(){a.invalidateQueries("customers"),a.invalidateQueries("ce-links"),a.invalidateQueries("cp-links"),c||s(O("main"))},children:Object(o.jsx)(Ne,{})}),Object(o.jsx)(G.a,{in:2===r,timeout:"auto",onEntered:function(){a.invalidateQueries("customers"),a.invalidateQueries("statuses"),c||s(O("sort"))},children:Object(o.jsx)(Ge,{})}),Object(o.jsx)(G.a,{in:3===r,timeout:"auto",onEntered:function(){a.invalidateQueries("customers"),c||s(O("payment"))},children:Object(o.jsx)(Qe,{})})]})})}r(400);var He=r(472),Ve=r(149);r(403);var Je=[{field:"customerName",headerName:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430",flex:3,renderCell:function(e){return Object(o.jsx)(He.a,{className:"name-link",onClick:function(){return E.dispatch(g(e.row))},children:Object(o.jsx)("b",{children:e.value})})}},{field:"debtor",headerName:"\u0411\u043e\u0440\u0436\u043d\u0438\u043a",flex:1.4,cellClassName:"centered",renderCell:function(e){return e.value?Object(o.jsx)("img",{src:"img/Blackmark.svg",width:"19",height:"19",alt:"blackmark"}):Object(o.jsx)("div",{})}},{field:"customerGroup",headerName:"\u0413\u0440\u0443\u043f\u0430",flex:5},{field:"firstPerson",headerName:"\u041e\u0441\u043e\u0431\u0430 1",flex:2},{field:"firstPhone",headerName:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d 1",flex:2.5},{field:"firstEmail",headerName:"Email 1",flex:4},{field:"city",headerName:"\u041c\u0456\u0441\u0442\u043e",flex:1.3},{field:"info",headerName:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",flex:6}];function $e(){var e=Object(W.b)(),t=Object(ue.a)((function(e){return m.a.post("api/customers/export/",{customers:e},{responseType:"arraybuffer"})}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(e,t){var r=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r);else{var n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download="\u041a\u043b\u0456\u0454\u043d\u0442\u0438.xlsx",a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}}),r=Object(d.c)((function(e){return e.auth})),n=Object(i.useState)(""),a=Object(K.a)(n,2),s=a[0],c=a[1],l=function(e){return e.filter((function(e){var t,r,n,a,o,i,c;return(null===(t=e.customerName)||void 0===t?void 0:t.toString().toLowerCase().indexOf(s.toLowerCase()))>-1||(null===(r=e.customerGroup)||void 0===r?void 0:r.toString().toLowerCase().indexOf(s.toLowerCase()))>-1||(null===(n=e.firstPerson)||void 0===n?void 0:n.toString().toLowerCase().indexOf(s.toLowerCase()))>-1||(null===(a=e.firstPhone)||void 0===a?void 0:a.toString().toLowerCase().indexOf(s.toLowerCase()))>-1||(null===(o=e.firstEmail)||void 0===o?void 0:o.toString().toLowerCase().indexOf(s.toLowerCase()))>-1||(null===(i=e.city)||void 0===i?void 0:i.toString().toLowerCase().indexOf(s.toLowerCase()))>-1||(null===(c=e.info)||void 0===c?void 0:c.toString().toLowerCase().indexOf(s.toLowerCase()))>-1}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(ie.a,{variant:"outlined",size:"small",placeholder:"\u0428\u0432\u0438\u0434\u043a\u0438\u0439 \u043f\u043e\u0448\u0443\u043a",onChange:function(e){return c(e.target.value)},InputProps:{endAdornment:r.roles.includes("ADMIN")&&Object(o.jsx)(q.a,{className:"export-btn",variant:"outlined",onClick:function(){return t.mutate(l(ve(e.getQueryData("customers")||[])))},children:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442"})}}),Object(o.jsx)(U.a,{elevation:4,className:"x-grid",children:Object(o.jsx)("div",{className:"frame",children:Object(o.jsx)("div",{className:"grid-holder",children:Object(o.jsx)(Ve.a,{className:"customers-grid",rows:l(ve(e.getQueryData("customers")||[])),columns:Je,sortModel:[{field:"customerName",sort:"asc"}],loading:e.isFetching("customers"),rowHeight:35,headerHeight:35,pagination:!0,disableSelectionOnClick:!0})})})})]})}var Ye=r(418),Xe=r(244),Ze=r(248);var et=Object($.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4),width:"40%","& .MuiOutlinedInput-inputMarginDense":{padding:"8px !important"}},link:{cursor:"pointer",color:e.palette.primary.main},h2:{textAlign:"center",fontWeight:"400",marginBottom:"1rem"},buttons:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},clearButton:{backgroundColor:"rgb(210,0,10)",color:"white",marginRight:"1rem","&:hover":{backgroundColor:"rgb(190,0,10)"}},rowOne:{gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr 1fr 1fr",gridColumnGap:"15px",gridRowGap:"10px"},rowTwo:{gridTemplateRows:"1fr 1fr 1fr",gridTemplateColumns:"1fr 1fr 1fr",gridRowGap:"10px"},longTextField:{gridColumnStart:1,gridColumnEnd:3},billNo:{gridColumn:4},switchHolder:{gridColumn:3,justifySelf:"end","& .MuiFormControlLabel-root":{margin:0}},auxiliaryRow:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",margin:"2rem auto 1rem auto","& .MuiOutlinedInput-input":{padding:"8px"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& #date-picker-inline-label":{transform:"translate(14px, 10px) scale(1)"}}}})),tt=ne.c({customer:ne.c({customerName:ne.d().required(),customerGroup:ne.d().nullable(),city:ne.d().nullable(),info:ne.d().nullable(),firstPerson:ne.d().trim().max(25).nullable(),firstPhone:ne.d().max(10).min(10).nullable(),firstEmail:ne.d().email().nullable(),secondPerson:ne.d().trim().max(25).nullable(),secondPhone:ne.d().max(10).min(10).nullable(),secondEmail:ne.d().email().nullable(),thirdPerson:ne.d().trim().max(25).nullable(),thirdPhone:ne.d().max(10).min(10).nullable(),thirdEmail:ne.d().email().nullable()})});function rt(){var e=et(),t=Object(d.c)((function(e){return e.showCustomerModal})),r=function(){var e=Object(W.b)(),t=Object(d.b)();return Object(ue.a)((function(e){return 0===e.customer.customerId?m.a.post("/api/customers/",e.customer):m.a.put("/api/customers/",e.customer)}),{onSuccess:function(r,n){e.invalidateQueries("customers"),t(x()),n.setStatus({success:!0,error:!1})},onError:function(e,t){console.log(e),t.setStatus({success:!1,error:!0})}})}(),n=Object(d.b)(),a=s.a.useState({success:!1,error:!1}),i=Object(K.a)(a,2),c=i[0],l=i[1],u=function(){l({success:!1,error:!1})};return Object(o.jsxs)("div",{children:[Object(o.jsx)(Ze.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:t.show,onClose:function(){return n(x())},closeAfterTransition:!0,BackdropComponent:Ye.a,BackdropProps:{timeout:500},children:Object(o.jsx)(Xe.a,{in:t.show,children:Object(o.jsx)("div",{className:e.paper,children:Object(o.jsx)(re.c,{validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,initialValues:{customer:t.customer},onSubmit:function(e){r.mutate({customer:e.customer,setStatus:l})},validationSchema:tt,children:function(n){var a,i,s,c,l,d,u,m,b,p,j,v,f,O=n.values,h=n.errors,g=n.validateField;return Object(o.jsxs)(re.b,{children:[Object(o.jsx)(Q.a,{className:e.h2,component:"h2",variant:"h5",children:t.customer.customerName?t.customer.customerName:"\u041d\u043e\u0432\u0438\u0439 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a"}),Object(o.jsxs)("div",{className:"row__one ".concat(e.rowOne),children:[Object(o.jsx)(re.a,{className:e.longTextField,name:"customer.customerName",label:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430",error:null===h||void 0===h||null===(a=h.customer)||void 0===a?void 0:a.customerName,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.customerGroup",label:"\u0413\u0440\u0443\u043f\u0430",error:null===h||void 0===h||null===(i=h.customer)||void 0===i?void 0:i.customerGroup,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{className:e.longTextField,name:"customer.info",label:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430",error:null===h||void 0===h||null===(s=h.customer)||void 0===s?void 0:s.info,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.city",label:"\u041c\u0456\u0441\u0442\u043e",error:null===h||void 0===h||null===(c=h.customer)||void 0===c?void 0:c.city,validator:g,component:fe,numeric:!1,disabled:r.isLoading})]}),Object(o.jsxs)("div",{className:"".concat(e.rowTwo," row__two"),children:[Object(o.jsx)(re.a,{name:"customer.firstPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 1",error:null===h||void 0===h||null===(l=h.customer)||void 0===l?void 0:l.firstPerson,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.firstPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===h||void 0===h||null===(d=h.customer)||void 0===d?void 0:d.firstPhone,validator:g,component:fe,phone:!0,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.firstEmail",label:"Email",error:null===h||void 0===h||null===(u=h.customer)||void 0===u?void 0:u.firstEmail,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.secondPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 2",error:null===h||void 0===h||null===(m=h.customer)||void 0===m?void 0:m.secondPerson,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.secondPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===h||void 0===h||null===(b=h.customer)||void 0===b?void 0:b.secondPhone,validator:g,component:fe,phone:!0,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.secondEmail",label:"Email",error:null===h||void 0===h||null===(p=h.customer)||void 0===p?void 0:p.secondEmail,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.thirdPerson",label:"\u041a\u043e\u043d\u0442. \u041e\u0441\u043e\u0431\u0430 3",error:null===h||void 0===h||null===(j=h.customer)||void 0===j?void 0:j.thirdPerson,validator:g,component:fe,numeric:!1,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.thirdPhone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u0431\u0435\u0437 +38)",error:null===h||void 0===h||null===(v=h.customer)||void 0===v?void 0:v.thirdPhone,validator:g,component:fe,phone:!0,disabled:r.isLoading}),Object(o.jsx)(re.a,{name:"customer.thirdEmail",label:"Email",error:null===h||void 0===h||null===(f=h.customer)||void 0===f?void 0:f.thirdEmail,validator:g,component:fe,numeric:!1,disabled:r.isLoading})]}),Object(o.jsxs)("div",{className:e.buttons,children:[Object(o.jsx)(q.a,{style:{gridColumn:2},color:"primary",variant:"contained",className:e.button,disabled:r.isLoading,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430"}),O.customer.customerId&&Object(o.jsx)("div",{className:e.switchHolder,children:Object(o.jsx)(we,{name:"customer.debtor",label:"\u0411\u043e\u0440\u0436\u043d\u0438\u043a",isChecked:O.customer.debtor,disabled:r.isLoading})})||null]})]})}})})})}),Object(o.jsx)(pe,{type:"success",open:c.success,onClose:u,message:"\u0417\u0430\u043c\u043e\u0432\u0438\u043d\u043a\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."}),Object(o.jsx)(pe,{type:"error",open:c.error,onClose:u,message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043d\u0438\u043a\u0430. \u041c\u043e\u0436\u043b\u0438\u0432\u043e \u043a\u043b\u0456\u0454\u043d\u0442 \u0437\u0456 \u0441\u0445\u043e\u0436\u043e\u044e \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0454\u044e \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454."})]})}var nt=r(473),at=r(474),ot=r(485),it=r(469),st=(r(404),Object($.a)((function(){return{root:{flexGrow:1},logoutButton:{padding:0},logoutHolder:{display:"flex",justifyContent:"flex-end",alignItems:"baseline",whiteSpace:"nowrap"},tabs:{margin:"0 auto",cursor:"pointer"}}})));function ct(){var e=st(),t=Object(B.g)(),r=Object(W.b)(),n=s.a.useState(0),a=Object(K.a)(n,2),i=a[0],c=a[1];return Object(o.jsx)(U.a,{elevation:2,children:Object(o.jsx)("div",{className:"header__container",children:Object(o.jsx)(nt.a,{position:"static",children:Object(o.jsxs)(it.a,{children:[Object(o.jsx)(He.a,{color:"inherit",href:"https://psdruk.com.ua/",children:Object(o.jsx)("img",{width:"110",height:"50",src:"/img/logo.svg",alt:"logo"})}),Object(o.jsxs)(ot.a,{className:e.tabs,value:i,onChange:function(e,n){switch(c(n),n){case 0:t.push("/");break;case 1:r.invalidateQueries("customers"),t.push("/clients")}},TabIndicatorProps:{style:{background:"white"}},indicatorColor:"secondary","aria-label":"scrollable auto tabs example",children:[Object(o.jsx)(at.a,{label:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),Object(o.jsx)(at.a,{label:"\u041a\u043b\u0456\u0454\u043d\u0442\u0438"})]}),Object(o.jsxs)("div",{className:e.logoutHolder,children:[Object(o.jsxs)(Q.a,{variant:"body1",style:{fontWeight:300},children:["\u0412\u0456\u0442\u0430\u0454\u043c\u043e, ",Object(o.jsx)("b",{children:localStorage.getItem("username")})]}),Object(o.jsx)(q.a,{color:"inherit",onClick:function(){w(),t.push("/login")},className:e.logoutButton,children:"\u0412\u0438\u0439\u0442\u0438"})]})]})})})})}var lt=r(489),dt=r(482),ut=r(475),mt=r(476),bt=r(477),pt=r(233),jt=r.n(pt);function vt(){return Object(o.jsxs)(Q.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(o.jsx)(He.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"})," ",(new Date).getFullYear(),"."]})}var ft=Object($.a)((function(e){return{paper:{marginTop:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ot(){var e=ft(),t=Object(B.g)(),r=Object(d.b)(),n=Object(i.useState)({username:"",password:""}),s=Object(K.a)(n,2),c=s[0],l=s[1],u=Object(i.useState)(!1),m=Object(K.a)(u,2),b=m[0],p=m[1],j=Object(i.useState)(!1),v=Object(K.a)(j,2),O=v[0],h=v[1],g=Object(i.useState)(!1),x=Object(K.a)(g,2),w=x[0],S=x[1],C=function(){p(!1),h(!1)};return Object(o.jsxs)(ut.a,{component:"main",maxWidth:"xs",children:[Object(o.jsx)(mt.a,{}),Object(o.jsxs)("div",{className:e.paper,children:[Object(o.jsx)(lt.a,{className:e.avatar,children:Object(o.jsx)(jt.a,{})}),Object(o.jsxs)("form",{className:e.form,onSubmit:function(e){e.preventDefault(),S(!0),y(c).then((function(e){e.roles.includes("ROLE_CUSTOMER")?p(!0):(r(f(e.token,e.employee,e.username,e.roles)),t.push("/"))})).catch((function(){S(!1),h(!0)}))},children:[Object(o.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return l(Object(a.a)(Object(a.a)({},c),{},{username:e.target.value}))},label:"\u041b\u043e\u0433\u0456\u043d",name:"email",autoComplete:"off",autoFocus:!0}),Object(o.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",onChange:function(e){return l(Object(a.a)(Object(a.a)({},c),{},{password:e.target.value}))},autoComplete:"off"}),Object(o.jsx)(q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:w,children:"\u0412\u0445\u0456\u0434"}),Object(o.jsxs)(bt.a,{container:!0,children:[Object(o.jsx)(bt.a,{item:!0,xs:!0,children:Object(o.jsx)(He.a,{href:"http://plg-site.32server.in.ua/",variant:"body2",children:"\u0417\u0430\u0431\u0443\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),Object(o.jsx)(bt.a,{item:!0,children:Object(o.jsx)(He.a,{href:"http://plg-site.32server.in.ua/",variant:"body2",children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c"})})]})]})]}),Object(o.jsx)(dt.a,{mt:8,children:Object(o.jsx)(vt,{})}),Object(o.jsx)(pe,{type:"error",open:b,onClose:C,message:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u0449\u0435 \u043d\u0435 \u043f\u0440\u043e\u0439\u0448\u043e\u0432 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0443."}),Object(o.jsx)(pe,{type:"error",open:O,onClose:C,message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443."})]})}var ht=r(466),gt=r(478),xt=r(467),yt=r(479),wt=r(468);var St=r(246),Ct=Object($.a)((function(e){return{arrow:{color:e.palette.primary.main},tooltip:{fontSize:12,backgroundColor:e.palette.primary.main}}}));var Nt=function(e){var t=e.title,r=(e.value,e.placement),n=void 0===r?"right-start":r,i=e.children,s=Object(ae.a)(e,["title","value","placement","children"]),c=Ct();return Object(o.jsx)(St.a,Object(a.a)(Object(a.a)({title:t,placement:n,arrow:!0,classes:c},s),{},{children:Object(o.jsx)("div",{className:"value",style:{lineHeight:"1.43"},children:i})}))};var kt=Object($.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4),width:"55%"},link:{cursor:"pointer",color:e.palette.primary.main},h2:{top:"-.9rem",position:"relative",marginTop:0,textAlign:"center",fontWeight:"400",gridColumnEnd:4,gridColumnStart:2},buttons:{display:"flex",justifyContent:"flex-end"},clearButton:{backgroundColor:"rgb(210,0,10)",color:"white",marginRight:"1rem","&:hover":{backgroundColor:"rgb(190,0,10)"}},rowOne:{gridTemplateColumns:"1fr 1fr 1fr 1fr"},rowTwo:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr 1fr"},billNo:{gridColumn:4},auxiliaryRow:{display:"grid",gridColumnGap:"20px",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",margin:"2rem auto 1rem auto","& .MuiOutlinedInput-input":{padding:"8px"},"& .MuiButtonBase-root":{padding:"2px !important"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"3px"},"& #date-picker-inline-label":{transform:"translate(14px, 10px) scale(1)"}}}})),Tt=ne.c({order:ne.c({entrepreneur:ne.c().required(),customer:ne.c().required(),date:ne.a().required(),orderType:ne.c().required(),orderKind:ne.c().required(),billNo:ne.b().lessThan(2e9).positive().min(0),width:ne.b().lessThan(2e9).positive().min(0).required(),height:ne.b().lessThan(2e9).positive().min(0).required(),amount:ne.b().lessThan(2e9).positive().min(0).required(),price:ne.b().lessThan(2e9).positive().min(0).required(),fees:ne.b().lessThan(2e9).positive().min(0).required(),finalSum:ne.b().lessThan(2e9).positive().min(0).required(),comment:ne.d().trim().max(255).required(),payLog:ne.d()})});function It(e){var t=e.order,r=kt(),n=Object(W.b)(),a=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.delete("/api/orders/"+e.orderId)}),{onError:function(e,t){t.setStatus(!0)},onSuccess:function(t,r){e.invalidateQueries(["orders"]),r.setShowModal(!1)}})}(),i=function(){var e=null,t=Object(W.b)();return Object(ue.a)((function(e){return m.a.put("/api/orders/",e.order)}),{onMutate:function(r){t.getQueryCache().findAll(["orders",1]).forEach((function(n){t.setQueryData(n.queryKey,n.state.data.map((function(t){return t.orderId===r.order.orderId?(e=t,r.order):t})))}))},onError:function(r,n){n.setStatus(!0),t.getQueryCache().findAll(["orders",1]).forEach((function(r){t.setQueryData(r.queryKey,r.state.data.map((function(t){return t.orderId===e.orderId?e:t})))}))},onSuccess:function(e,r){t.invalidateQueries(["orders"]),r.toggleModal()}})}(),c=s.a.useState(!1),l=Object(K.a)(c,2),d=l[0],u=l[1],b=s.a.useState(!1),p=Object(K.a)(b,2),j=p[0],v=p[1],f=s.a.useState(!1),O=Object(K.a)(f,2),h=O[0],g=O[1],x=s.a.useState(!1),y=Object(K.a)(x,2),w=y[0],S=y[1],C=function(){return u(!d)};return Object(o.jsxs)("div",{children:[Object(o.jsx)(Nt,{title:t.employee.name,children:Object(o.jsx)(He.a,{className:r.link,onClick:C,children:Object(o.jsx)("b",{children:t.orderId})})}),Object(o.jsx)(Ze.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.modal,open:d,onClose:C,closeAfterTransition:!0,BackdropComponent:Ye.a,BackdropProps:{timeout:500},children:Object(o.jsx)(Xe.a,{in:d,children:Object(o.jsx)("div",{className:r.paper,children:Object(o.jsx)(re.c,{validateOnChange:!0,validateOnMount:!1,validateOnBlur:!1,initialValues:{order:t},onSubmit:function(e){i.mutate({order:e.order,toggleModal:C,setStatus:g})},validationSchema:Tt,children:function(e){var a,s,c,l,d,u,m,b,p,f,O,x,y,w,C,N=e.values,k=e.errors,T=e.validateField;return Object(o.jsxs)(re.b,{children:[Object(o.jsx)(pe,{type:"error",open:j,onClose:function(){return v(!1)},message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f."}),Object(o.jsx)(pe,{type:"error",open:h,onClose:function(){return g(!1)},message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f."}),Object(o.jsxs)("div",{className:r.auxiliaryRow,children:[Object(o.jsx)(re.a,{component:Ie,label:"\u0414\u0430\u0442\u0430",name:"order.date",error:null===k||void 0===k||null===(a=k.order)||void 0===a?void 0:a.date,validator:T,disabled:i.isLoading}),Object(o.jsxs)(Q.a,{className:r.h2,component:"h2",variant:"h5",children:["\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044f \u2116 ",Object(o.jsx)("b",{children:t.orderId})]}),Object(o.jsx)(re.a,{className:r.billNo,name:"order.billNo",label:"\u2116 \u0420\u0430\u0445\u0443\u043d\u043a\u0443",error:null===k||void 0===k||null===(s=k.order)||void 0===s?void 0:s.billNo,validator:T,component:fe,disabled:i.isLoading})]}),Object(o.jsxs)("div",{className:"".concat(r.rowOne," row__one"),children:[Object(o.jsx)(re.a,{name:"order.entrepreneur",label:"\u041f\u0456\u0434\u043f\u0440\u0438\u0454\u043c\u0435\u0446\u044c",error:null===k||void 0===k||null===(c=k.order)||void 0===c?void 0:c.entrepreneur,validator:T,component:de,disabled:i.isLoading,getName:function(e){return e.fullName||""},options:n.getQueryData("entrepreneurs")}),Object(o.jsx)(re.a,{name:"order.customer",label:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",error:null===k||void 0===k||null===(l=k.order)||void 0===l?void 0:l.customer,validator:T,component:de,disabled:i.isLoading,getName:function(e){return e.customerName||""},options:n.getQueryData("customers")}),Object(o.jsx)(re.a,{name:"order.orderType",label:"\u0412\u0438\u0434",error:null===k||void 0===k||null===(d=k.order)||void 0===d?void 0:d.orderType,validator:T,component:de,disabled:i.isLoading,getName:function(e){return e.typeName||""},options:n.getQueryData("orderTypes")}),Object(o.jsx)(re.a,{name:"order.orderKind",label:"\u0422\u0438\u043f",error:null===k||void 0===k||null===(u=k.order)||void 0===u?void 0:u.orderKind,validator:T,component:de,disabled:i.isLoading,getName:function(e){return e.kindName||""},options:(null===(m=N.orderType)||void 0===m?void 0:m.orderKinds)||[]})]}),Object(o.jsxs)("div",{className:"".concat(r.rowTwo," row__two"),children:[Object(o.jsx)(re.a,{name:"order.width",label:"\u0428\u0438\u0440\u0438\u043d\u0430",error:null===k||void 0===k||null===(b=k.order)||void 0===b?void 0:b.width,validator:T,component:fe,disabled:i.isLoading}),Object(o.jsx)(re.a,{name:"order.height",label:"\u0412\u0438\u0441\u043e\u0442\u0430",error:null===k||void 0===k||null===(p=k.order)||void 0===p?void 0:p.height,validator:T,component:fe,disabled:i.isLoading}),Object(o.jsx)(re.a,{name:"order.amount",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c",error:null===k||void 0===k||null===(f=k.order)||void 0===f?void 0:f.amount,validator:T,component:fe,disabled:i.isLoading}),Object(o.jsx)(J.a,{id:"metrics",size:"small",variant:"outlined",value:(N.order.width*N.order.height/1e6*N.order.amount).toFixed(3)||0,endAdornment:Object(o.jsx)(V.a,{position:"end",children:"\u043c\xb2"}),disabled:!0}),Object(o.jsx)(re.a,{name:"order.price",label:"\u0426\u0456\u043d\u0430",error:null===k||void 0===k||null===(O=k.order)||void 0===O?void 0:O.price,validator:T,component:fe,disabled:i.isLoading}),Object(o.jsx)(re.a,{name:"order.fees",label:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",error:null===k||void 0===k||null===(x=k.order)||void 0===x?void 0:x.fees,validator:T,component:fe,disabled:i.isLoading}),Object(o.jsx)(re.a,{name:"order.finalSum",label:"\u0421\u0443\u043c\u0430",error:null===k||void 0===k||null===(y=k.order)||void 0===y?void 0:y.finalSum,validator:T,component:fe,isSum:!0,disabled:i.isLoading})]}),Object(o.jsx)("div",{className:"row__three",children:Object(o.jsx)(re.a,{name:"order.comment",label:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",error:null===k||void 0===k||null===(w=k.order)||void 0===w?void 0:w.comment,validator:T,numeric:!1,component:fe,disabled:i.isLoading})}),Object(o.jsx)("div",{className:"row__three",children:Object(o.jsx)(re.a,{name:"order.payLog",label:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u043f\u043b\u0430\u0442",error:null===k||void 0===k||null===(C=k.order)||void 0===C?void 0:C.payLog,validator:T,numeric:!1,multiline:!0,component:fe,disabled:i.isLoading})}),Object(o.jsxs)("div",{className:r.buttons,children:[Object(o.jsx)(q.a,{className:r.clearButton,disabled:i.isLoading,variant:"contained",type:"button",onClick:function(){return S(!0)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),Object(o.jsx)(q.a,{color:"primary",variant:"contained",className:r.button,disabled:i.isLoading,type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]})}})})})}),Object(o.jsxs)(ht.a,{fullScreen:!1,open:w,onClose:function(){return S(!1)},"aria-labelledby":"responsive-dialog-title",children:[Object(o.jsx)(gt.a,{id:"responsive-dialog-title",children:"\u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f?"}),Object(o.jsx)(xt.a,{children:Object(o.jsx)(yt.a,{children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u0439\u043e\u0433\u043e \u0437\u043c\u0456\u0441\u0442 \u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u0438 \u0431\u0443\u0434\u0435 \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e. \u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438?"})}),Object(o.jsxs)(wt.a,{children:[Object(o.jsx)(q.a,{autoFocus:!0,onClick:function(){return S(!1)},variant:"contained",color:"primary",children:"\u041d\u0456"}),Object(o.jsx)(q.a,{onClick:function(){return e=t.orderId,S(!1),void a.mutate({orderId:e,setStatus:g,setShowModal:u});var e},variant:"contained",className:r.clearButton,autoFocus:!0,children:"\u0422\u0430\u043a"})]})]})]})}var Lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){return 0===e.orderId?(e.id=t,e.orderId=t):e.id=e.orderId,e.date?e.date=new Date(e.date):e.date=new Date,e}))},_t=function(){var e=Object(j.a)(p.a.mark((function e(t){var r,n,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={orderId:null,customer:null,entrepreneur:null,employee:null,status:null,dateFrom:null,dateTill:null,payDateFrom:null,payDateTill:null,receiver:null,orderKind:null,orderType:null,details:""},n=Object(a.a)(Object(a.a)({},r),{},{orderId:null===t||void 0===t?void 0:t.orderId,customer:null===t||void 0===t?void 0:t.customer,entrepreneur:null===t||void 0===t?void 0:t.entrepreneur,employee:null===t||void 0===t?void 0:t.employee,status:null===t||void 0===t?void 0:t.status,dateFrom:null===t||void 0===t?void 0:t.dateFrom,dateTill:null===t||void 0===t?void 0:t.dateTill,payDateFrom:null===t||void 0===t?void 0:t.payDateFrom,payDateTill:null===t||void 0===t?void 0:t.payDateTill,receiver:null===t||void 0===t?void 0:t.receiver,orderKind:null===t||void 0===t?void 0:t.orderKind,orderType:null===t||void 0===t?void 0:t.orderType,details:null===t||void 0===t?void 0:t.details}),e.next=4,m.a.post("/api/orders/filter/",n);case 4:if(o=e.sent,!(i=o.data)){e.next=8;break}return e.abrupt("return",Lt(i));case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Dt=r(178);var Et=["","img/on-agreement.svg","img/in-progress.svg","img/ready.svg","img/completed.svg"],Ft=Object($.a)((function(e){return{container:{padding:e.spacing(1),textAlign:"center",backgroundColor:"#fff",boxShadow:"0 0 14px 2px rgba(0, 0, 0, 0.3)",borderRadius:"4px"},acceptanceButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#df16a0",color:"#df16a0","&:hover":{color:"#fff",backgroundColor:"#df16a0"}},inWorkButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:e.palette.primary.main,color:e.palette.primary.main,"&:hover":{color:"#fff",backgroundColor:e.palette.primary.main}},readyButton:{width:"100%",margin:".2rem 0",backgroundColor:"#fff",border:"1px solid",borderColor:"#28a745",color:"#28a745","&:hover":{color:"#fff",backgroundColor:"#28a745"}},completedButton:{width:"100%",margin:".2rem 0",backgroundColor:"#28a745",border:"1px solid",borderColor:"#28a745",color:"#fff","&:hover":{borderColor:"#218838",backgroundColor:"#218838"}},popper:{zIndex:1,marginLeft:"0.5rem",'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent ".concat(e.palette.background.paper," transparent transparent")}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.9em",marginTop:"0.45rem",height:"3em",width:"1em","&::before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent ".concat(e.palette.background.paper)}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}}));var Rt=function(e){var t=e.orderId,r=e.status,n=Ft(),a=function(){var e=Object(W.b)();return Object(ue.a)((function(e){return m.a.get("/api/orders/statuses/"+e.orderId+"/"+e.statusId)}),{onSuccess:function(t,r){e.invalidateQueries("orders"),r.toggle()}})}(),i=s.a.useRef(null),c=s.a.useState(!0),l=Object(K.a)(c,1)[0],d=s.a.useState(!1),u=Object(K.a)(d,2),b=u[0],p=u[1],j=s.a.useState(null),v=Object(K.a)(j,2),f=v[0],O=v[1],h=b?"scroll-playground":null,g=function(){return p((function(e){return!e}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("img",{className:n.img,ref:i,src:Et[r],width:"19",height:"19",alt:"on-agreement","aria-describedby":h,variant:"contained",color:"primary",onClick:g}),Object(o.jsxs)(Dt.a,{id:h,open:b,anchorEl:i.current,placement:"right",disablePortal:!0,className:n.popper,modifiers:{flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"scrollParent"},arrow:{enabled:!0,element:f}},children:[l?Object(o.jsx)("span",{className:n.arrow,ref:O}):null,Object(o.jsxs)("div",{className:n.container,children:[Object(o.jsx)(q.a,{className:n.acceptanceButton,onClick:function(){return a.mutate({orderId:t,statusId:1,toggle:g})},children:"\u041d\u0430 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u0456"}),Object(o.jsx)("br",{}),Object(o.jsx)(q.a,{className:n.inWorkButton,onClick:function(){return a.mutate({orderId:t,statusId:2,toggle:g})},children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),Object(o.jsx)("br",{}),Object(o.jsx)(q.a,{className:n.readyButton,onClick:function(){return a.mutate({orderId:t,statusId:3,toggle:g})},children:"\u0413\u043e\u0442\u043e\u0432\u0435"}),Object(o.jsx)("br",{}),Object(o.jsx)(q.a,{className:n.completedButton,o:!0,onClick:function(){return a.mutate({orderId:t,statusId:4,toggle:g})},children:"\u0412\u0456\u0434\u0434\u0430\u043d\u043e"})]})]})]})};r(408);function Pt(e,t){return e.localeCompare(t)}var Mt=function(e){return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)};function At(e){var t,r=e.tableID,n=Object(d.c)((function(e){return e.sortSelections})),a=Object(d.c)((function(e){return e.auth})),s=function(e,t){return Object(_e.a)(["orders",e,t],(function(){return _t(t)}),{initialData:[],initialStale:!0,keepPreviousData:!1})}(r,n[n.active]),c=Object(ue.a)((function(e){return m.a.post("api/orders/export/",{orders:e},{responseType:"arraybuffer"})}),{onError:function(e,t){t.setStatus({success:!1,error:!0})},onSuccess:function(e,t){var r=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r);else{var n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download="\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c.xlsx",a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}}),l=Object(i.useState)(""),u=Object(K.a)(l,2),b=u[0],p=u[1],j=[{field:"orderId",type:"number",headerName:"\u2116",flex:.8,renderCell:function(e){return a.roles.includes("ROLE_ADMIN")||a.roles.includes("ROLE_ORDERS_EDITOR")||e.row.employee.employeeID===a.loggedUser.employeeID?Object(o.jsx)(It,{order:e.row}):Object(o.jsx)(Nt,{title:e.row.employee.name,children:Object(o.jsx)(He.a,{style:{color:"rgba(0, 60, 170, 0.95)",textDecoration:"none"},children:Object(o.jsx)("b",{children:e.row.orderId})})})}},{field:"billNo",type:"number",headerName:"\u0420\u0430\u0445",flex:.6},{field:"customer",headerName:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",flex:2.2,sortComparator:function(e,t){return Pt(e.customerName,t.customerName)},valueFormatter:function(e){return e.value.customerName},renderCell:function(e){return e.value.info?Object(o.jsx)(Nt,{title:e.value.info,children:Object(o.jsx)("b",{children:e.value.customerName})}):Object(o.jsx)("b",{children:e.value.customerName})}},{field:"date",type:"dateTime",headerName:"\u0414\u0430\u0442\u0430",flex:1.2,valueFormatter:function(e){return Mt(e.value)}},{field:"width",type:"number",headerName:"\u0428\u0438\u0440\u0438\u043d\u0430",valueFormatter:function(e){return e.value},flex:1.09},{field:"height",type:"number",headerName:"\u0412\u0438\u0441\u043e\u0442\u0430",valueFormatter:function(e){return e.value},flex:1},{field:"amount",type:"number",headerName:"\u041a-\u0441\u0442\u044c",valueFormatter:function(e){return e.value},flex:.85},{field:"m2",type:"number",headerName:"\u041c2",valueFormatter:function(e){return Number.parseFloat(e.value).toFixed(3)},flex:.9},{field:"price",type:"number",headerName:"\u0426\u0456\u043d\u0430",valueFormatter:function(e){return e.value},flex:.8},{field:"fees",type:"number",headerName:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438",valueFormatter:function(e){return e.value},flex:1},{field:"finalSum",type:"number",headerName:"\u0421\u0443\u043c\u0430",flex:.9,renderCell:function(e){return Object(o.jsxs)("b",{children:[" ",e.value," "]})}},{field:"paid",headerName:"\u041e\u043f\u043b\u0430\u0442\u0430",sortable:!1,flex:1.1,cellClassName:"centered",renderCell:function(e){return e.row.paySum===e.row.finalSum?Object(o.jsx)(Nt,{title:Mt(new Date(e.row.payDate)),arrow:!0,children:Object(o.jsx)("img",{src:"img/completed.svg",width:"19",height:"19",alt:"paid"})}):e.row.paySum>0?Object(o.jsx)(Nt,{title:e.row.paySum+" \u0433\u0440\u043d, "+Mt(new Date(e.row.payDate)),arrow:!0,children:Object(o.jsx)("img",{src:"img/partly_paid.svg",width:"19",height:"19",alt:"partly__paid"})}):void 0}},{field:"status",headerName:"\u0421\u0442\u0430\u0442\u0443\u0441",flex:1.1,cellClassName:"centered",sortComparator:function(e,t){return e.id-t.id},renderCell:function(e){return Object(o.jsx)(Rt,{orderId:e.row.orderId,status:e.row.status.id})}},{field:"orderType",type:"string",headerName:"\u0412\u0438\u0434",flex:1.8,sortComparator:function(e,t){return Pt(e.typeName,t.typeName)},valueFormatter:function(e){return e.value.typeName}},{field:"orderKind",headerName:"\u0422\u0438\u043f",flex:1.8,sortComparator:function(e,t){return Pt(e.kindName,t.kindName)},valueFormatter:function(e){return e.value.kindName}},{field:"comment",headerName:"\u041e\u043f\u0438\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",flex:6,sortComparator:function(e,t){return Pt(e,t)},renderCell:function(e){return Object(o.jsx)(Nt,{title:e.value,placement:"left-start",children:e.value})}}],v=function(e){return e.filter((function(e){var t,r,n,a,o,i,s,c,l,d,u,m,p;return(null===(t=e.orderId)||void 0===t?void 0:t.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(r=e.billNo)||void 0===r?void 0:r.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||e.customer.customerName.toString().toLowerCase().indexOf(b.toLowerCase())>-1||(null===(n=Mt(e.date))||void 0===n?void 0:n.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(a=e.fees)||void 0===a?void 0:a.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(o=e.finalSum)||void 0===o?void 0:o.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(i=e.amount)||void 0===i?void 0:i.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(s=e.price)||void 0===s?void 0:s.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(c=e.height)||void 0===c?void 0:c.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(l=e.width)||void 0===l?void 0:l.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(d=e.m2)||void 0===d?void 0:d.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(u=e.orderKind.kindName)||void 0===u?void 0:u.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(m=e.orderType.typeName)||void 0===m?void 0:m.toString().toLowerCase().indexOf(b.toLowerCase()))>-1||(null===(p=e.comment)||void 0===p?void 0:p.toString().toLowerCase().indexOf(b.toLowerCase()))>-1}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(ie.a,{variant:"outlined",size:"small",placeholder:"\u0428\u0432\u0438\u0434\u043a\u0438\u0439 \u043f\u043e\u0448\u0443\u043a",onChange:function(e){return p(e.target.value)},InputProps:{endAdornment:a.roles.includes("ROLE_ORDERS_EXPORTER")&&Object(o.jsx)(q.a,{className:"export-btn",variant:"outlined",onClick:function(){return c.mutate(v(s.data))},children:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442"})}}),Object(o.jsxs)(U.a,{elevation:4,className:"x-grid",children:[n[n.active].selectedCustomer&&Object(o.jsx)("div",{className:"action__bar__stat",children:Object(o.jsxs)("label",{children:["\u0421\u0443\u043c\u0430 \u0431\u043e\u0440\u0433\u0443 :"," ",Object(o.jsx)("b",{children:(t=n[n.active].selectedCustomer,s.data.reduce((function(e,t){return e+(t.finalSum-t.paySum)}),0)-t.money)})," ","\u0433\u0440\u043d"]})}),Object(o.jsx)("div",{className:"frame",children:Object(o.jsx)("div",{className:"grid-holder",children:Object(o.jsx)(Ve.a,{rows:v(s.data),columns:j,sortModel:[{field:"orderId",sort:"desc"}],loading:s.isLoading,rowHeight:35,headerHeight:35,pagination:!0,disableSelectionOnClick:!0})})})]})]})}var zt=function(){return Object(_e.a)("customers",De),Object(_e.a)("entrepreneurs",Ee,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(_e.a)("orderTypes",Fe,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(_e.a)("statuses",Re,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(_e.a)("ce-links",Me,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(_e.a)("cp-links",Ae,{initialData:[],initialStale:!0,keepPreviousData:!0}),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(z.a,{children:Object(o.jsxs)(B.d,{children:[Object(o.jsx)(B.b,{path:"/login",children:Object(o.jsx)(Ot,{})}),Object(o.jsx)(B.b,{exact:!0,path:"/",children:Object(o.jsxs)("div",{className:"main",children:[Object(o.jsxs)("div",{className:"main__header",children:[Object(o.jsx)(ct,{}),Object(o.jsx)(We,{})]}),Object(o.jsx)("div",{className:"main__table",children:Object(o.jsx)(At,{tableID:1})})]})}),Object(o.jsx)(B.b,{path:"/clients",children:Object(o.jsxs)("div",{className:"clients",children:[Object(o.jsx)("div",{className:"clients__header",children:Object(o.jsx)(ct,{})}),Object(o.jsx)("div",{className:"clients__table",children:Object(o.jsx)($e,{})})]})}),Object(o.jsxs)(B.b,{path:"/sort",children:[Object(o.jsx)(ct,{}),Object(o.jsx)(At,{tableID:2})]})]})}),Object(o.jsx)(rt,{})]})},Bt=r(235),Kt=function(e){var t=e.component,r=Object(ae.a)(e,["component"]),n=Object(d.c)((function(e){return e.auth})),i=localStorage.getItem("token"),s=localStorage.getItem("username"),c=localStorage.getItem("roles"),l=JSON.parse(localStorage.getItem("loggedUser"));return Object(o.jsx)(B.b,Object(a.a)(Object(a.a)({},r),{},{render:function(e){return n.isAuthenticated?Object(o.jsx)(t,Object(a.a)({},e)):i?(E.dispatch(f(i,l,s,c)),Object(o.jsx)(t,Object(a.a)({},e))):Object(o.jsx)(B.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};r(409);var Qt,Ut,qt,Gt,Wt,Ht,Vt,Jt,$t,Yt=function(){return Object(o.jsx)(U.a,{elevation:3,className:"blue-holder",children:Object(o.jsxs)(U.a,{elevation:3,className:"info",children:[Object(o.jsxs)("div",{className:"blank-page",children:[Object(o.jsx)(Q.a,{variant:"h4",component:"h3",children:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0430"})," ",Object(o.jsx)(Q.a,{variant:"h2",component:"h3",children:"404"})]}),Object(o.jsx)(dt.a,{mt:8,children:Object(o.jsxs)(Q.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(o.jsx)(He.a,{color:"inherit",href:"https://psdruk.com.ua/",children:"psdruk.com.ua"})," ",(new Date).getFullYear(),"."]})})]})})},Xt=r(234),Zt=r(238),er=r(488),tr=(r(410),Object(F.a)({palette:{primary:{light:"#fff",main:"rgba(0, 60, 170, 0.95)",dark:"rgba(0, 40, 170, 0.95)"},secondary:{main:"#f44336"}},typography:{useNextVariants:!0,fontSize:11,htmlFontSize:15}},Bt.ukUA)),rr=tr.breakpoints,nr=Object(a.a)(Object(a.a)({},tr),{},{overrides:{MuiInputLabel:{root:(Qt={fontSize:11},Object(n.a)(Qt,rr.up("lg"),{fontSize:11}),Object(n.a)(Qt,rr.down(1300),{fontSize:9}),Qt)},MuiInputAdornment:{root:(Ut={fontSize:11},Object(n.a)(Ut,rr.up("lg"),{fontSize:11}),Object(n.a)(Ut,rr.down(1300),{fontSize:9}),Ut)},MuiInputBase:{root:(qt={fontSize:11},Object(n.a)(qt,rr.up("lg"),{fontSize:11}),Object(n.a)(qt,rr.down(1300),{fontSize:9}),qt)},MuiTypography:{root:(Gt={fontSize:11},Object(n.a)(Gt,rr.up("lg"),{fontSize:11}),Object(n.a)(Gt,rr.down(1300),{fontSize:9}),Gt),subtitle1:(Wt={fontSize:11},Object(n.a)(Wt,rr.up("lg"),{fontSize:11}),Object(n.a)(Wt,rr.down(1300),{fontSize:9}),Wt),body1:(Ht={fontSize:12},Object(n.a)(Ht,rr.up("lg"),{fontSize:12}),Object(n.a)(Ht,rr.down(1300),{fontSize:10}),Ht),button:(Vt={fontSize:11},Object(n.a)(Vt,rr.up("lg"),{fontSize:11}),Object(n.a)(Vt,rr.down(1300),{fontSize:9}),Vt)},MuiButton:{root:(Jt={fontSize:11},Object(n.a)(Jt,rr.up("lg"),{fontSize:11}),Object(n.a)(Jt,rr.down(1300),{fontSize:9}),Jt)},MuiTab:{root:($t={fontSize:11},Object(n.a)($t,rr.up("lg"),{fontSize:11}),Object(n.a)($t,rr.down(1300),{fontSize:9}),$t)},MuiSvgIcon:{root:Object(n.a)({},rr.down(1300),{fontSize:15})}}}),ar=new Zt.a,or=new er.a({queryCache:ar});l.a.render(Object(o.jsx)(R.a,{theme:nr,children:Object(o.jsxs)(W.a,{client:or,children:[Object(o.jsx)(P.a,{utils:A.a,locale:M.a,children:Object(o.jsx)(d.a,{store:E,children:Object(o.jsx)(z.a,{children:Object(o.jsxs)(B.d,{children:[Object(o.jsx)(B.b,{path:"/login",component:Ot}),Object(o.jsx)(Kt,{path:"/",component:zt}),Object(o.jsx)(B.b,{path:"*",component:Yt})]})})})}),Object(o.jsx)(Xt.ReactQueryDevtools,{})]})}),document.getElementById("root"))}},[[411,1,2]]]);
//# sourceMappingURL=main.8cb11f24.chunk.js.map